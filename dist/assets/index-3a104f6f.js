var UM=Object.defineProperty;var BM=(t,e,n)=>e in t?UM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wr=(t,e,n)=>(BM(t,typeof e!="symbol"?e+"":e,n),n);function zM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ru(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PC={exports:{}},_h={},AC={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),WM=Symbol.for("react.portal"),HM=Symbol.for("react.fragment"),KM=Symbol.for("react.strict_mode"),GM=Symbol.for("react.profiler"),qM=Symbol.for("react.provider"),QM=Symbol.for("react.context"),YM=Symbol.for("react.forward_ref"),XM=Symbol.for("react.suspense"),JM=Symbol.for("react.memo"),ZM=Symbol.for("react.lazy"),W_=Symbol.iterator;function eO(t){return t===null||typeof t!="object"?null:(t=W_&&t[W_]||t["@@iterator"],typeof t=="function"?t:null)}var RC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NC=Object.assign,kC={};function za(t,e,n){this.props=t,this.context=e,this.refs=kC,this.updater=n||RC}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jC(){}jC.prototype=za.prototype;function Py(t,e,n){this.props=t,this.context=e,this.refs=kC,this.updater=n||RC}var Ay=Py.prototype=new jC;Ay.constructor=Py;NC(Ay,za.prototype);Ay.isPureReactComponent=!0;var H_=Array.isArray,DC=Object.prototype.hasOwnProperty,Ry={current:null},MC={key:!0,ref:!0,__self:!0,__source:!0};function OC(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)DC.call(e,r)&&!MC.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:su,type:t,key:i,ref:o,props:s,_owner:Ry.current}}function tO(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ny(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function nO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var K_=/\/+/g;function om(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nO(""+t.key):e.toString(36)}function Ld(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case su:case WM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+om(o,0):r,H_(s)?(n="",t!=null&&(n=t.replace(K_,"$&/")+"/"),Ld(s,e,n,"",function(c){return c})):s!=null&&(Ny(s)&&(s=tO(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(K_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",H_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+om(i,a);o+=Ld(i,e,n,l,s)}else if(l=eO(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+om(i,a++),o+=Ld(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ju(t,e,n){if(t==null)return t;var r=[],s=0;return Ld(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Vd={transition:null},sO={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Vd,ReactCurrentOwner:Ry};function LC(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!Ny(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=za;Se.Fragment=HM;Se.Profiler=GM;Se.PureComponent=Py;Se.StrictMode=KM;Se.Suspense=XM;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sO;Se.act=LC;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=NC({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ry.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)DC.call(e,l)&&!MC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:su,type:t.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:QM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qM,_context:t},t.Consumer=t};Se.createElement=OC;Se.createFactory=function(t){var e=OC.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:YM,render:t}};Se.isValidElement=Ny;Se.lazy=function(t){return{$$typeof:ZM,_payload:{_status:-1,_result:t},_init:rO}};Se.memo=function(t,e){return{$$typeof:JM,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Vd.transition;Vd.transition={};try{t()}finally{Vd.transition=e}};Se.unstable_act=LC;Se.useCallback=function(t,e){return pn.current.useCallback(t,e)};Se.useContext=function(t){return pn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return pn.current.useEffect(t,e)};Se.useId=function(){return pn.current.useId()};Se.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return pn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Se.useRef=function(t){return pn.current.useRef(t)};Se.useState=function(t){return pn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return pn.current.useTransition()};Se.version="18.3.1";AC.exports=Se;var p=AC.exports;const J=ru(p),Eh=zM({__proto__:null,default:J},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO=p,oO=Symbol.for("react.element"),aO=Symbol.for("react.fragment"),lO=Object.prototype.hasOwnProperty,cO=iO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uO={key:!0,ref:!0,__self:!0,__source:!0};function VC(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lO.call(e,r)&&!uO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oO,type:t,key:i,ref:o,props:s,_owner:cO.current}}_h.Fragment=aO;_h.jsx=VC;_h.jsxs=VC;PC.exports=_h;var u=PC.exports,bg={},FC={exports:{}},Vn={},$C={exports:{}},UC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var W=O.length;O.push(F);e:for(;0<W;){var H=W-1>>>1,X=O[H];if(0<s(X,F))O[H]=F,O[W]=X,W=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],W=O.pop();if(W!==F){O[0]=W;e:for(var H=0,X=O.length,te=X>>>1;H<te;){var K=2*(H+1)-1,se=O[K],oe=K+1,Y=O[oe];if(0>s(se,W))oe<X&&0>s(Y,se)?(O[H]=Y,O[oe]=W,H=oe):(O[H]=se,O[K]=W,H=K);else if(oe<X&&0>s(Y,W))O[H]=Y,O[oe]=W,H=oe;else break e}}return F}function s(O,F){var W=O.sortIndex-F.sortIndex;return W!==0?W:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,h=null,m=3,g=!1,x=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(O){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=O)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function I(O){if(w=!1,T(O),!x)if(n(l)!==null)x=!0,$(R);else{var F=n(c);F!==null&&B(I,F.startTime-O)}}function R(O,F){x=!1,w&&(w=!1,E(S),S=-1),g=!0;var W=m;try{for(T(F),h=n(l);h!==null&&(!(h.expirationTime>F)||O&&!k());){var H=h.callback;if(typeof H=="function"){h.callback=null,m=h.priorityLevel;var X=H(h.expirationTime<=F);F=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(l)&&r(l),T(F)}else r(l);h=n(l)}if(h!==null)var te=!0;else{var K=n(c);K!==null&&B(I,K.startTime-F),te=!1}return te}finally{h=null,m=W,g=!1}}var M=!1,b=null,S=-1,A=5,P=-1;function k(){return!(t.unstable_now()-P<A)}function D(){if(b!==null){var O=t.unstable_now();P=O;var F=!0;try{F=b(!0,O)}finally{F?j():(M=!1,b=null)}}else M=!1}var j;if(typeof v=="function")j=function(){v(D)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=D,j=function(){q.postMessage(null)}}else j=function(){_(D,0)};function $(O){b=O,M||(M=!0,j())}function B(O,F){S=_(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,$(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var W=m;m=F;try{return O()}finally{m=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var W=m;m=O;try{return F()}finally{m=W}},t.unstable_scheduleCallback=function(O,F,W){var H=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?H+W:H):W=H,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=W+X,O={id:f++,callback:F,priorityLevel:O,startTime:W,expirationTime:X,sortIndex:-1},W>H?(O.sortIndex=W,e(c,O),n(l)===null&&O===n(c)&&(w?(E(S),S=-1):w=!0,B(I,W-H))):(O.sortIndex=X,e(l,O),x||g||(x=!0,$(R))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var F=m;return function(){var W=m;m=F;try{return O.apply(this,arguments)}finally{m=W}}}})(UC);$C.exports=UC;var dO=$C.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fO=p,Mn=dO;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BC=new Set,hc={};function fo(t,e){ga(t,e),ga(t+"Capture",e)}function ga(t,e){for(hc[t]=e,t=0;t<e.length;t++)BC.add(e[t])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ig=Object.prototype.hasOwnProperty,hO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G_={},q_={};function pO(t){return Ig.call(q_,t)?!0:Ig.call(G_,t)?!1:hO.test(t)?q_[t]=!0:(G_[t]=!0,!1)}function mO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gO(t,e,n,r){if(e===null||typeof e>"u"||mO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function jy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,jy);Mt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,jy);Mt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,jy);Mt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dy(t,e,n,r){var s=Mt.hasOwnProperty(e)?Mt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gO(e,n,s,r)&&(n=null),r||s===null?pO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ys=fO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),zC=Symbol.for("react.provider"),WC=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),Rg=Symbol.for("react.suspense_list"),Ly=Symbol.for("react.memo"),ks=Symbol.for("react.lazy"),HC=Symbol.for("react.offscreen"),Q_=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=Q_&&t[Q_]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,am;function Dl(t){if(am===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);am=e&&e[1]||""}return`
`+am+t}var lm=!1;function cm(t,e){if(!t||lm)return"";lm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dl(t):""}function vO(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=cm(t.type,!1),t;case 11:return t=cm(t.type.render,!1),t;case 1:return t=cm(t.type,!0),t;default:return""}}function Ng(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case Vo:return"Portal";case Pg:return"Profiler";case My:return"StrictMode";case Ag:return"Suspense";case Rg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WC:return(t.displayName||"Context")+".Consumer";case zC:return(t._context.displayName||"Context")+".Provider";case Oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ly:return e=t.displayName||null,e!==null?e:Ng(t.type)||"Memo";case ks:e=t._payload,t=t._init;try{return Ng(t(e))}catch{}}return null}function yO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ng(e);case 8:return e===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wO(t){var e=KC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=wO(t))}function GC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kg(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Y_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qC(t,e){e=e.checked,e!=null&&Dy(t,"checked",e,!1)}function jg(t,e){qC(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dg(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dg(t,e,n){(e!=="number"||hf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ml=Array.isArray;function ta(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function J_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Ml(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function QC(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Og(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,XC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xO=["Webkit","ms","Moz","O"];Object.keys(Kl).forEach(function(t){xO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kl[e]=Kl[t]})});function JC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kl.hasOwnProperty(t)&&Kl[t]?(""+e).trim():e+"px"}function ZC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=JC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _O=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lg(t,e){if(e){if(_O[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Vg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function Vy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $g=null,na=null,ra=null;function eE(t){if(t=au(t)){if(typeof $g!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Ih(e),$g(t.stateNode,t.type,e))}}function eb(t){na?ra?ra.push(t):ra=[t]:na=t}function tb(){if(na){var t=na,e=ra;if(ra=na=null,eE(t),e)for(t=0;t<e.length;t++)eE(e[t])}}function nb(t,e){return t(e)}function rb(){}var um=!1;function sb(t,e,n){if(um)return t(e,n);um=!0;try{return nb(t,e,n)}finally{um=!1,(na!==null||ra!==null)&&(rb(),tb())}}function mc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Ug=!1;if(os)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){Ug=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{Ug=!1}function EO(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Gl=!1,pf=null,mf=!1,Bg=null,TO={onError:function(t){Gl=!0,pf=t}};function SO(t,e,n,r,s,i,o,a,l){Gl=!1,pf=null,EO.apply(TO,arguments)}function CO(t,e,n,r,s,i,o,a,l){if(SO.apply(this,arguments),Gl){if(Gl){var c=pf;Gl=!1,pf=null}else throw Error(Q(198));mf||(mf=!0,Bg=c)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ib(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tE(t){if(ho(t)!==t)throw Error(Q(188))}function bO(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return tE(s),t;if(i===r)return tE(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function ob(t){return t=bO(t),t!==null?ab(t):null}function ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ab(t);if(e!==null)return e;t=t.sibling}return null}var lb=Mn.unstable_scheduleCallback,nE=Mn.unstable_cancelCallback,IO=Mn.unstable_shouldYield,PO=Mn.unstable_requestPaint,ft=Mn.unstable_now,AO=Mn.unstable_getCurrentPriorityLevel,Fy=Mn.unstable_ImmediatePriority,cb=Mn.unstable_UserBlockingPriority,gf=Mn.unstable_NormalPriority,RO=Mn.unstable_LowPriority,ub=Mn.unstable_IdlePriority,Th=null,br=null;function NO(t){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(Th,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:DO,kO=Math.log,jO=Math.LN2;function DO(t){return t>>>=0,t===0?32:31-(kO(t)/jO|0)|0}var nd=64,rd=4194304;function Ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ol(a):(i&=o,i!==0&&(r=Ol(i)))}else o=n&~s,o!==0?r=Ol(o):i!==0&&(r=Ol(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),s=1<<n,r|=t[n],e&=~s;return r}function MO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=MO(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function zg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function db(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function dm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function LO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ur(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $y(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Oe=0;function fb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hb,Uy,pb,mb,gb,Wg=!1,sd=[],Hs=null,Ks=null,Gs=null,gc=new Map,vc=new Map,Ms=[],VO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rE(t,e){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(e.pointerId)}}function xl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&Uy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FO(t,e,n,r,s){switch(e){case"focusin":return Hs=xl(Hs,t,e,n,r,s),!0;case"dragenter":return Ks=xl(Ks,t,e,n,r,s),!0;case"mouseover":return Gs=xl(Gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gc.set(i,xl(gc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vc.set(i,xl(vc.get(i)||null,t,e,n,r,s)),!0}return!1}function vb(t){var e=Ui(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=ib(n),e!==null){t.blockedOn=e,gb(t.priority,function(){pb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fg=r,n.target.dispatchEvent(r),Fg=null}else return e=au(n),e!==null&&Uy(e),t.blockedOn=n,!1;e.shift()}return!0}function sE(t,e,n){Fd(t)&&n.delete(e)}function $O(){Wg=!1,Hs!==null&&Fd(Hs)&&(Hs=null),Ks!==null&&Fd(Ks)&&(Ks=null),Gs!==null&&Fd(Gs)&&(Gs=null),gc.forEach(sE),vc.forEach(sE)}function _l(t,e){t.blockedOn===e&&(t.blockedOn=null,Wg||(Wg=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,$O)))}function yc(t){function e(s){return _l(s,t)}if(0<sd.length){_l(sd[0],t);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hs!==null&&_l(Hs,t),Ks!==null&&_l(Ks,t),Gs!==null&&_l(Gs,t),gc.forEach(e),vc.forEach(e),n=0;n<Ms.length;n++)r=Ms[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ms.length&&(n=Ms[0],n.blockedOn===null);)vb(n),n.blockedOn===null&&Ms.shift()}var sa=ys.ReactCurrentBatchConfig,yf=!0;function UO(t,e,n,r){var s=Oe,i=sa.transition;sa.transition=null;try{Oe=1,By(t,e,n,r)}finally{Oe=s,sa.transition=i}}function BO(t,e,n,r){var s=Oe,i=sa.transition;sa.transition=null;try{Oe=4,By(t,e,n,r)}finally{Oe=s,sa.transition=i}}function By(t,e,n,r){if(yf){var s=Hg(t,e,n,r);if(s===null)_m(t,e,r,wf,n),rE(t,r);else if(FO(s,t,e,n,r))r.stopPropagation();else if(rE(t,r),e&4&&-1<VO.indexOf(t)){for(;s!==null;){var i=au(s);if(i!==null&&hb(i),i=Hg(t,e,n,r),i===null&&_m(t,e,r,wf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _m(t,e,r,null,n)}}var wf=null;function Hg(t,e,n,r){if(wf=null,t=Vy(r),t=Ui(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ib(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wf=t,null}function yb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AO()){case Fy:return 1;case cb:return 4;case gf:case RO:return 16;case ub:return 536870912;default:return 16}default:return 16}}var Us=null,zy=null,$d=null;function wb(){if($d)return $d;var t,e=zy,n=e.length,r,s="value"in Us?Us.value:Us.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $d=s.slice(t,1<r?1-r:void 0)}function Ud(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function id(){return!0}function iE(){return!1}function Fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?id:iE,this.isPropagationStopped=iE,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Fn(Wa),ou=it({},Wa,{view:0,detail:0}),zO=Fn(ou),fm,hm,El,Sh=it({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==El&&(El&&t.type==="mousemove"?(fm=t.screenX-El.screenX,hm=t.screenY-El.screenY):hm=fm=0,El=t),fm)},movementY:function(t){return"movementY"in t?t.movementY:hm}}),oE=Fn(Sh),WO=it({},Sh,{dataTransfer:0}),HO=Fn(WO),KO=it({},ou,{relatedTarget:0}),pm=Fn(KO),GO=it({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),qO=Fn(GO),QO=it({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YO=Fn(QO),XO=it({},Wa,{data:0}),aE=Fn(XO),JO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eL[t])?!!e[t]:!1}function Hy(){return tL}var nL=it({},ou,{key:function(t){if(t.key){var e=JO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ud(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?Ud(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ud(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rL=Fn(nL),sL=it({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lE=Fn(sL),iL=it({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),oL=Fn(iL),aL=it({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),lL=Fn(aL),cL=it({},Sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uL=Fn(cL),dL=[9,13,27,32],Ky=os&&"CompositionEvent"in window,ql=null;os&&"documentMode"in document&&(ql=document.documentMode);var fL=os&&"TextEvent"in window&&!ql,xb=os&&(!Ky||ql&&8<ql&&11>=ql),cE=String.fromCharCode(32),uE=!1;function _b(t,e){switch(t){case"keyup":return dL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function hL(t,e){switch(t){case"compositionend":return Eb(e);case"keypress":return e.which!==32?null:(uE=!0,cE);case"textInput":return t=e.data,t===cE&&uE?null:t;default:return null}}function pL(t,e){if($o)return t==="compositionend"||!Ky&&_b(t,e)?(t=wb(),$d=zy=Us=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xb&&e.locale!=="ko"?null:e.data;default:return null}}var mL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mL[t.type]:e==="textarea"}function Tb(t,e,n,r){eb(r),e=xf(e,"onChange"),0<e.length&&(n=new Wy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,wc=null;function gL(t){Db(t,0)}function Ch(t){var e=zo(t);if(GC(e))return t}function vL(t,e){if(t==="change")return e}var Sb=!1;if(os){var mm;if(os){var gm="oninput"in document;if(!gm){var fE=document.createElement("div");fE.setAttribute("oninput","return;"),gm=typeof fE.oninput=="function"}mm=gm}else mm=!1;Sb=mm&&(!document.documentMode||9<document.documentMode)}function hE(){Ql&&(Ql.detachEvent("onpropertychange",Cb),wc=Ql=null)}function Cb(t){if(t.propertyName==="value"&&Ch(wc)){var e=[];Tb(e,wc,t,Vy(t)),sb(gL,e)}}function yL(t,e,n){t==="focusin"?(hE(),Ql=e,wc=n,Ql.attachEvent("onpropertychange",Cb)):t==="focusout"&&hE()}function wL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ch(wc)}function xL(t,e){if(t==="click")return Ch(e)}function _L(t,e){if(t==="input"||t==="change")return Ch(e)}function EL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:EL;function xc(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ig.call(e,s)||!fr(t[s],e[s]))return!1}return!0}function pE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mE(t,e){var n=pE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pE(n)}}function bb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ib(){for(var t=window,e=hf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hf(t.document)}return e}function Gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TL(t){var e=Ib(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bb(n.ownerDocument.documentElement,n)){if(r!==null&&Gy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=mE(n,i);var o=mE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SL=os&&"documentMode"in document&&11>=document.documentMode,Uo=null,Kg=null,Yl=null,Gg=!1;function gE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gg||Uo==null||Uo!==hf(r)||(r=Uo,"selectionStart"in r&&Gy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&xc(Yl,r)||(Yl=r,r=xf(Kg,"onSelect"),0<r.length&&(e=new Wy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uo)))}function od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},vm={},Pb={};os&&(Pb=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function bh(t){if(vm[t])return vm[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Pb)return vm[t]=e[n];return t}var Ab=bh("animationend"),Rb=bh("animationiteration"),Nb=bh("animationstart"),kb=bh("transitionend"),jb=new Map,vE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,e){jb.set(t,e),fo(e,[t])}for(var ym=0;ym<vE.length;ym++){var wm=vE[ym],CL=wm.toLowerCase(),bL=wm[0].toUpperCase()+wm.slice(1);yi(CL,"on"+bL)}yi(Ab,"onAnimationEnd");yi(Rb,"onAnimationIteration");yi(Nb,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(kb,"onTransitionEnd");ga("onMouseEnter",["mouseout","mouseover"]);ga("onMouseLeave",["mouseout","mouseover"]);ga("onPointerEnter",["pointerout","pointerover"]);ga("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function yE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CO(r,e,void 0,t),t.currentTarget=null}function Db(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;yE(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;yE(s,a,c),i=l}}}if(mf)throw t=Bg,mf=!1,Bg=null,t}function He(t,e){var n=e[Jg];n===void 0&&(n=e[Jg]=new Set);var r=t+"__bubble";n.has(r)||(Mb(e,t,2,!1),n.add(r))}function xm(t,e,n){var r=0;e&&(r|=4),Mb(n,t,r,e)}var ad="_reactListening"+Math.random().toString(36).slice(2);function _c(t){if(!t[ad]){t[ad]=!0,BC.forEach(function(n){n!=="selectionchange"&&(IL.has(n)||xm(n,!1,t),xm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ad]||(e[ad]=!0,xm("selectionchange",!1,e))}}function Mb(t,e,n,r){switch(yb(e)){case 1:var s=UO;break;case 4:s=BO;break;default:s=By}n=s.bind(null,e,n,t),s=void 0,!Ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _m(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}sb(function(){var c=i,f=Vy(n),h=[];e:{var m=jb.get(t);if(m!==void 0){var g=Wy,x=t;switch(t){case"keypress":if(Ud(n)===0)break e;case"keydown":case"keyup":g=rL;break;case"focusin":x="focus",g=pm;break;case"focusout":x="blur",g=pm;break;case"beforeblur":case"afterblur":g=pm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=oE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=oL;break;case Ab:case Rb:case Nb:g=qO;break;case kb:g=lL;break;case"scroll":g=zO;break;case"wheel":g=uL;break;case"copy":case"cut":case"paste":g=YO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=lE}var w=(e&4)!==0,_=!w&&t==="scroll",E=w?m!==null?m+"Capture":null:m;w=[];for(var v=c,T;v!==null;){T=v;var I=T.stateNode;if(T.tag===5&&I!==null&&(T=I,E!==null&&(I=mc(v,E),I!=null&&w.push(Ec(v,I,T)))),_)break;v=v.return}0<w.length&&(m=new g(m,x,null,n,f),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Fg&&(x=n.relatedTarget||n.fromElement)&&(Ui(x)||x[as]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?Ui(x):null,x!==null&&(_=ho(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(w=oE,I="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=lE,I="onPointerLeave",E="onPointerEnter",v="pointer"),_=g==null?m:zo(g),T=x==null?m:zo(x),m=new w(I,v+"leave",g,n,f),m.target=_,m.relatedTarget=T,I=null,Ui(f)===c&&(w=new w(E,v+"enter",x,n,f),w.target=T,w.relatedTarget=_,I=w),_=I,g&&x)t:{for(w=g,E=x,v=0,T=w;T;T=Po(T))v++;for(T=0,I=E;I;I=Po(I))T++;for(;0<v-T;)w=Po(w),v--;for(;0<T-v;)E=Po(E),T--;for(;v--;){if(w===E||E!==null&&w===E.alternate)break t;w=Po(w),E=Po(E)}w=null}else w=null;g!==null&&wE(h,m,g,w,!1),x!==null&&_!==null&&wE(h,_,x,w,!0)}}e:{if(m=c?zo(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var R=vL;else if(dE(m))if(Sb)R=_L;else{R=wL;var M=yL}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=xL);if(R&&(R=R(t,c))){Tb(h,R,n,f);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Dg(m,"number",m.value)}switch(M=c?zo(c):window,t){case"focusin":(dE(M)||M.contentEditable==="true")&&(Uo=M,Kg=c,Yl=null);break;case"focusout":Yl=Kg=Uo=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,gE(h,n,f);break;case"selectionchange":if(SL)break;case"keydown":case"keyup":gE(h,n,f)}var b;if(Ky)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else $o?_b(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(xb&&n.locale!=="ko"&&($o||S!=="onCompositionStart"?S==="onCompositionEnd"&&$o&&(b=wb()):(Us=f,zy="value"in Us?Us.value:Us.textContent,$o=!0)),M=xf(c,S),0<M.length&&(S=new aE(S,t,null,n,f),h.push({event:S,listeners:M}),b?S.data=b:(b=Eb(n),b!==null&&(S.data=b)))),(b=fL?hL(t,n):pL(t,n))&&(c=xf(c,"onBeforeInput"),0<c.length&&(f=new aE("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=b))}Db(h,e)})}function Ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mc(t,n),i!=null&&r.unshift(Ec(t,i,s)),i=mc(t,e),i!=null&&r.push(Ec(t,i,s))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=mc(n,i),l!=null&&o.unshift(Ec(n,l,a))):s||(l=mc(n,i),l!=null&&o.push(Ec(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var PL=/\r\n?/g,AL=/\u0000|\uFFFD/g;function xE(t){return(typeof t=="string"?t:""+t).replace(PL,`
`).replace(AL,"")}function ld(t,e,n){if(e=xE(e),xE(t)!==e&&n)throw Error(Q(425))}function _f(){}var qg=null,Qg=null;function Yg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xg=typeof setTimeout=="function"?setTimeout:void 0,RL=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,NL=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(t){return _E.resolve(null).then(t).catch(kL)}:Xg;function kL(t){setTimeout(function(){throw t})}function Em(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yc(e)}function qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Ha,Tc="__reactProps$"+Ha,as="__reactContainer$"+Ha,Jg="__reactEvents$"+Ha,jL="__reactListeners$"+Ha,DL="__reactHandles$"+Ha;function Ui(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[as]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EE(t);t!==null;){if(n=t[Sr])return n;t=EE(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[Sr]||t[as],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Ih(t){return t[Tc]||null}var Zg=[],Wo=-1;function wi(t){return{current:t}}function Ge(t){0>Wo||(t.current=Zg[Wo],Zg[Wo]=null,Wo--)}function $e(t,e){Wo++,Zg[Wo]=t.current,t.current=e}var ci={},Jt=wi(ci),xn=wi(!1),Xi=ci;function va(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _n(t){return t=t.childContextTypes,t!=null}function Ef(){Ge(xn),Ge(Jt)}function TE(t,e,n){if(Jt.current!==ci)throw Error(Q(168));$e(Jt,e),$e(xn,n)}function Ob(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,yO(t)||"Unknown",s));return it({},n,r)}function Tf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,Xi=Jt.current,$e(Jt,t),$e(xn,xn.current),!0}function SE(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=Ob(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,Ge(xn),Ge(Jt),$e(Jt,t)):Ge(xn),$e(xn,n)}var Gr=null,Ph=!1,Tm=!1;function Lb(t){Gr===null?Gr=[t]:Gr.push(t)}function ML(t){Ph=!0,Lb(t)}function xi(){if(!Tm&&Gr!==null){Tm=!0;var t=0,e=Oe;try{var n=Gr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gr=null,Ph=!1}catch(s){throw Gr!==null&&(Gr=Gr.slice(t+1)),lb(Fy,xi),s}finally{Oe=e,Tm=!1}}return null}var Ho=[],Ko=0,Sf=null,Cf=0,Hn=[],Kn=0,Ji=null,qr=1,Qr="";function Di(t,e){Ho[Ko++]=Cf,Ho[Ko++]=Sf,Sf=t,Cf=e}function Vb(t,e,n){Hn[Kn++]=qr,Hn[Kn++]=Qr,Hn[Kn++]=Ji,Ji=t;var r=qr;t=Qr;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qr=1<<32-ur(e)+s|n<<s|r,Qr=i+t}else qr=1<<i|n<<s|r,Qr=t}function qy(t){t.return!==null&&(Di(t,1),Vb(t,1,0))}function Qy(t){for(;t===Sf;)Sf=Ho[--Ko],Ho[Ko]=null,Cf=Ho[--Ko],Ho[Ko]=null;for(;t===Ji;)Ji=Hn[--Kn],Hn[Kn]=null,Qr=Hn[--Kn],Hn[Kn]=null,qr=Hn[--Kn],Hn[Kn]=null}var Rn=null,Pn=null,Qe=!1,ar=null;function Fb(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Pn=qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:qr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Pn=null,!0):!1;default:return!1}}function ev(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tv(t){if(Qe){var e=Pn;if(e){var n=e;if(!CE(t,e)){if(ev(t))throw Error(Q(418));e=qs(n.nextSibling);var r=Rn;e&&CE(t,e)?Fb(r,n):(t.flags=t.flags&-4097|2,Qe=!1,Rn=t)}}else{if(ev(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Qe=!1,Rn=t}}}function bE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function cd(t){if(t!==Rn)return!1;if(!Qe)return bE(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yg(t.type,t.memoizedProps)),e&&(e=Pn)){if(ev(t))throw $b(),Error(Q(418));for(;e;)Fb(t,e),e=qs(e.nextSibling)}if(bE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Rn?qs(t.stateNode.nextSibling):null;return!0}function $b(){for(var t=Pn;t;)t=qs(t.nextSibling)}function ya(){Pn=Rn=null,Qe=!1}function Yy(t){ar===null?ar=[t]:ar.push(t)}var OL=ys.ReactCurrentBatchConfig;function Tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function ud(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IE(t){var e=t._init;return e(t._payload)}function Ub(t){function e(E,v){if(t){var T=E.deletions;T===null?(E.deletions=[v],E.flags|=16):T.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=Js(E,v),E.index=0,E.sibling=null,E}function i(E,v,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<v?(E.flags|=2,v):T):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,T,I){return v===null||v.tag!==6?(v=Rm(T,E.mode,I),v.return=E,v):(v=s(v,T),v.return=E,v)}function l(E,v,T,I){var R=T.type;return R===Fo?f(E,v,T.props.children,I,T.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ks&&IE(R)===v.type)?(I=s(v,T.props),I.ref=Tl(E,v,T),I.return=E,I):(I=qd(T.type,T.key,T.props,null,E.mode,I),I.ref=Tl(E,v,T),I.return=E,I)}function c(E,v,T,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=Nm(T,E.mode,I),v.return=E,v):(v=s(v,T.children||[]),v.return=E,v)}function f(E,v,T,I,R){return v===null||v.tag!==7?(v=qi(T,E.mode,I,R),v.return=E,v):(v=s(v,T),v.return=E,v)}function h(E,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rm(""+v,E.mode,T),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zu:return T=qd(v.type,v.key,v.props,null,E.mode,T),T.ref=Tl(E,null,v),T.return=E,T;case Vo:return v=Nm(v,E.mode,T),v.return=E,v;case ks:var I=v._init;return h(E,I(v._payload),T)}if(Ml(v)||yl(v))return v=qi(v,E.mode,T,null),v.return=E,v;ud(E,v)}return null}function m(E,v,T,I){var R=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return R!==null?null:a(E,v,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Zu:return T.key===R?l(E,v,T,I):null;case Vo:return T.key===R?c(E,v,T,I):null;case ks:return R=T._init,m(E,v,R(T._payload),I)}if(Ml(T)||yl(T))return R!==null?null:f(E,v,T,I,null);ud(E,T)}return null}function g(E,v,T,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(T)||null,a(v,E,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zu:return E=E.get(I.key===null?T:I.key)||null,l(v,E,I,R);case Vo:return E=E.get(I.key===null?T:I.key)||null,c(v,E,I,R);case ks:var M=I._init;return g(E,v,T,M(I._payload),R)}if(Ml(I)||yl(I))return E=E.get(T)||null,f(v,E,I,R,null);ud(v,I)}return null}function x(E,v,T,I){for(var R=null,M=null,b=v,S=v=0,A=null;b!==null&&S<T.length;S++){b.index>S?(A=b,b=null):A=b.sibling;var P=m(E,b,T[S],I);if(P===null){b===null&&(b=A);break}t&&b&&P.alternate===null&&e(E,b),v=i(P,v,S),M===null?R=P:M.sibling=P,M=P,b=A}if(S===T.length)return n(E,b),Qe&&Di(E,S),R;if(b===null){for(;S<T.length;S++)b=h(E,T[S],I),b!==null&&(v=i(b,v,S),M===null?R=b:M.sibling=b,M=b);return Qe&&Di(E,S),R}for(b=r(E,b);S<T.length;S++)A=g(b,E,S,T[S],I),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?S:A.key),v=i(A,v,S),M===null?R=A:M.sibling=A,M=A);return t&&b.forEach(function(k){return e(E,k)}),Qe&&Di(E,S),R}function w(E,v,T,I){var R=yl(T);if(typeof R!="function")throw Error(Q(150));if(T=R.call(T),T==null)throw Error(Q(151));for(var M=R=null,b=v,S=v=0,A=null,P=T.next();b!==null&&!P.done;S++,P=T.next()){b.index>S?(A=b,b=null):A=b.sibling;var k=m(E,b,P.value,I);if(k===null){b===null&&(b=A);break}t&&b&&k.alternate===null&&e(E,b),v=i(k,v,S),M===null?R=k:M.sibling=k,M=k,b=A}if(P.done)return n(E,b),Qe&&Di(E,S),R;if(b===null){for(;!P.done;S++,P=T.next())P=h(E,P.value,I),P!==null&&(v=i(P,v,S),M===null?R=P:M.sibling=P,M=P);return Qe&&Di(E,S),R}for(b=r(E,b);!P.done;S++,P=T.next())P=g(b,E,S,P.value,I),P!==null&&(t&&P.alternate!==null&&b.delete(P.key===null?S:P.key),v=i(P,v,S),M===null?R=P:M.sibling=P,M=P);return t&&b.forEach(function(D){return e(E,D)}),Qe&&Di(E,S),R}function _(E,v,T,I){if(typeof T=="object"&&T!==null&&T.type===Fo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Zu:e:{for(var R=T.key,M=v;M!==null;){if(M.key===R){if(R=T.type,R===Fo){if(M.tag===7){n(E,M.sibling),v=s(M,T.props.children),v.return=E,E=v;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ks&&IE(R)===M.type){n(E,M.sibling),v=s(M,T.props),v.ref=Tl(E,M,T),v.return=E,E=v;break e}n(E,M);break}else e(E,M);M=M.sibling}T.type===Fo?(v=qi(T.props.children,E.mode,I,T.key),v.return=E,E=v):(I=qd(T.type,T.key,T.props,null,E.mode,I),I.ref=Tl(E,v,T),I.return=E,E=I)}return o(E);case Vo:e:{for(M=T.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(E,v.sibling),v=s(v,T.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Nm(T,E.mode,I),v.return=E,E=v}return o(E);case ks:return M=T._init,_(E,v,M(T._payload),I)}if(Ml(T))return x(E,v,T,I);if(yl(T))return w(E,v,T,I);ud(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,T),v.return=E,E=v):(n(E,v),v=Rm(T,E.mode,I),v.return=E,E=v),o(E)):n(E,v)}return _}var wa=Ub(!0),Bb=Ub(!1),bf=wi(null),If=null,Go=null,Xy=null;function Jy(){Xy=Go=If=null}function Zy(t){var e=bf.current;Ge(bf),t._currentValue=e}function nv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){If=t,Xy=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},Go===null){if(If===null)throw Error(Q(308));Go=t,If.dependencies={lanes:0,firstContext:t}}else Go=Go.next=t;return e}var Bi=null;function e0(t){Bi===null?Bi=[t]:Bi.push(t)}function zb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,e0(e)):(n.next=s.next,s.next=n),e.interleaved=n,ls(t,r)}function ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var js=!1;function t0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ls(t,n)}return s=r.interleaved,s===null?(e.next=e,e0(r)):(e.next=s.next,s.next=e),r.interleaved=e,ls(t,n)}function Bd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}function PE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pf(t,e,n,r){var s=t.updateQueue;js=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,f=c=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(m=e,g=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(g,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(g,h,m):x,m==null)break e;h=it({},h,m);break e;case 2:js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=g,l=h):f=f.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(f===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);eo|=o,t.lanes=o,t.memoizedState=h}}function AE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var lu={},Ir=wi(lu),Sc=wi(lu),Cc=wi(lu);function zi(t){if(t===lu)throw Error(Q(174));return t}function n0(t,e){switch($e(Cc,e),$e(Sc,t),$e(Ir,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Og(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Og(e,t)}Ge(Ir),$e(Ir,e)}function xa(){Ge(Ir),Ge(Sc),Ge(Cc)}function Hb(t){zi(Cc.current);var e=zi(Ir.current),n=Og(e,t.type);e!==n&&($e(Sc,t),$e(Ir,n))}function r0(t){Sc.current===t&&(Ge(Ir),Ge(Sc))}var et=wi(0);function Af(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sm=[];function s0(){for(var t=0;t<Sm.length;t++)Sm[t]._workInProgressVersionPrimary=null;Sm.length=0}var zd=ys.ReactCurrentDispatcher,Cm=ys.ReactCurrentBatchConfig,Zi=0,rt=null,wt=null,St=null,Rf=!1,Xl=!1,bc=0,LL=0;function Ut(){throw Error(Q(321))}function i0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function o0(t,e,n,r,s,i){if(Zi=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?UL:BL,t=n(r,s),Xl){i=0;do{if(Xl=!1,bc=0,25<=i)throw Error(Q(301));i+=1,St=wt=null,e.updateQueue=null,zd.current=zL,t=n(r,s)}while(Xl)}if(zd.current=Nf,e=wt!==null&&wt.next!==null,Zi=0,St=wt=rt=null,Rf=!1,e)throw Error(Q(300));return t}function a0(){var t=bc!==0;return bc=0,t}function Tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?rt.memoizedState=St=t:St=St.next=t,St}function Jn(){if(wt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=St===null?rt.memoizedState:St.next;if(e!==null)St=e,wt=t;else{if(t===null)throw Error(Q(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?rt.memoizedState=St=t:St=St.next=t}return St}function Ic(t,e){return typeof e=="function"?e(t):e}function bm(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var f=c.lane;if((Zi&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,rt.lanes|=f,eo|=f}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,fr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,rt.lanes|=i,eo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Im(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fr(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Kb(){}function Gb(t,e){var n=rt,r=Jn(),s=e(),i=!fr(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,l0(Yb.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Pc(9,Qb.bind(null,n,r,s,e),void 0,null),bt===null)throw Error(Q(349));Zi&30||qb(n,e,s)}return s}function qb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qb(t,e,n,r){e.value=n,e.getSnapshot=r,Xb(e)&&Jb(t)}function Yb(t,e,n){return n(function(){Xb(e)&&Jb(t)})}function Xb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function Jb(t){var e=ls(t,1);e!==null&&dr(e,t,1,-1)}function RE(t){var e=Tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:t},e.queue=t,t=t.dispatch=$L.bind(null,rt,t),[e.memoizedState,t]}function Pc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zb(){return Jn().memoizedState}function Wd(t,e,n,r){var s=Tr();rt.flags|=t,s.memoizedState=Pc(1|e,n,void 0,r===void 0?null:r)}function Ah(t,e,n,r){var s=Jn();r=r===void 0?null:r;var i=void 0;if(wt!==null){var o=wt.memoizedState;if(i=o.destroy,r!==null&&i0(r,o.deps)){s.memoizedState=Pc(e,n,i,r);return}}rt.flags|=t,s.memoizedState=Pc(1|e,n,i,r)}function NE(t,e){return Wd(8390656,8,t,e)}function l0(t,e){return Ah(2048,8,t,e)}function eI(t,e){return Ah(4,2,t,e)}function tI(t,e){return Ah(4,4,t,e)}function nI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rI(t,e,n){return n=n!=null?n.concat([t]):null,Ah(4,4,nI.bind(null,e,t),n)}function c0(){}function sI(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iI(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oI(t,e,n){return Zi&21?(fr(n,e)||(n=db(),rt.lanes|=n,eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function VL(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Cm.transition;Cm.transition={};try{t(!1),e()}finally{Oe=n,Cm.transition=r}}function aI(){return Jn().memoizedState}function FL(t,e,n){var r=Xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lI(t))cI(e,n);else if(n=zb(t,e,n,r),n!==null){var s=dn();dr(n,t,r,s),uI(n,e,r)}}function $L(t,e,n){var r=Xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lI(t))cI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,fr(a,o)){var l=e.interleaved;l===null?(s.next=s,e0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=zb(t,e,s,r),n!==null&&(s=dn(),dr(n,t,r,s),uI(n,e,r))}}function lI(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function cI(t,e){Xl=Rf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}var Nf={readContext:Xn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},UL={readContext:Xn,useCallback:function(t,e){return Tr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:NE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wd(4194308,4,nI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wd(4,2,t,e)},useMemo:function(t,e){var n=Tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FL.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Tr();return t={current:t},e.memoizedState=t},useState:RE,useDebugValue:c0,useDeferredValue:function(t){return Tr().memoizedState=t},useTransition:function(){var t=RE(!1),e=t[0];return t=VL.bind(null,t[1]),Tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,s=Tr();if(Qe){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),bt===null)throw Error(Q(349));Zi&30||qb(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,NE(Yb.bind(null,r,i,t),[t]),r.flags|=2048,Pc(9,Qb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tr(),e=bt.identifierPrefix;if(Qe){var n=Qr,r=qr;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BL={readContext:Xn,useCallback:sI,useContext:Xn,useEffect:l0,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:iI,useReducer:bm,useRef:Zb,useState:function(){return bm(Ic)},useDebugValue:c0,useDeferredValue:function(t){var e=Jn();return oI(e,wt.memoizedState,t)},useTransition:function(){var t=bm(Ic)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:Kb,useSyncExternalStore:Gb,useId:aI,unstable_isNewReconciler:!1},zL={readContext:Xn,useCallback:sI,useContext:Xn,useEffect:l0,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:iI,useReducer:Im,useRef:Zb,useState:function(){return Im(Ic)},useDebugValue:c0,useDeferredValue:function(t){var e=Jn();return wt===null?e.memoizedState=t:oI(e,wt.memoizedState,t)},useTransition:function(){var t=Im(Ic)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:Kb,useSyncExternalStore:Gb,useId:aI,unstable_isNewReconciler:!1};function ir(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rh={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Xs(t),i=es(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(dr(e,t,s,r),Bd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=Xs(t),i=es(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(dr(e,t,s,r),Bd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=Xs(t),s=es(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qs(t,s,r),e!==null&&(dr(e,t,r,n),Bd(e,t,r))}};function kE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xc(n,r)||!xc(s,i):!0}function dI(t,e,n){var r=!1,s=ci,i=e.contextType;return typeof i=="object"&&i!==null?i=Xn(i):(s=_n(e)?Xi:Jt.current,r=e.contextTypes,i=(r=r!=null)?va(t,s):ci),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function jE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rh.enqueueReplaceState(e,e.state,null)}function sv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},t0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xn(i):(i=_n(e)?Xi:Jt.current,s.context=va(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rh.enqueueReplaceState(s,s.state,null),Pf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var n="",r=e;do n+=vO(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WL=typeof WeakMap=="function"?WeakMap:Map;function fI(t,e,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jf||(jf=!0,mv=r),iv(t,e)},n}function hI(t,e,n){n=es(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){iv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){iv(t,e),typeof r!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function DE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WL;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sV.bind(null,t,e,n),e.then(t,t))}function ME(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function OE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=es(-1,1),e.tag=2,Qs(n,e,1))),n.lanes|=1),t)}var HL=ys.ReactCurrentOwner,wn=!1;function an(t,e,n,r){e.child=t===null?Bb(e,null,n,r):wa(e,t.child,n,r)}function LE(t,e,n,r,s){n=n.render;var i=e.ref;return ia(e,s),r=o0(t,e,n,r,i,s),n=a0(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(Qe&&n&&qy(e),e.flags|=1,an(t,e,r,s),e.child)}function VE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pI(t,e,i,r,s)):(t=qd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xc,n(o,r)&&t.ref===e.ref)return cs(t,e,s)}return e.flags|=1,t=Js(i,r),t.ref=e.ref,t.return=e,e.child=t}function pI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xc(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,cs(t,e,s)}return ov(t,e,n,r,s)}function mI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Qo,bn),bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Qo,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Qo,bn),bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Qo,bn),bn|=r;return an(t,e,s,n),e.child}function gI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ov(t,e,n,r,s){var i=_n(n)?Xi:Jt.current;return i=va(e,i),ia(e,s),n=o0(t,e,n,r,i,s),r=a0(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(Qe&&r&&qy(e),e.flags|=1,an(t,e,n,s),e.child)}function FE(t,e,n,r,s){if(_n(n)){var i=!0;Tf(e)}else i=!1;if(ia(e,s),e.stateNode===null)Hd(t,e),dI(e,n,r),sv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xn(c):(c=_n(n)?Xi:Jt.current,c=va(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&jE(e,o,r,c),js=!1;var m=e.memoizedState;o.state=m,Pf(e,r,o,s),l=e.memoizedState,a!==r||m!==l||xn.current||js?(typeof f=="function"&&(rv(e,n,f,r),l=e.memoizedState),(a=js||kE(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ir(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xn(l):(l=_n(n)?Xi:Jt.current,l=va(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&jE(e,o,r,l),js=!1,m=e.memoizedState,o.state=m,Pf(e,r,o,s);var x=e.memoizedState;a!==h||m!==x||xn.current||js?(typeof g=="function"&&(rv(e,n,g,r),x=e.memoizedState),(c=js||kE(e,n,c,r,m,x,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return av(t,e,n,r,i,s)}function av(t,e,n,r,s,i){gI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&SE(e,n,!1),cs(t,e,i);r=e.stateNode,HL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wa(e,t.child,null,i),e.child=wa(e,null,a,i)):an(t,e,a,i),e.memoizedState=r.state,s&&SE(e,n,!0),e.child}function vI(t){var e=t.stateNode;e.pendingContext?TE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TE(t,e.context,!1),n0(t,e.containerInfo)}function $E(t,e,n,r,s){return ya(),Yy(s),e.flags|=256,an(t,e,n,r),e.child}var lv={dehydrated:null,treeContext:null,retryLane:0};function cv(t){return{baseLanes:t,cachePool:null,transitions:null}}function yI(t,e,n){var r=e.pendingProps,s=et.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(et,s&1),t===null)return tv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jh(o,r,0,null),t=qi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cv(n),e.memoizedState=lv,t):u0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return KL(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Js(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Js(a,i):(i=qi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lv,r}return i=t.child,t=i.sibling,r=Js(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function u0(t,e){return e=jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,r){return r!==null&&Yy(r),wa(e,t.child,null,n),t=u0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KL(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Pm(Error(Q(422))),dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jh({mode:"visible",children:r.children},s,0,null),i=qi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wa(e,t.child,null,o),e.child.memoizedState=cv(o),e.memoizedState=lv,i);if(!(e.mode&1))return dd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=Pm(i,r,void 0),dd(t,e,o,r)}if(a=(o&t.childLanes)!==0,wn||a){if(r=bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ls(t,s),dr(r,t,s,-1))}return g0(),r=Pm(Error(Q(421))),dd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pn=qs(s.nextSibling),Rn=e,Qe=!0,ar=null,t!==null&&(Hn[Kn++]=qr,Hn[Kn++]=Qr,Hn[Kn++]=Ji,qr=t.id,Qr=t.overflow,Ji=e),e=u0(e,r.children),e.flags|=4096,e)}function UE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nv(t.return,e,n)}function Am(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(an(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&UE(t,n,e);else if(t.tag===19)UE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(et,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Af(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Am(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Af(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Am(e,!0,n,null,i);break;case"together":Am(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GL(t,e,n){switch(e.tag){case 3:vI(e),ya();break;case 5:Hb(e);break;case 1:_n(e.type)&&Tf(e);break;case 4:n0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(bf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?yI(t,e,n):($e(et,et.current&1),t=cs(t,e,n),t!==null?t.sibling:null);$e(et,et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,mI(t,e,n)}return cs(t,e,n)}var xI,uv,_I,EI;xI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uv=function(){};_I=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,zi(Ir.current);var i=null;switch(n){case"input":s=kg(t,s),r=kg(t,r),i=[];break;case"select":s=it({},s,{value:void 0}),r=it({},r,{value:void 0}),i=[];break;case"textarea":s=Mg(t,s),r=Mg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_f)}Lg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&He("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};EI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qL(t,e,n){var r=e.pendingProps;switch(Qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return _n(e.type)&&Ef(),Bt(e),null;case 3:return r=e.stateNode,xa(),Ge(xn),Ge(Jt),s0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(yv(ar),ar=null))),uv(t,e),Bt(e),null;case 5:r0(e);var s=zi(Cc.current);if(n=e.type,t!==null&&e.stateNode!=null)_I(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Bt(e),null}if(t=zi(Ir.current),cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sr]=e,r[Tc]=i,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(s=0;s<Ll.length;s++)He(Ll[s],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Y_(r,i),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},He("invalid",r);break;case"textarea":J_(r,i),He("invalid",r)}Lg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),s=["children",""+a]):hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":ed(r),X_(r,i,!0);break;case"textarea":ed(r),Z_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_f)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sr]=e,t[Tc]=r,xI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vg(n,r),n){case"dialog":He("cancel",t),He("close",t),s=r;break;case"iframe":case"object":case"embed":He("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ll.length;s++)He(Ll[s],t);s=r;break;case"source":He("error",t),s=r;break;case"img":case"image":case"link":He("error",t),He("load",t),s=r;break;case"details":He("toggle",t),s=r;break;case"input":Y_(t,r),s=kg(t,r),He("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=it({},r,{value:void 0}),He("invalid",t);break;case"textarea":J_(t,r),s=Mg(t,r),He("invalid",t);break;default:s=r}Lg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ZC(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&XC(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pc(t,l):typeof l=="number"&&pc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&He("scroll",t):l!=null&&Dy(t,i,l,o))}switch(n){case"input":ed(t),X_(t,r,!1);break;case"textarea":ed(t),Z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ta(t,!!r.multiple,i,!1):r.defaultValue!=null&&ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_f)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)EI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=zi(Cc.current),zi(Ir.current),cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(i=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Bt(e),null;case 13:if(Ge(et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Pn!==null&&e.mode&1&&!(e.flags&128))$b(),ya(),e.flags|=98560,i=!1;else if(i=cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Sr]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),i=!1}else ar!==null&&(yv(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?xt===0&&(xt=3):g0())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return xa(),uv(t,e),t===null&&_c(e.stateNode.containerInfo),Bt(e),null;case 10:return Zy(e.type._context),Bt(e),null;case 17:return _n(e.type)&&Ef(),Bt(e),null;case 19:if(Ge(et),i=e.memoizedState,i===null)return Bt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Sl(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Af(t),o!==null){for(e.flags|=128,Sl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(et,et.current&1|2),e.child}t=t.sibling}i.tail!==null&&ft()>Ea&&(e.flags|=128,r=!0,Sl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Af(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Qe)return Bt(e),null}else 2*ft()-i.renderingStartTime>Ea&&n!==1073741824&&(e.flags|=128,r=!0,Sl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ft(),e.sibling=null,n=et.current,$e(et,r?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return m0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function QL(t,e){switch(Qy(e),e.tag){case 1:return _n(e.type)&&Ef(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xa(),Ge(xn),Ge(Jt),s0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r0(e),null;case 13:if(Ge(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(et),null;case 4:return xa(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return m0(),null;case 24:return null;default:return null}}var fd=!1,Kt=!1,YL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function dv(t,e,n){try{n()}catch(r){ct(t,e,r)}}var BE=!1;function XL(t,e){if(qg=yf,t=Ib(),Gy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,f=0,h=t,m=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++f===r&&(l=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qg={focusedElem:t,selectionRange:n},yf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,_=x.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:ir(e.type,w),_);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(I){ct(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return x=BE,BE=!1,x}function Jl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&dv(e,n,i)}s=s.next}while(s!==r)}}function Nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TI(t){var e=t.alternate;e!==null&&(t.alternate=null,TI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[Tc],delete e[Jg],delete e[jL],delete e[DL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SI(t){return t.tag===5||t.tag===3||t.tag===4}function zE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_f));else if(r!==4&&(t=t.child,t!==null))for(hv(t,e,n),t=t.sibling;t!==null;)hv(t,e,n),t=t.sibling}function pv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pv(t,e,n),t=t.sibling;t!==null;)pv(t,e,n),t=t.sibling}var Rt=null,or=!1;function bs(t,e,n){for(n=n.child;n!==null;)CI(t,e,n),n=n.sibling}function CI(t,e,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(Th,n)}catch{}switch(n.tag){case 5:Kt||qo(n,e);case 6:var r=Rt,s=or;Rt=null,bs(t,e,n),Rt=r,or=s,Rt!==null&&(or?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(or?(t=Rt,n=n.stateNode,t.nodeType===8?Em(t.parentNode,n):t.nodeType===1&&Em(t,n),yc(t)):Em(Rt,n.stateNode));break;case 4:r=Rt,s=or,Rt=n.stateNode.containerInfo,or=!0,bs(t,e,n),Rt=r,or=s;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dv(n,e,o),s=s.next}while(s!==r)}bs(t,e,n);break;case 1:if(!Kt&&(qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ct(n,e,a)}bs(t,e,n);break;case 21:bs(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,bs(t,e,n),Kt=r):bs(t,e,n);break;default:bs(t,e,n)}}function WE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YL),e.forEach(function(r){var s=oV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,or=!1;break e;case 3:Rt=a.stateNode.containerInfo,or=!0;break e;case 4:Rt=a.stateNode.containerInfo,or=!0;break e}a=a.return}if(Rt===null)throw Error(Q(160));CI(i,o,s),Rt=null,or=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ct(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bI(e,t),e=e.sibling}function bI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),Er(t),r&4){try{Jl(3,t,t.return),Nh(3,t)}catch(w){ct(t,t.return,w)}try{Jl(5,t,t.return)}catch(w){ct(t,t.return,w)}}break;case 1:rr(e,t),Er(t),r&512&&n!==null&&qo(n,n.return);break;case 5:if(rr(e,t),Er(t),r&512&&n!==null&&qo(n,n.return),t.flags&32){var s=t.stateNode;try{pc(s,"")}catch(w){ct(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&qC(s,i),Vg(a,o);var c=Vg(a,i);for(o=0;o<l.length;o+=2){var f=l[o],h=l[o+1];f==="style"?ZC(s,h):f==="dangerouslySetInnerHTML"?XC(s,h):f==="children"?pc(s,h):Dy(s,f,h,c)}switch(a){case"input":jg(s,i);break;case"textarea":QC(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ta(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?ta(s,!!i.multiple,i.defaultValue,!0):ta(s,!!i.multiple,i.multiple?[]:"",!1))}s[Tc]=i}catch(w){ct(t,t.return,w)}}break;case 6:if(rr(e,t),Er(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ct(t,t.return,w)}}break;case 3:if(rr(e,t),Er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yc(e.containerInfo)}catch(w){ct(t,t.return,w)}break;case 4:rr(e,t),Er(t);break;case 13:rr(e,t),Er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(h0=ft())),r&4&&WE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(c=Kt)||f,rr(e,t),Kt=c):rr(e,t),Er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ie=t,f=t.child;f!==null;){for(h=ie=f;ie!==null;){switch(m=ie,g=m.child,m.tag){case 0:case 11:case 14:case 15:Jl(4,m,m.return);break;case 1:qo(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){ct(r,n,w)}}break;case 5:qo(m,m.return);break;case 22:if(m.memoizedState!==null){KE(h);continue}}g!==null?(g.return=m,ie=g):KE(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=JC("display",o))}catch(w){ct(t,t.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ct(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rr(e,t),Er(t),r&4&&WE(t);break;case 21:break;default:rr(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SI(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pc(s,""),r.flags&=-33);var i=zE(t);pv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zE(t);hv(t,a,o);break;default:throw Error(Q(161))}}catch(l){ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JL(t,e,n){ie=t,II(t)}function II(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Kt;a=fd;var c=Kt;if(fd=o,(Kt=l)&&!c)for(ie=s;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?GE(s):l!==null?(l.return=o,ie=l):GE(s);for(;i!==null;)ie=i,II(i),i=i.sibling;ie=s,fd=a,Kt=c}HE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):HE(t)}}function HE(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Nh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&AE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}AE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&yc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Kt||e.flags&512&&fv(e)}catch(m){ct(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function KE(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function GE(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nh(4,e)}catch(l){ct(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ct(e,s,l)}}var i=e.return;try{fv(e)}catch(l){ct(e,i,l)}break;case 5:var o=e.return;try{fv(e)}catch(l){ct(e,o,l)}}}catch(l){ct(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var ZL=Math.ceil,kf=ys.ReactCurrentDispatcher,d0=ys.ReactCurrentOwner,Qn=ys.ReactCurrentBatchConfig,Re=0,bt=null,vt=null,jt=0,bn=0,Qo=wi(0),xt=0,Ac=null,eo=0,kh=0,f0=0,Zl=null,vn=null,h0=0,Ea=1/0,Hr=null,jf=!1,mv=null,Ys=null,hd=!1,Bs=null,Df=0,ec=0,gv=null,Kd=-1,Gd=0;function dn(){return Re&6?ft():Kd!==-1?Kd:Kd=ft()}function Xs(t){return t.mode&1?Re&2&&jt!==0?jt&-jt:OL.transition!==null?(Gd===0&&(Gd=db()),Gd):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:yb(t.type)),t):1}function dr(t,e,n,r){if(50<ec)throw ec=0,gv=null,Error(Q(185));iu(t,n,r),(!(Re&2)||t!==bt)&&(t===bt&&(!(Re&2)&&(kh|=n),xt===4&&Os(t,jt)),En(t,r),n===1&&Re===0&&!(e.mode&1)&&(Ea=ft()+500,Ph&&xi()))}function En(t,e){var n=t.callbackNode;OO(t,e);var r=vf(t,t===bt?jt:0);if(r===0)n!==null&&nE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nE(n),e===1)t.tag===0?ML(qE.bind(null,t)):Lb(qE.bind(null,t)),NL(function(){!(Re&6)&&xi()}),n=null;else{switch(fb(r)){case 1:n=Fy;break;case 4:n=cb;break;case 16:n=gf;break;case 536870912:n=ub;break;default:n=gf}n=MI(n,PI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PI(t,e){if(Kd=-1,Gd=0,Re&6)throw Error(Q(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=vf(t,t===bt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mf(t,r);else{e=r;var s=Re;Re|=2;var i=RI();(bt!==t||jt!==e)&&(Hr=null,Ea=ft()+500,Gi(t,e));do try{nV();break}catch(a){AI(t,a)}while(1);Jy(),kf.current=i,Re=s,vt!==null?e=0:(bt=null,jt=0,e=xt)}if(e!==0){if(e===2&&(s=zg(t),s!==0&&(r=s,e=vv(t,s))),e===1)throw n=Ac,Gi(t,0),Os(t,r),En(t,ft()),n;if(e===6)Os(t,r);else{if(s=t.current.alternate,!(r&30)&&!eV(s)&&(e=Mf(t,r),e===2&&(i=zg(t),i!==0&&(r=i,e=vv(t,i))),e===1))throw n=Ac,Gi(t,0),Os(t,r),En(t,ft()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Mi(t,vn,Hr);break;case 3:if(Os(t,r),(r&130023424)===r&&(e=h0+500-ft(),10<e)){if(vf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xg(Mi.bind(null,t,vn,Hr),e);break}Mi(t,vn,Hr);break;case 4:if(Os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ur(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZL(r/1960))-r,10<r){t.timeoutHandle=Xg(Mi.bind(null,t,vn,Hr),r);break}Mi(t,vn,Hr);break;case 5:Mi(t,vn,Hr);break;default:throw Error(Q(329))}}}return En(t,ft()),t.callbackNode===n?PI.bind(null,t):null}function vv(t,e){var n=Zl;return t.current.memoizedState.isDehydrated&&(Gi(t,e).flags|=256),t=Mf(t,e),t!==2&&(e=vn,vn=n,e!==null&&yv(e)),t}function yv(t){vn===null?vn=t:vn.push.apply(vn,t)}function eV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~f0,e&=~kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function qE(t){if(Re&6)throw Error(Q(327));oa();var e=vf(t,0);if(!(e&1))return En(t,ft()),null;var n=Mf(t,e);if(t.tag!==0&&n===2){var r=zg(t);r!==0&&(e=r,n=vv(t,r))}if(n===1)throw n=Ac,Gi(t,0),Os(t,e),En(t,ft()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mi(t,vn,Hr),En(t,ft()),null}function p0(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Ea=ft()+500,Ph&&xi())}}function to(t){Bs!==null&&Bs.tag===0&&!(Re&6)&&oa();var e=Re;Re|=1;var n=Qn.transition,r=Oe;try{if(Qn.transition=null,Oe=1,t)return t()}finally{Oe=r,Qn.transition=n,Re=e,!(Re&6)&&xi()}}function m0(){bn=Qo.current,Ge(Qo)}function Gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RL(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(Qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ef();break;case 3:xa(),Ge(xn),Ge(Jt),s0();break;case 5:r0(r);break;case 4:xa();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:Zy(r.type._context);break;case 22:case 23:m0()}n=n.return}if(bt=t,vt=t=Js(t.current,null),jt=bn=e,xt=0,Ac=null,f0=kh=eo=0,vn=Zl=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Bi=null}return t}function AI(t,e){do{var n=vt;try{if(Jy(),zd.current=Nf,Rf){for(var r=rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rf=!1}if(Zi=0,St=wt=rt=null,Xl=!1,bc=0,d0.current=null,n===null||n.return===null){xt=1,Ac=e,vt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=ME(o);if(g!==null){g.flags&=-257,OE(g,o,a,i,e),g.mode&1&&DE(i,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var w=new Set;w.add(l),e.updateQueue=w}else x.add(l);break e}else{if(!(e&1)){DE(i,c,e),g0();break e}l=Error(Q(426))}}else if(Qe&&a.mode&1){var _=ME(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),OE(_,o,a,i,e),Yy(_a(l,a));break e}}i=l=_a(l,a),xt!==4&&(xt=2),Zl===null?Zl=[i]:Zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=fI(i,l,e);PE(i,E);break e;case 1:a=l;var v=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ys===null||!Ys.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=hI(i,a,e);PE(i,I);break e}}i=i.return}while(i!==null)}kI(n)}catch(R){e=R,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(1)}function RI(){var t=kf.current;return kf.current=Nf,t===null?Nf:t}function g0(){(xt===0||xt===3||xt===2)&&(xt=4),bt===null||!(eo&268435455)&&!(kh&268435455)||Os(bt,jt)}function Mf(t,e){var n=Re;Re|=2;var r=RI();(bt!==t||jt!==e)&&(Hr=null,Gi(t,e));do try{tV();break}catch(s){AI(t,s)}while(1);if(Jy(),Re=n,kf.current=r,vt!==null)throw Error(Q(261));return bt=null,jt=0,xt}function tV(){for(;vt!==null;)NI(vt)}function nV(){for(;vt!==null&&!IO();)NI(vt)}function NI(t){var e=DI(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?kI(t):vt=e,d0.current=null}function kI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QL(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,vt=null;return}}else if(n=qL(n,e,bn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);xt===0&&(xt=5)}function Mi(t,e,n){var r=Oe,s=Qn.transition;try{Qn.transition=null,Oe=1,rV(t,e,n,r)}finally{Qn.transition=s,Oe=r}return null}function rV(t,e,n,r){do oa();while(Bs!==null);if(Re&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(LO(t,i),t===bt&&(vt=bt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,MI(gf,function(){return oa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qn.transition,Qn.transition=null;var o=Oe;Oe=1;var a=Re;Re|=4,d0.current=null,XL(t,n),bI(n,t),TL(Qg),yf=!!qg,Qg=qg=null,t.current=n,JL(n),PO(),Re=a,Oe=o,Qn.transition=i}else t.current=n;if(hd&&(hd=!1,Bs=t,Df=s),i=t.pendingLanes,i===0&&(Ys=null),NO(n.stateNode),En(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jf)throw jf=!1,t=mv,mv=null,t;return Df&1&&t.tag!==0&&oa(),i=t.pendingLanes,i&1?t===gv?ec++:(ec=0,gv=t):ec=0,xi(),null}function oa(){if(Bs!==null){var t=fb(Df),e=Qn.transition,n=Oe;try{if(Qn.transition=null,Oe=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,Df=0,Re&6)throw Error(Q(331));var s=Re;for(Re|=4,ie=t.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var f=ie;switch(f.tag){case 0:case 11:case 15:Jl(8,f,i)}var h=f.child;if(h!==null)h.return=f,ie=h;else for(;ie!==null;){f=ie;var m=f.sibling,g=f.return;if(TI(f),f===c){ie=null;break}if(m!==null){m.return=g,ie=m;break}ie=g}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ie=E;break e}ie=i.return}}var v=t.current;for(ie=v;ie!==null;){o=ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ie=T;else e:for(o=v;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nh(9,a)}}catch(R){ct(a,a.return,R)}if(a===o){ie=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,ie=I;break e}ie=a.return}}if(Re=s,xi(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(Th,t)}catch{}r=!0}return r}finally{Oe=n,Qn.transition=e}}return!1}function QE(t,e,n){e=_a(n,e),e=fI(t,e,1),t=Qs(t,e,1),e=dn(),t!==null&&(iu(t,1,e),En(t,e))}function ct(t,e,n){if(t.tag===3)QE(t,t,n);else for(;e!==null;){if(e.tag===3){QE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ys===null||!Ys.has(r))){t=_a(n,t),t=hI(e,t,1),e=Qs(e,t,1),t=dn(),e!==null&&(iu(e,1,t),En(e,t));break}}e=e.return}}function sV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(jt&n)===n&&(xt===4||xt===3&&(jt&130023424)===jt&&500>ft()-h0?Gi(t,0):f0|=n),En(t,e)}function jI(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=dn();t=ls(t,e),t!==null&&(iu(t,e,n),En(t,n))}function iV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jI(t,n)}function oV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),jI(t,n)}var DI;DI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,GL(t,e,n);wn=!!(t.flags&131072)}else wn=!1,Qe&&e.flags&1048576&&Vb(e,Cf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hd(t,e),t=e.pendingProps;var s=va(e,Jt.current);ia(e,n),s=o0(null,e,r,t,s,n);var i=a0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(i=!0,Tf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,t0(e),s.updater=Rh,e.stateNode=s,s._reactInternals=e,sv(e,r,t,n),e=av(null,e,r,!0,i,n)):(e.tag=0,Qe&&i&&qy(e),an(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lV(r),t=ir(r,t),s){case 0:e=ov(null,e,r,t,n);break e;case 1:e=FE(null,e,r,t,n);break e;case 11:e=LE(null,e,r,t,n);break e;case 14:e=VE(null,e,r,ir(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),ov(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),FE(t,e,r,s,n);case 3:e:{if(vI(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Wb(t,e),Pf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_a(Error(Q(423)),e),e=$E(t,e,r,n,s);break e}else if(r!==s){s=_a(Error(Q(424)),e),e=$E(t,e,r,n,s);break e}else for(Pn=qs(e.stateNode.containerInfo.firstChild),Rn=e,Qe=!0,ar=null,n=Bb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ya(),r===s){e=cs(t,e,n);break e}an(t,e,r,n)}e=e.child}return e;case 5:return Hb(e),t===null&&tv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yg(r,s)?o=null:i!==null&&Yg(r,i)&&(e.flags|=32),gI(t,e),an(t,e,o,n),e.child;case 6:return t===null&&tv(e),null;case 13:return yI(t,e,n);case 4:return n0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wa(e,null,r,n):an(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),LE(t,e,r,s,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(bf,r._currentValue),r._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!xn.current){e=cs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=es(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),nv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}an(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ia(e,n),s=Xn(s),r=r(s),e.flags|=1,an(t,e,r,n),e.child;case 14:return r=e.type,s=ir(r,e.pendingProps),s=ir(r.type,s),VE(t,e,r,s,n);case 15:return pI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),Hd(t,e),e.tag=1,_n(r)?(t=!0,Tf(e)):t=!1,ia(e,n),dI(e,r,s),sv(e,r,s,n),av(null,e,r,!0,t,n);case 19:return wI(t,e,n);case 22:return mI(t,e,n)}throw Error(Q(156,e.tag))};function MI(t,e){return lb(t,e)}function aV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new aV(t,e,n,r)}function v0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lV(t){if(typeof t=="function")return v0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oy)return 11;if(t===Ly)return 14}return 2}function Js(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")v0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fo:return qi(n.children,s,i,e);case My:o=8,s|=8;break;case Pg:return t=Gn(12,n,e,s|2),t.elementType=Pg,t.lanes=i,t;case Ag:return t=Gn(13,n,e,s),t.elementType=Ag,t.lanes=i,t;case Rg:return t=Gn(19,n,e,s),t.elementType=Rg,t.lanes=i,t;case HC:return jh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zC:o=10;break e;case WC:o=9;break e;case Oy:o=11;break e;case Ly:o=14;break e;case ks:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qi(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function jh(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=HC,t.lanes=n,t.stateNode={isHidden:!1},t}function Rm(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function Nm(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function y0(t,e,n,r,s,i,o,a,l){return t=new cV(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t0(i),t}function uV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OI(t){if(!t)return ci;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(_n(n))return Ob(t,n,e)}return e}function LI(t,e,n,r,s,i,o,a,l){return t=y0(n,r,!0,t,s,i,o,a,l),t.context=OI(null),n=t.current,r=dn(),s=Xs(n),i=es(r,s),i.callback=e??null,Qs(n,i,s),t.current.lanes=s,iu(t,s,r),En(t,r),t}function Dh(t,e,n,r){var s=e.current,i=dn(),o=Xs(s);return n=OI(n),e.context===null?e.context=n:e.pendingContext=n,e=es(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qs(s,e,o),t!==null&&(dr(t,s,o,i),Bd(t,s,o)),o}function Of(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w0(t,e){YE(t,e),(t=t.alternate)&&YE(t,e)}function dV(){return null}var VI=typeof reportError=="function"?reportError:function(t){console.error(t)};function x0(t){this._internalRoot=t}Mh.prototype.render=x0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Dh(t,e,null,null)};Mh.prototype.unmount=x0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){Dh(null,t,null,null)}),e[as]=null}};function Mh(t){this._internalRoot=t}Mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=mb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ms.length&&e!==0&&e<Ms[n].priority;n++);Ms.splice(n,0,t),n===0&&vb(t)}};function _0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XE(){}function fV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Of(o);i.call(c)}}var o=LI(e,r,t,0,null,!1,!1,"",XE);return t._reactRootContainer=o,t[as]=o.current,_c(t.nodeType===8?t.parentNode:t),to(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Of(l);a.call(c)}}var l=y0(t,0,!1,null,null,!1,!1,"",XE);return t._reactRootContainer=l,t[as]=l.current,_c(t.nodeType===8?t.parentNode:t),to(function(){Dh(e,l,n,r)}),l}function Lh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Of(o);a.call(l)}}Dh(e,o,t,s)}else o=fV(n,e,t,s,r);return Of(o)}hb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ol(e.pendingLanes);n!==0&&($y(e,n|1),En(e,ft()),!(Re&6)&&(Ea=ft()+500,xi()))}break;case 13:to(function(){var r=ls(t,1);if(r!==null){var s=dn();dr(r,t,1,s)}}),w0(t,1)}};Uy=function(t){if(t.tag===13){var e=ls(t,134217728);if(e!==null){var n=dn();dr(e,t,134217728,n)}w0(t,134217728)}};pb=function(t){if(t.tag===13){var e=Xs(t),n=ls(t,e);if(n!==null){var r=dn();dr(n,t,e,r)}w0(t,e)}};mb=function(){return Oe};gb=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};$g=function(t,e,n){switch(e){case"input":if(jg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ih(r);if(!s)throw Error(Q(90));GC(r),jg(r,s)}}}break;case"textarea":QC(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};nb=p0;rb=to;var hV={usingClientEntryPoint:!1,Events:[au,zo,Ih,eb,tb,p0]},Cl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pV={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ob(t),t===null?null:t.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||dV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{Th=pd.inject(pV),br=pd}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hV;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_0(e))throw Error(Q(200));return uV(t,e,null,n)};Vn.createRoot=function(t,e){if(!_0(t))throw Error(Q(299));var n=!1,r="",s=VI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=y0(t,1,!1,null,null,n,!1,r,s),t[as]=e.current,_c(t.nodeType===8?t.parentNode:t),new x0(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=ob(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return to(t)};Vn.hydrate=function(t,e,n){if(!Oh(e))throw Error(Q(200));return Lh(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!_0(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=VI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LI(e,null,t,1,n??null,s,!1,i,o),t[as]=e.current,_c(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Mh(e)};Vn.render=function(t,e,n){if(!Oh(e))throw Error(Q(200));return Lh(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Oh(t))throw Error(Q(40));return t._reactRootContainer?(to(function(){Lh(null,null,t,!1,function(){t._reactRootContainer=null,t[as]=null})}),!0):!1};Vn.unstable_batchedUpdates=p0;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Lh(t,e,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function FI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FI)}catch(t){console.error(t)}}FI(),FC.exports=Vn;var _i=FC.exports;const $I=ru(_i);var JE=_i;bg.createRoot=JE.createRoot,bg.hydrateRoot=JE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const ZE="popstate";function mV(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return wv("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Lf(s)}return vV(e,n,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gV(){return Math.random().toString(36).substr(2,8)}function eT(t,e){return{usr:t.state,key:t.key,idx:e}}function wv(t,e,n,r){return n===void 0&&(n=null),Rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ka(e):e,{state:n,key:e&&e.key||r||gV()})}function Lf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vV(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=zs.Pop,l=null,c=f();c==null&&(c=0,o.replaceState(Rc({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function h(){a=zs.Pop;let _=f(),E=_==null?null:_-c;c=_,l&&l({action:a,location:w.location,delta:E})}function m(_,E){a=zs.Push;let v=wv(w.location,_,E);n&&n(v,_),c=f()+1;let T=eT(v,c),I=w.createHref(v);try{o.pushState(T,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(I)}i&&l&&l({action:a,location:w.location,delta:1})}function g(_,E){a=zs.Replace;let v=wv(w.location,_,E);n&&n(v,_),c=f();let T=eT(v,c),I=w.createHref(v);o.replaceState(T,"",I),i&&l&&l({action:a,location:w.location,delta:0})}function x(_){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof _=="string"?_:Lf(_);return v=v.replace(/ $/,"%20"),ht(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let w={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ZE,h),l=_,()=>{s.removeEventListener(ZE,h),l=null}},createHref(_){return e(s,_)},createURL:x,encodeLocation(_){let E=x(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(_){return o.go(_)}};return w}var tT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tT||(tT={}));function yV(t,e,n){return n===void 0&&(n="/"),wV(t,e,n,!1)}function wV(t,e,n,r){let s=typeof e=="string"?Ka(e):e,i=E0(s.pathname||"/",n);if(i==null)return null;let o=BI(t);xV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=NV(i);a=AV(o[l],c,r)}return a}function BI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ht(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Zs([r,l.relativePath]),f=n.concat(l);i.children&&i.children.length>0&&(ht(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),BI(i.children,e,f,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:IV(c,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zI(i.path))s(i,o,l)}),e}function zI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function xV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _V=/^:[\w-]+$/,EV=3,TV=2,SV=1,CV=10,bV=-2,nT=t=>t==="*";function IV(t,e){let n=t.split("/"),r=n.length;return n.some(nT)&&(r+=bV),e&&(r+=TV),n.filter(s=>!nT(s)).reduce((s,i)=>s+(_V.test(i)?EV:i===""?SV:CV),r)}function PV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",h=rT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=rT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Zs([i,h.pathname]),pathnameBase:MV(Zs([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Zs([i,h.pathnameBase]))}return o}function rT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RV(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,h)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let w=a[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=a[h];return g&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function RV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),UI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ka(t):t;return{pathname:n?n.startsWith("/")?n:jV(n,e):e,search:OV(r),hash:LV(s)}}function jV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function km(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T0(t,e){let n=DV(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function S0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ka(t):(s=Rc({},t),ht(!s.pathname||!s.pathname.includes("?"),km("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),km("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),km("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=kV(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const Zs=t=>t.join("/").replace(/\/\/+/g,"/"),MV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WI=["post","put","patch","delete"];new Set(WI);const FV=["get",...WI];new Set(FV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const C0=p.createContext(null),$V=p.createContext(null),Ei=p.createContext(null),Vh=p.createContext(null),Fr=p.createContext({outlet:null,matches:[],isDataRoute:!1}),HI=p.createContext(null);function UV(t,e){let{relative:n}=e===void 0?{}:e;Ga()||ht(!1);let{basename:r,navigator:s}=p.useContext(Ei),{hash:i,pathname:o,search:a}=GI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Zs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ga(){return p.useContext(Vh)!=null}function Ti(){return Ga()||ht(!1),p.useContext(Vh).location}function KI(t){p.useContext(Ei).static||p.useLayoutEffect(t)}function tn(){let{isDataRoute:t}=p.useContext(Fr);return t?r4():BV()}function BV(){Ga()||ht(!1);let t=p.useContext(C0),{basename:e,future:n,navigator:r}=p.useContext(Ei),{matches:s}=p.useContext(Fr),{pathname:i}=Ti(),o=JSON.stringify(T0(s,n.v7_relativeSplatPath)),a=p.useRef(!1);return KI(()=>{a.current=!0}),p.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=S0(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Zs([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,o,i,t])}const zV=p.createContext(null);function WV(t){let e=p.useContext(Fr).outlet;return e&&p.createElement(zV.Provider,{value:t},e)}function HV(){let{matches:t}=p.useContext(Fr),e=t[t.length-1];return e?e.params:{}}function GI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(Ei),{matches:s}=p.useContext(Fr),{pathname:i}=Ti(),o=JSON.stringify(T0(s,r.v7_relativeSplatPath));return p.useMemo(()=>S0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function KV(t,e){return GV(t,e)}function GV(t,e,n,r){Ga()||ht(!1);let{navigator:s}=p.useContext(Ei),{matches:i}=p.useContext(Fr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ti(),f;if(e){var h;let _=typeof e=="string"?Ka(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||ht(!1),f=_}else f=c;let m=f.pathname||"/",g=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=yV(t,{pathname:g}),w=JV(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Zs([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Zs([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&w?p.createElement(Vh.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zs.Pop}},w):w}function qV(){let t=n4(),e=VV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,i)}const QV=p.createElement(qV,null);class YV extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(Fr.Provider,{value:this.props.routeContext},p.createElement(HI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XV(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(C0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Fr.Provider,{value:e},r)}function JV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);f>=0||ht(!1),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:m,errors:g}=n,x=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,m)=>{let g,x=!1,w=null,_=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||QV,l&&(c<0&&m===0?(s4("route-fallback",!1),x=!0,_=null):c===m&&(x=!0,_=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),v=()=>{let T;return g?T=w:x?T=_:h.route.Component?T=p.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=f,p.createElement(XV,{match:h,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(YV,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var qI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qI||{}),Vf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vf||{});function ZV(t){let e=p.useContext(C0);return e||ht(!1),e}function e4(t){let e=p.useContext($V);return e||ht(!1),e}function t4(t){let e=p.useContext(Fr);return e||ht(!1),e}function QI(t){let e=t4(),n=e.matches[e.matches.length-1];return n.route.id||ht(!1),n.route.id}function n4(){var t;let e=p.useContext(HI),n=e4(Vf.UseRouteError),r=QI(Vf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r4(){let{router:t}=ZV(qI.UseNavigateStable),e=QI(Vf.UseNavigateStable),n=p.useRef(!1);return KI(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nc({fromRouteId:e},i)))},[t,e])}const sT={};function s4(t,e,n){!e&&!sT[t]&&(sT[t]=!0)}function i4(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function $i(t){let{to:e,replace:n,state:r,relative:s}=t;Ga()||ht(!1);let{future:i,static:o}=p.useContext(Ei),{matches:a}=p.useContext(Fr),{pathname:l}=Ti(),c=tn(),f=S0(e,T0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(f);return p.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function o4(t){return WV(t.context)}function Ze(t){ht(!1)}function a4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zs.Pop,navigator:i,static:o=!1,future:a}=t;Ga()&&ht(!1);let l=e.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:l,navigator:i,static:o,future:Nc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ka(r));let{pathname:f="/",search:h="",hash:m="",state:g=null,key:x="default"}=r,w=p.useMemo(()=>{let _=E0(f,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:g,key:x},navigationType:s}},[l,f,h,m,g,x,s]);return w==null?null:p.createElement(Ei.Provider,{value:c},p.createElement(Vh.Provider,{children:n,value:w}))}function l4(t){let{children:e,location:n}=t;return KV(xv(e),n)}new Promise(()=>{});function xv(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,s)=>{if(!p.isValidElement(r))return;let i=[...e,s];if(r.type===p.Fragment){n.push.apply(n,xv(r.props.children,i));return}r.type!==Ze&&ht(!1),!r.props.index||!r.props.children||ht(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_v.apply(this,arguments)}function c4(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function u4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d4(t,e){return t.button===0&&(!e||e==="_self")&&!u4(t)}const f4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h4="6";try{window.__reactRouterVersion=h4}catch{}const p4="startTransition",iT=Eh[p4];function m4(t){let{basename:e,children:n,future:r,window:s}=t,i=p.useRef();i.current==null&&(i.current=mV({window:s,v5Compat:!0}));let o=i.current,[a,l]=p.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=p.useCallback(h=>{c&&iT?iT(()=>l(h)):l(h)},[l,c]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.useEffect(()=>i4(r),[r]),p.createElement(a4,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const g4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qd=p.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:f,viewTransition:h}=e,m=c4(e,f4),{basename:g}=p.useContext(Ei),x,w=!1;if(typeof c=="string"&&v4.test(c)&&(x=c,g4))try{let T=new URL(window.location.href),I=c.startsWith("//")?new URL(T.protocol+c):new URL(c),R=E0(I.pathname,g);I.origin===T.origin&&R!=null?c=R+I.search+I.hash:w=!0}catch{}let _=UV(c,{relative:s}),E=y4(c,{replace:o,state:a,target:l,preventScrollReset:f,relative:s,viewTransition:h});function v(T){r&&r(T),T.defaultPrevented||E(T)}return p.createElement("a",_v({},m,{href:x||_,onClick:w||i?r:v,ref:n,target:l}))});var oT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(oT||(oT={}));var aT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(aT||(aT={}));function y4(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=tn(),c=Ti(),f=GI(t,{relative:o});return p.useCallback(h=>{if(d4(h,n)){h.preventDefault();let m=r!==void 0?r:Lf(c)===Lf(f);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,f,r,s,n,t,i,o,a])}const YI=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Fh=p.createContext({}),$h=p.createContext(null),Uh=typeof document<"u",b0=Uh?p.useLayoutEffect:p.useEffect,XI=p.createContext({strict:!1}),I0=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),w4="framerAppearId",JI="data-"+I0(w4);function x4(t,e,n,r){const{visualElement:s}=p.useContext(Fh),i=p.useContext(XI),o=p.useContext($h),a=p.useContext(YI).reducedMotion,l=p.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;p.useInsertionEffect(()=>{c&&c.update(n,o)});const f=p.useRef(!!(n[JI]&&!window.HandoffComplete));return b0(()=>{c&&(c.render(),f.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),c}function Yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _4(t,e,n){return p.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yo(n)&&(n.current=r))},[e])}function kc(t){return typeof t=="string"||Array.isArray(t)}function Bh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const P0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],A0=["initial",...P0];function zh(t){return Bh(t.animate)||A0.some(e=>kc(t[e]))}function ZI(t){return!!(zh(t)||t.variants)}function E4(t,e){if(zh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||kc(n)?n:void 0,animate:kc(r)?r:void 0}}return t.inherit!==!1?e:{}}function T4(t){const{initial:e,animate:n}=E4(t,p.useContext(Fh));return p.useMemo(()=>({initial:e,animate:n}),[lT(e),lT(n)])}function lT(t){return Array.isArray(t)?t.join(" "):t}const cT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jc={};for(const t in cT)jc[t]={isEnabled:e=>cT[t].some(n=>!!e[n])};function S4(t){for(const e in t)jc[e]={...jc[e],...t[e]}}const R0=p.createContext({}),eP=p.createContext({}),C4=Symbol.for("motionComponentSymbol");function b4({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&S4(t);function i(a,l){let c;const f={...p.useContext(YI),...a,layoutId:I4(a)},{isStatic:h}=f,m=T4(a),g=r(a,h);if(!h&&Uh){m.visualElement=x4(s,g,f,e);const x=p.useContext(eP),w=p.useContext(XI).strict;m.visualElement&&(c=m.visualElement.loadFeatures(f,w,t,x))}return p.createElement(Fh.Provider,{value:m},c&&m.visualElement?p.createElement(c,{visualElement:m.visualElement,...f}):null,n(s,a,_4(g,m.visualElement,l),g,h,m.visualElement))}const o=p.forwardRef(i);return o[C4]=s,o}function I4({layoutId:t}){const e=p.useContext(R0).id;return e&&t!==void 0?e+"-"+t:t}function P4(t){function e(r,s={}){return b4(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const A4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function N0(t){return typeof t!="string"||t.includes("-")?!1:!!(A4.indexOf(t)>-1||/[A-Z]/.test(t))}const Ff={};function R4(t){Object.assign(Ff,t)}const cu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(cu);function tP(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ff[t]||t==="opacity")}const Tn=t=>!!(t&&t.getVelocity),N4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},k4=cu.length;function j4(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<k4;o++){const a=cu[o];if(t[a]!==void 0){const l=N4[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const nP=t=>e=>typeof e=="string"&&e.startsWith(t),rP=nP("--"),Ev=nP("var(--"),D4=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,M4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ui=(t,e,n)=>Math.min(Math.max(n,t),e),mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tc={...mo,transform:t=>ui(0,1,t)},md={...mo,default:1},nc=t=>Math.round(t*1e5)/1e5,Wh=/(-)?([\d]*\.?[\d])+/g,sP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,O4=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function uu(t){return typeof t=="string"}const du=t=>({test:e=>uu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),As=du("deg"),Pr=du("%"),fe=du("px"),L4=du("vh"),V4=du("vw"),uT={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},dT={...mo,transform:Math.round},iP={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,size:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,rotate:As,rotateX:As,rotateY:As,rotateZ:As,scale:md,scaleX:md,scaleY:md,scaleZ:md,skew:As,skewX:As,skewY:As,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:tc,originX:uT,originY:uT,originZ:fe,zIndex:dT,fillOpacity:tc,strokeOpacity:tc,numOctaves:dT};function k0(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,f=!0;for(const h in e){const m=e[h];if(rP(h)){i[h]=m;continue}const g=iP[h],x=M4(m,g);if(po.has(h)){if(l=!0,o[h]=x,!f)continue;m!==(g.default||0)&&(f=!1)}else h.startsWith("origin")?(c=!0,a[h]=x):s[h]=x}if(e.transform||(l||r?s.transform=j4(t.transform,n,f,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:g=0}=a;s.transformOrigin=`${h} ${m} ${g}`}}const j0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oP(t,e,n){for(const r in e)!Tn(e[r])&&!tP(r,n)&&(t[r]=e[r])}function F4({transformTemplate:t},e,n){return p.useMemo(()=>{const r=j0();return k0(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function $4(t,e,n){const r=t.style||{},s={};return oP(s,r,t),Object.assign(s,F4(t,e,n)),t.transformValues?t.transformValues(s):s}function U4(t,e,n){const r={},s=$4(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const B4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $f(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||B4.has(t)}let aP=t=>!$f(t);function z4(t){t&&(aP=e=>e.startsWith("on")?!$f(e):t(e))}try{z4(require("@emotion/is-prop-valid").default)}catch{}function W4(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(aP(s)||n===!0&&$f(s)||!e&&!$f(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function fT(t,e,n){return typeof t=="string"?t:fe.transform(e+n*t)}function H4(t,e,n){const r=fT(e,t.x,t.width),s=fT(n,t.y,t.height);return`${r} ${s}`}const K4={offset:"stroke-dashoffset",array:"stroke-dasharray"},G4={offset:"strokeDashoffset",array:"strokeDasharray"};function q4(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?K4:G4;t[i.offset]=fe.transform(-r);const o=fe.transform(e),a=fe.transform(n);t[i.array]=`${o} ${a}`}function D0(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},f,h,m){if(k0(t,c,f,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x,dimensions:w}=t;g.transform&&(w&&(x.transform=g.transform),delete g.transform),w&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=H4(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&q4(g,o,a,l,!1)}const lP=()=>({...j0(),attrs:{}}),M0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Q4(t,e,n,r){const s=p.useMemo(()=>{const i=lP();return D0(i,e,{enableHardwareAcceleration:!1},M0(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};oP(i,t.style,t),s.style={...i,...s.style}}return s}function Y4(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(N0(n)?Q4:U4)(r,i,o,n),f={...W4(r,typeof n=="string",t),...l,ref:s},{children:h}=r,m=p.useMemo(()=>Tn(h)?h.get():h,[h]);return p.createElement(n,{...f,children:m})}}function cP(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const uP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dP(t,e,n,r){cP(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(uP.has(s)?s:I0(s),e.attrs[s])}function O0(t,e){const{style:n}=t,r={};for(const s in n)(Tn(n[s])||e.style&&Tn(e.style[s])||tP(s,t))&&(r[s]=n[s]);return r}function fP(t,e){const n=O0(t,e);for(const r in t)if(Tn(t[r])||Tn(e[r])){const s=cu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function L0(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function hP(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const Uf=t=>Array.isArray(t),X4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),J4=t=>Uf(t)?t[t.length-1]||0:t;function Yd(t){const e=Tn(t)?t.get():t;return X4(e)?e.toValue():e}function Z4({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:eF(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const pP=t=>(e,n)=>{const r=p.useContext(Fh),s=p.useContext($h),i=()=>Z4(t,e,r,s);return n?i():hP(i)};function eF(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Yd(i[m]);let{initial:o,animate:a}=t;const l=zh(t),c=ZI(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const h=f?a:o;return h&&typeof h!="boolean"&&!Bh(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const x=L0(t,g);if(!x)return;const{transitionEnd:w,transition:_,...E}=x;for(const v in E){let T=E[v];if(Array.isArray(T)){const I=f?T.length-1:0;T=T[I]}T!==null&&(s[v]=T)}for(const v in w)s[v]=w[v]}),s}const ut=t=>t;class hT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function tF(t){let e=new hT,n=new hT,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,f=!1)=>{const h=f&&s,m=h?e:n;return c&&o.add(l),m.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const f=e.order[c];f(l),o.has(f)&&(a.schedule(f),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const gd=["prepare","read","update","preRender","render","postRender"],nF=40;function rF(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=gd.reduce((h,m)=>(h[m]=tF(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,nF),1),s.timestamp=h,s.isProcessing=!0,gd.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:gd.reduce((h,m)=>{const g=i[m];return h[m]=(x,w=!1,_=!1)=>(n||l(),g.schedule(x,w,_)),h},{}),cancel:h=>gd.forEach(m=>i[m].cancel(h)),state:s,steps:i}}const{schedule:Ue,cancel:us,state:Wt,steps:jm}=rF(typeof requestAnimationFrame<"u"?requestAnimationFrame:ut,!0),sF={useVisualState:pP({scrapeMotionValuesFromProps:fP,createRenderState:lP,onMount:(t,e,{renderState:n,latestValues:r})=>{Ue.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ue.render(()=>{D0(n,r,{enableHardwareAcceleration:!1},M0(e.tagName),t.transformTemplate),dP(e,n)})}})},iF={useVisualState:pP({scrapeMotionValuesFromProps:O0,createRenderState:j0})};function oF(t,{forwardMotionProps:e=!1},n,r){return{...N0(t)?sF:iF,preloadedFeatures:n,useRender:Y4(e),createVisualElement:r,Component:t}}function Yr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const mP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Hh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const aF=t=>e=>mP(e)&&t(e,Hh(e));function ts(t,e,n,r){return Yr(t,e,aF(n),r)}const lF=(t,e)=>n=>e(t(n)),ei=(...t)=>t.reduce(lF);function gP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const pT=gP("dragHorizontal"),mT=gP("dragVertical");function vP(t){let e=!1;if(t==="y")e=mT();else if(t==="x")e=pT();else{const n=pT(),r=mT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function yP(){const t=vP(!0);return t?(t(),!1):!0}class Si{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gT(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||yP())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ue.update(()=>a[r](i,o))};return ts(t.current,n,s,{passive:!t.getProps()[r]})}class cF extends Si{mount(){this.unmount=ei(gT(this.node,!0),gT(this.node,!1))}unmount(){}}class uF extends Si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ei(Yr(this.node.current,"focus",()=>this.onFocus()),Yr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const wP=(t,e)=>e?t===e?!0:wP(t,e.parentElement):!1;function Dm(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Hh(n))}class dF extends Si{constructor(){super(...arguments),this.removeStartListeners=ut,this.removeEndListeners=ut,this.removeAccessibleListeners=ut,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=ts(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:h}=this.node.getProps();Ue.update(()=>{!h&&!wP(this.node.current,a.target)?f&&f(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=ts(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ei(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Dm("up",(l,c)=>{const{onTap:f}=this.node.getProps();f&&Ue.update(()=>f(l,c))})};this.removeEndListeners(),this.removeEndListeners=Yr(this.node.current,"keyup",o),Dm("down",(a,l)=>{this.startPress(a,l)})},n=Yr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Dm("cancel",(i,o)=>this.cancelPress(i,o))},s=Yr(this.node.current,"blur",r);this.removeAccessibleListeners=ei(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ue.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!yP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ue.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ts(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ei(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Tv=new WeakMap,Mm=new WeakMap,fF=t=>{const e=Tv.get(t.target);e&&e(t)},hF=t=>{t.forEach(fF)};function pF({root:t,...e}){const n=t||document;Mm.has(n)||Mm.set(n,{});const r=Mm.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(hF,{root:t,...e})),r[s]}function mF(t,e,n){const r=pF(e);return Tv.set(t,n),r.observe(t),()=>{Tv.delete(t),r.unobserve(t)}}const gF={some:0,all:1};class vF extends Si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:gF[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),m=c?f:h;m&&m(l)};return mF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yF(e,n))&&this.startObserver()}unmount(){}}function yF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const wF={inView:{Feature:vF},tap:{Feature:dF},focus:{Feature:uF},hover:{Feature:cF}};function xP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function xF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function _F(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Kh(t,e,n){const r=t.getProps();return L0(r,e,n!==void 0?n:r.custom,xF(t),_F(t))}let EF=ut,V0=ut;const ti=t=>t*1e3,ns=t=>t/1e3,TF={current:!1},_P=t=>Array.isArray(t)&&typeof t[0]=="number";function EP(t){return!!(!t||typeof t=="string"&&TP[t]||_P(t)||Array.isArray(t)&&t.every(EP))}const Vl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vl([0,.65,.55,1]),circOut:Vl([.55,0,1,.45]),backIn:Vl([.31,.01,.66,-.59]),backOut:Vl([.33,1.53,.69,.99])};function SP(t){if(t)return _P(t)?Vl(t):Array.isArray(t)?t.map(SP):TP[t]}function SF(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const f=SP(a);return Array.isArray(f)&&(c.easing=f),t.animate(c,{delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function CF(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const CP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bF=1e-7,IF=12;function PF(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=CP(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>bF&&++a<IF);return o}function fu(t,e,n,r){if(t===e&&n===r)return ut;const s=i=>PF(i,0,1,t,n);return i=>i===0||i===1?i:CP(s(i),e,r)}const AF=fu(.42,0,1,1),RF=fu(0,0,.58,1),bP=fu(.42,0,.58,1),NF=t=>Array.isArray(t)&&typeof t[0]!="number",IP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PP=t=>e=>1-t(1-e),F0=t=>1-Math.sin(Math.acos(t)),AP=PP(F0),kF=IP(F0),RP=fu(.33,1.53,.69,.99),$0=PP(RP),jF=IP($0),DF=t=>(t*=2)<1?.5*$0(t):.5*(2-Math.pow(2,-10*(t-1))),MF={linear:ut,easeIn:AF,easeInOut:bP,easeOut:RF,circIn:F0,circInOut:kF,circOut:AP,backIn:$0,backInOut:jF,backOut:RP,anticipate:DF},vT=t=>{if(Array.isArray(t)){V0(t.length===4);const[e,n,r,s]=t;return fu(e,n,r,s)}else if(typeof t=="string")return MF[t];return t},U0=(t,e)=>n=>!!(uu(n)&&O4.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),NP=(t,e,n)=>r=>{if(!uu(r))return r;const[s,i,o,a]=r.match(Wh);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OF=t=>ui(0,255,t),Om={...mo,transform:t=>Math.round(OF(t))},Wi={test:U0("rgb","red"),parse:NP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Om.transform(t)+", "+Om.transform(e)+", "+Om.transform(n)+", "+nc(tc.transform(r))+")"};function LF(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Sv={test:U0("#"),parse:LF,transform:Wi.transform},Xo={test:U0("hsl","hue"),parse:NP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(nc(e))+", "+Pr.transform(nc(n))+", "+nc(tc.transform(r))+")"},sn={test:t=>Wi.test(t)||Sv.test(t)||Xo.test(t),parse:t=>Wi.test(t)?Wi.parse(t):Xo.test(t)?Xo.parse(t):Sv.parse(t),transform:t=>uu(t)?t:t.hasOwnProperty("red")?Wi.transform(t):Xo.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function Lm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Lm(l,a,t+1/3),i=Lm(l,a,t),o=Lm(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Vm=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},FF=[Sv,Wi,Xo],$F=t=>FF.find(e=>e.test(t));function yT(t){const e=$F(t);let n=e.parse(t);return e===Xo&&(n=VF(n)),n}const kP=(t,e)=>{const n=yT(t),r=yT(e),s={...n};return i=>(s.red=Vm(n.red,r.red,i),s.green=Vm(n.green,r.green,i),s.blue=Vm(n.blue,r.blue,i),s.alpha=tt(n.alpha,r.alpha,i),Wi.transform(s))};function UF(t){var e,n;return isNaN(t)&&uu(t)&&(((e=t.match(Wh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(sP))===null||n===void 0?void 0:n.length)||0)>0}const jP={regex:D4,countKey:"Vars",token:"${v}",parse:ut},DP={regex:sP,countKey:"Colors",token:"${c}",parse:sn.parse},MP={regex:Wh,countKey:"Numbers",token:"${n}",parse:mo.parse};function Fm(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Bf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Fm(n,jP),Fm(n,DP),Fm(n,MP),n}function OP(t){return Bf(t).values}function LP(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Bf(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(jP.token,o[l]):l<r+n?a=a.replace(DP.token,sn.transform(o[l])):a=a.replace(MP.token,nc(o[l]));return a}}const BF=t=>typeof t=="number"?0:t;function zF(t){const e=OP(t);return LP(t)(e.map(BF))}const di={test:UF,parse:OP,createTransformer:LP,getAnimatableNone:zF},VP=(t,e)=>n=>`${n>0?e:t}`;function FP(t,e){return typeof t=="number"?n=>tt(t,e,n):sn.test(t)?kP(t,e):t.startsWith("var(")?VP(t,e):UP(t,e)}const $P=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>FP(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},WF=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=FP(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},UP=(t,e)=>{const n=di.createTransformer(e),r=Bf(t),s=Bf(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ei($P(r.values,s.values),n):VP(t,e)},Dc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},wT=(t,e)=>n=>tt(t,e,n);function HF(t){return typeof t=="number"?wT:typeof t=="string"?sn.test(t)?kP:UP:Array.isArray(t)?$P:typeof t=="object"?WF:wT}function KF(t,e,n){const r=[],s=n||HF(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ut:e;a=ei(l,a)}r.push(a)}return r}function BP(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(V0(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=KF(e,r,s),a=o.length,l=c=>{let f=0;if(a>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=Dc(t[f],t[f+1],c);return o[f](h)};return n?c=>l(ui(t[0],t[i-1],c)):l}function GF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Dc(0,e,r);t.push(tt(n,1,s))}}function qF(t){const e=[0];return GF(e,t.length-1),e}function QF(t,e){return t.map(n=>n*e)}function YF(t,e){return t.map(()=>e||bP).splice(0,t.length-1)}function zf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=NF(r)?r.map(vT):vT(r),i={done:!1,value:e[0]},o=QF(n&&n.length===e.length?n:qF(e),t),a=BP(o,e,{ease:Array.isArray(s)?s:YF(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function zP(t,e){return e?t*(1e3/e):0}const XF=5;function WP(t,e,n){const r=Math.max(e-XF,0);return zP(n-t(r),e-r)}const $m=.001,JF=.01,xT=10,ZF=.05,e$=1;function t$({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;EF(t<=ti(xT));let o=1-e;o=ui(ZF,e$,o),t=ui(JF,xT,ns(t)),o<1?(s=c=>{const f=c*o,h=f*t,m=f-n,g=Cv(c,o),x=Math.exp(-h);return $m-m/g*x},i=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),w=Cv(Math.pow(c,2),o);return(-s(c)+$m>0?-1:1)*((m-g)*x)/w}):(s=c=>{const f=Math.exp(-c*t),h=(c-n)*t+1;return-$m+f*h},i=c=>{const f=Math.exp(-c*t),h=(n-c)*(t*t);return f*h});const a=5/t,l=r$(s,i,a);if(t=ti(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const n$=12;function r$(t,e,n){let r=n;for(let s=1;s<n$;s++)r=r-t(r)/e(r);return r}function Cv(t,e){return t*Math.sqrt(1-e*e)}const s$=["duration","bounce"],i$=["stiffness","damping","mass"];function _T(t,e){return e.some(n=>t[n]!==void 0)}function o$(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!_T(t,i$)&&_T(t,s$)){const n=t$(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function HP({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:f,velocity:h,isResolvedFromDuration:m}=o$({...r,velocity:-ns(r.velocity||0)}),g=h||0,x=l/(2*Math.sqrt(a*c)),w=i-s,_=ns(Math.sqrt(a/c)),E=Math.abs(w)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let v;if(x<1){const T=Cv(_,x);v=I=>{const R=Math.exp(-x*_*I);return i-R*((g+x*_*w)/T*Math.sin(T*I)+w*Math.cos(T*I))}}else if(x===1)v=T=>i-Math.exp(-_*T)*(w+(g+_*w)*T);else{const T=_*Math.sqrt(x*x-1);v=I=>{const R=Math.exp(-x*_*I),M=Math.min(T*I,300);return i-R*((g+x*_*w)*Math.sinh(M)+T*w*Math.cosh(M))/T}}return{calculatedDuration:m&&f||null,next:T=>{const I=v(T);if(m)o.done=T>=f;else{let R=g;T!==0&&(x<1?R=WP(v,T,I):R=0);const M=Math.abs(R)<=n,b=Math.abs(i-I)<=e;o.done=M&&b}return o.value=o.done?i:I,o}}}function ET({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:f}){const h=t[0],m={done:!1,value:h},g=S=>a!==void 0&&S<a||l!==void 0&&S>l,x=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let w=n*e;const _=h+w,E=o===void 0?_:o(_);E!==_&&(w=E-h);const v=S=>-w*Math.exp(-S/r),T=S=>E+v(S),I=S=>{const A=v(S),P=T(S);m.done=Math.abs(A)<=c,m.value=m.done?E:P};let R,M;const b=S=>{g(m.value)&&(R=S,M=HP({keyframes:[m.value,x(m.value)],velocity:WP(T,S,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:f}))};return b(0),{calculatedDuration:null,next:S=>{let A=!1;return!M&&R===void 0&&(A=!0,I(S),b(S)),R!==void 0&&S>R?M.next(S-R):(!A&&I(S),m)}}}const a$=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ue.update(e,!0),stop:()=>us(e),now:()=>Wt.isProcessing?Wt.timestamp:performance.now()}},TT=2e4;function ST(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<TT;)e+=n,r=t.next(e);return e>=TT?1/0:e}const l$={decay:ET,inertia:ET,tween:zf,keyframes:zf,spring:HP};function Wf({autoplay:t=!0,delay:e=0,driver:n=a$,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:f,onUpdate:h,...m}){let g=1,x=!1,w,_;const E=()=>{_=new Promise(H=>{w=H})};E();let v;const T=l$[s]||zf;let I;T!==zf&&typeof r[0]!="number"&&(I=BP([0,100],r,{clamp:!1}),r=[0,100]);const R=T({...m,keyframes:r});let M;a==="mirror"&&(M=T({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let b="idle",S=null,A=null,P=null;R.calculatedDuration===null&&i&&(R.calculatedDuration=ST(R));const{calculatedDuration:k}=R;let D=1/0,j=1/0;k!==null&&(D=k+o,j=D*(i+1)-o);let L=0;const q=H=>{if(A===null)return;g>0&&(A=Math.min(A,H)),g<0&&(A=Math.min(H-j/g,A)),S!==null?L=S:L=Math.round(H-A)*g;const X=L-e*(g>=0?1:-1),te=g>=0?X<0:X>j;L=Math.max(X,0),b==="finished"&&S===null&&(L=j);let K=L,se=R;if(i){const pe=Math.min(L,j)/D;let ve=Math.floor(pe),de=pe%1;!de&&pe>=1&&(de=1),de===1&&ve--,ve=Math.min(ve,i+1),!!(ve%2)&&(a==="reverse"?(de=1-de,o&&(de-=o/D)):a==="mirror"&&(se=M)),K=ui(0,1,de)*D}const oe=te?{done:!1,value:r[0]}:se.next(K);I&&(oe.value=I(oe.value));let{done:Y}=oe;!te&&k!==null&&(Y=g>=0?L>=j:L<=0);const ue=S===null&&(b==="finished"||b==="running"&&Y);return h&&h(oe.value),ue&&O(),oe},$=()=>{v&&v.stop(),v=void 0},B=()=>{b="idle",$(),w(),E(),A=P=null},O=()=>{b="finished",f&&f(),$(),w()},F=()=>{if(x)return;v||(v=n(q));const H=v.now();l&&l(),S!==null?A=H-S:(!A||b==="finished")&&(A=H),b==="finished"&&E(),P=A,S=null,b="running",v.start()};t&&F();const W={then(H,X){return _.then(H,X)},get time(){return ns(L)},set time(H){H=ti(H),L=H,S!==null||!v||g===0?S=H:A=v.now()-H/g},get duration(){const H=R.calculatedDuration===null?ST(R):R.calculatedDuration;return ns(H)},get speed(){return g},set speed(H){H===g||!v||(g=H,W.time=ns(L))},get state(){return b},play:F,pause:()=>{b="paused",S=L},stop:()=>{x=!0,b!=="idle"&&(b="idle",c&&c(),B())},cancel:()=>{P!==null&&q(P),B()},complete:()=>{b="finished"},sample:H=>(A=0,q(H))};return W}function c$(t){let e;return()=>(e===void 0&&(e=t()),e)}const u$=c$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),d$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),vd=10,f$=2e4,h$=(t,e)=>e.type==="spring"||t==="backgroundColor"||!EP(e.ease);function p$(t,e,{onUpdate:n,onComplete:r,...s}){if(!(u$()&&d$.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const f=()=>{l=new Promise(T=>{a=T})};f();let{keyframes:h,duration:m=300,ease:g,times:x}=s;if(h$(e,s)){const T=Wf({...s,repeat:0,delay:0});let I={done:!1,value:h[0]};const R=[];let M=0;for(;!I.done&&M<f$;)I=T.sample(M),R.push(I.value),M+=vd;x=void 0,h=R,m=M-vd,g="linear"}const w=SF(t.owner.current,e,h,{...s,duration:m,ease:g,times:x}),_=()=>{c=!1,w.cancel()},E=()=>{c=!0,Ue.update(_),a(),f()};return w.onfinish=()=>{c||(t.set(CF(h,s)),r&&r(),E())},{then(T,I){return l.then(T,I)},attachTimeline(T){return w.timeline=T,w.onfinish=null,ut},get time(){return ns(w.currentTime||0)},set time(T){w.currentTime=ti(T)},get speed(){return w.playbackRate},set speed(T){w.playbackRate=T},get duration(){return ns(m)},play:()=>{o||(w.play(),us(_))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:T}=w;if(T){const I=Wf({...s,autoplay:!1});t.setWithVelocity(I.sample(T-vd).value,I.sample(T).value,vd)}E()},complete:()=>{c||w.finish()},cancel:E}}function m$({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ut,pause:ut,stop:ut,then:i=>(i(),Promise.resolve()),cancel:ut,complete:ut});return e?Wf({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const g$={type:"spring",stiffness:500,damping:25,restSpeed:10},v$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),y$={type:"keyframes",duration:.8},w$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},x$=(t,{keyframes:e})=>e.length>2?y$:po.has(t)?t.startsWith("scale")?v$(e[1]):g$:w$,bv=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(di.test(e)||e==="0")&&!e.startsWith("url(")),_$=new Set(["brightness","contrast","saturate","opacity"]);function E$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Wh)||[];if(!r)return t;const s=n.replace(r,"");let i=_$.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const T$=/([a-z-]*)\(.*?\)/g,Iv={...di,getAnimatableNone:t=>{const e=t.match(T$);return e?e.map(E$).join(" "):t}},S$={...iP,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:Iv,WebkitFilter:Iv},B0=t=>S$[t];function KP(t,e){let n=B0(t);return n!==Iv&&(n=di),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const GP=t=>/^0[^.\s]+$/.test(t);function C$(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||GP(t)}function b$(t,e,n,r){const s=bv(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),C$(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const f=l[c];i[f]=KP(e,a)}return i}function I$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...f}){return!!Object.keys(f).length}function z0(t,e){return t[e]||t.default||t}const P$={skipAnimations:!1},W0=(t,e,n,r={})=>s=>{const i=z0(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-ti(o);const l=b$(e,t,n,i),c=l[0],f=l[l.length-1],h=bv(t,c),m=bv(t,f);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{e.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(I$(i)||(g={...g,...x$(t,g)}),g.duration&&(g.duration=ti(g.duration)),g.repeatDelay&&(g.repeatDelay=ti(g.repeatDelay)),!h||!m||TF.current||i.type===!1||P$.skipAnimations)return m$(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=p$(e,t,g);if(x)return x}return Wf(g)};function Hf(t){return!!(Tn(t)&&t.add)}const qP=t=>/^\-?\d*\.?\d+$/.test(t);function H0(t,e){t.indexOf(e)===-1&&t.push(e)}function K0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class G0{constructor(){this.subscriptions=[]}add(e){return H0(this.subscriptions,e),()=>K0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const A$=t=>!isNaN(parseFloat(t));class R${constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Wt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ue.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ue.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=A$(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new G0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ta(t,e){return new R$(t,e)}const QP=t=>e=>e.test(t),N$={test:t=>t==="auto",parse:t=>t},YP=[mo,fe,Pr,As,V4,L4,N$],bl=t=>YP.find(QP(t)),k$=[...YP,sn,di],j$=t=>k$.find(QP(t));function D$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ta(n))}function M$(t,e){const n=Kh(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=J4(i[o]);D$(t,o,a)}}function O$(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let f=null;Array.isArray(c)&&(f=c[0]),f===null&&(f=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),f!=null&&(typeof f=="string"&&(qP(f)||GP(f))?f=parseFloat(f):!j$(f)&&di.test(c)&&(f=KP(l,c)),t.addValue(l,Ta(f,{owner:t})),n[l]===void 0&&(n[l]=f),f!==null&&t.setBaseTarget(l,f))}}function L$(t,e){return e?(e[t]||e.default||e).from:void 0}function V$(t,e,n){const r={};for(const s in t){const i=L$(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function F$({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function $$(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function XP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const m=t.getValue(h),g=a[h];if(!m||g===void 0||f&&F$(f,h))continue;const x={delay:n,elapsed:0,...z0(i||{},h)};if(window.HandoffAppearAnimations){const E=t.getProps()[JI];if(E){const v=window.HandoffAppearAnimations(E,h,m,Ue);v!==null&&(x.elapsed=v,x.isHandoff=!0)}}let w=!x.isHandoff&&!$$(m,g);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(w=!1),m.animation&&(w=!1),w)continue;m.start(W0(h,m,g,t.shouldReduceMotion&&po.has(h)?{type:!1}:x));const _=m.animation;Hf(l)&&(l.add(h),_.then(()=>l.remove(h))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&M$(t,o)}),c}function Pv(t,e,n={}){const r=Kh(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(XP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=s;return U$(t,e,c+l,f,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function U$(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(B$).forEach((c,f)=>{c.notify("AnimationStart",e),o.push(Pv(c,e,{...i,delay:n+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function B$(t,e){return t.sortNodePosition(e)}function z$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Pv(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Pv(t,e,n);else{const s=typeof e=="function"?Kh(t,e,n.custom):e;r=Promise.all(XP(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const W$=[...P0].reverse(),H$=P0.length;function K$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>z$(t,n,r)))}function G$(t){let e=K$(t);const n=Q$();let r=!0;const s=(l,c)=>{const f=Kh(t,c);if(f){const{transition:h,transitionEnd:m,...g}=f;l={...l,...g,...m}}return l};function i(l){e=l(t)}function o(l,c){const f=t.getProps(),h=t.getVariantContext(!0)||{},m=[],g=new Set;let x={},w=1/0;for(let E=0;E<H$;E++){const v=W$[E],T=n[v],I=f[v]!==void 0?f[v]:h[v],R=kc(I),M=v===c?T.isActive:null;M===!1&&(w=E);let b=I===h[v]&&I!==f[v]&&R;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),T.protectedKeys={...x},!T.isActive&&M===null||!I&&!T.prevProp||Bh(I)||typeof I=="boolean")continue;let A=q$(T.prevProp,I)||v===c&&T.isActive&&!b&&R||E>w&&R,P=!1;const k=Array.isArray(I)?I:[I];let D=k.reduce(s,{});M===!1&&(D={});const{prevResolvedValues:j={}}=T,L={...j,...D},q=$=>{A=!0,g.has($)&&(P=!0,g.delete($)),T.needsAnimating[$]=!0};for(const $ in L){const B=D[$],O=j[$];if(x.hasOwnProperty($))continue;let F=!1;Uf(B)&&Uf(O)?F=!xP(B,O):F=B!==O,F?B!==void 0?q($):g.add($):B!==void 0&&g.has($)?q($):T.protectedKeys[$]=!0}T.prevProp=I,T.prevResolvedValues=D,T.isActive&&(x={...x,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!b||P)&&m.push(...k.map($=>({animation:$,options:{type:v,...l}})))}if(g.size){const E={};g.forEach(v=>{const T=t.getBaseTarget(v);T!==void 0&&(E[v]=T)}),m.push({animation:E})}let _=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(m):Promise.resolve()}function a(l,c,f){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(l,c)}),n[l].isActive=c;const m=o(f,l);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function q$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xP(e,t):!1}function ji(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q$(){return{animate:ji(!0),whileInView:ji(),whileHover:ji(),whileTap:ji(),whileDrag:ji(),whileFocus:ji(),exit:ji()}}class Y$ extends Si{constructor(e){super(e),e.animationState||(e.animationState=G$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Bh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let X$=0;class J$ extends Si{constructor(){super(...arguments),this.id=X$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Z$={animation:{Feature:Y$},exit:{Feature:J$}},CT=(t,e)=>Math.abs(t-e);function e3(t,e){const n=CT(t.x,e.x),r=CT(t.y,e.y);return Math.sqrt(n**2+r**2)}class JP{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Bm(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=e3(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=h,{timestamp:w}=Wt;this.history.push({...x,timestamp:w});const{onStart:_,onMove:E}=this.handlers;m||(_&&_(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Um(m,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Bm(h.type==="pointercancel"?this.lastMoveEventInfo:Um(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,_),x&&x(h,_)},!mP(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Hh(e),a=Um(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Wt;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,Bm(a,this.history)),this.removeListeners=ei(ts(this.contextWindow,"pointermove",this.handlePointerMove),ts(this.contextWindow,"pointerup",this.handlePointerUp),ts(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function Um(t,e){return e?{point:e(t.point)}:t}function bT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bm({point:t},e){return{point:t,delta:bT(t,ZP(e)),offset:bT(t,t3(e)),velocity:n3(e,.1)}}function t3(t){return t[0]}function ZP(t){return t[t.length-1]}function n3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ZP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ti(e)));)n--;if(!r)return{x:0,y:0};const i=ns(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function On(t){return t.max-t.min}function Av(t,e=0,n=.01){return Math.abs(t-e)<=n}function IT(t,e,n,r=.5){t.origin=r,t.originPoint=tt(e.min,e.max,t.origin),t.scale=On(n)/On(e),(Av(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(Av(t.translate)||isNaN(t.translate))&&(t.translate=0)}function rc(t,e,n,r){IT(t.x,e.x,n.x,r?r.originX:void 0),IT(t.y,e.y,n.y,r?r.originY:void 0)}function PT(t,e,n){t.min=n.min+e.min,t.max=t.min+On(e)}function r3(t,e,n){PT(t.x,e.x,n.x),PT(t.y,e.y,n.y)}function AT(t,e,n){t.min=e.min-n.min,t.max=t.min+On(e)}function sc(t,e,n){AT(t.x,e.x,n.x),AT(t.y,e.y,n.y)}function s3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tt(n,t,r.max):Math.min(t,n)),t}function RT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function i3(t,{top:e,left:n,bottom:r,right:s}){return{x:RT(t.x,n,s),y:RT(t.y,e,r)}}function NT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function o3(t,e){return{x:NT(t.x,e.x),y:NT(t.y,e.y)}}function a3(t,e){let n=.5;const r=On(t),s=On(e);return s>r?n=Dc(e.min,e.max-r,t.min):r>s&&(n=Dc(t.min,t.max-s,e.min)),ui(0,1,n)}function l3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Rv=.35;function c3(t=Rv){return t===!1?t=0:t===!0&&(t=Rv),{x:kT(t,"left","right"),y:kT(t,"top","bottom")}}function kT(t,e,n){return{min:jT(t,e),max:jT(t,n)}}function jT(t,e){return typeof t=="number"?t:t[e]||0}const DT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jo=()=>({x:DT(),y:DT()}),MT=()=>({min:0,max:0}),gt=()=>({x:MT(),y:MT()});function zn(t){return[t("x"),t("y")]}function eA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function u3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function d3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function zm(t){return t===void 0||t===1}function Nv({scale:t,scaleX:e,scaleY:n}){return!zm(t)||!zm(e)||!zm(n)}function Oi(t){return Nv(t)||tA(t)||t.z||t.rotate||t.rotateX||t.rotateY}function tA(t){return OT(t.x)||OT(t.y)}function OT(t){return t&&t!=="0%"}function Kf(t,e,n){const r=t-n,s=e*r;return n+s}function LT(t,e,n,r,s){return s!==void 0&&(t=Kf(t,s,r)),Kf(t,n,r)+e}function kv(t,e=0,n=1,r,s){t.min=LT(t.min,e,n,r,s),t.max=LT(t.max,e,n,r,s)}function nA(t,{x:e,y:n}){kv(t.x,e.translate,e.scale,e.originPoint),kv(t.y,n.translate,n.scale,n.originPoint)}function f3(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Zo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,nA(t,o)),r&&Oi(i.latestValues)&&Zo(t,i.latestValues))}e.x=VT(e.x),e.y=VT(e.y)}function VT(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ds(t,e){t.min=t.min+e,t.max=t.max+e}function FT(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=tt(t.min,t.max,i);kv(t,e[n],e[r],o,e.scale)}const h3=["x","scaleX","originX"],p3=["y","scaleY","originY"];function Zo(t,e){FT(t.x,e,h3),FT(t.y,e,p3)}function rA(t,e){return eA(d3(t.getBoundingClientRect(),e))}function m3(t,e,n){const r=rA(t,n),{scroll:s}=e;return s&&(Ds(r.x,s.offset.x),Ds(r.y,s.offset.y)),r}const sA=({current:t})=>t?t.ownerDocument.defaultView:null,g3=new WeakMap;class v3{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Hh(f,"page").point)},i=(f,h)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vP(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(_=>{let E=this.getAxisMotionValue(_).get()||0;if(Pr.test(E)){const{projection:v}=this.visualElement;if(v&&v.layout){const T=v.layout.layoutBox[_];T&&(E=On(T)*(parseFloat(E)/100))}}this.originPoint[_]=E}),x&&Ue.update(()=>x(f,h),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(f,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:w}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:_}=h;if(g&&this.currentDirection===null){this.currentDirection=y3(_),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,_),this.updateAxis("y",h.point,_),this.visualElement.render(),w&&w(f,h)},a=(f,h)=>this.stop(f,h),l=()=>zn(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new JP(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:sA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ue.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!yd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=s3(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Yo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=i3(s.layoutBox,n):this.constraints=!1,this.elastic=c3(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&zn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=l3(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yo(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=m3(r,s.root,this.visualElement.getTransformPagePoint());let o=o3(s.layout.layoutBox,i);if(n){const a=n(u3(o));this.hasMutatedConstraints=!!a,a&&(o=eA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=zn(f=>{if(!yd(f,n,this.currentDirection))return;let h=l&&l[f]||{};o&&(h={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(f,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(W0(e,r,0,n))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:r}=this.getProps();if(!yd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-tt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=a3({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zn(o=>{if(!yd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(tt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;g3.set(this.visualElement,this);const e=this.visualElement.current,n=ts(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Yr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(zn(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Rv,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function yd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function y3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class w3 extends Si{constructor(e){super(e),this.removeGroupControls=ut,this.removeListeners=ut,this.controls=new v3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ut}unmount(){this.removeGroupControls(),this.removeListeners()}}const $T=t=>(e,n)=>{t&&Ue.update(()=>t(e,n))};class x3 extends Si{constructor(){super(...arguments),this.removePointerDownListener=ut}onPointerDown(e){this.session=new JP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:$T(e),onStart:$T(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ue.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=ts(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _3(){const t=p.useContext($h);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=p.useId();return p.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Xd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Il={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fe.test(t))t=parseFloat(t);else return t;const n=UT(t,e.target.x),r=UT(t,e.target.y);return`${n}% ${r}%`}},E3={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=di.parse(t);if(s.length>5)return r;const i=di.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=tt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class T3 extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;R4(S3),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Xd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ue.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iA(t){const[e,n]=_3(),r=p.useContext(R0);return J.createElement(T3,{...t,layoutGroup:r,switchLayoutGroup:p.useContext(eP),isPresent:e,safeToRemove:n})}const S3={borderRadius:{...Il,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Il,borderTopRightRadius:Il,borderBottomLeftRadius:Il,borderBottomRightRadius:Il,boxShadow:E3},oA=["TopLeft","TopRight","BottomLeft","BottomRight"],C3=oA.length,BT=t=>typeof t=="string"?parseFloat(t):t,zT=t=>typeof t=="number"||fe.test(t);function b3(t,e,n,r,s,i){s?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,I3(r)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,P3(r))):i&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<C3;o++){const a=`border${oA[o]}Radius`;let l=WT(e,a),c=WT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||zT(l)===zT(c)?(t[a]=Math.max(tt(BT(l),BT(c),r),0),(Pr.test(c)||Pr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,r))}function WT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const I3=aA(0,.5,AP),P3=aA(.5,.95,ut);function aA(t,e,n){return r=>r<t?0:r>e?1:n(Dc(t,e,r))}function HT(t,e){t.min=e.min,t.max=e.max}function Bn(t,e){HT(t.x,e.x),HT(t.y,e.y)}function KT(t,e,n,r,s){return t-=e,t=Kf(t,1/n,r),s!==void 0&&(t=Kf(t,1/s,r)),t}function A3(t,e=0,n=1,r=.5,s,i=t,o=t){if(Pr.test(e)&&(e=parseFloat(e),e=tt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=tt(i.min,i.max,r);t===i&&(a-=e),t.min=KT(t.min,e,n,a,s),t.max=KT(t.max,e,n,a,s)}function GT(t,e,[n,r,s],i,o){A3(t,e[n],e[r],e[s],e.scale,i,o)}const R3=["x","scaleX","originX"],N3=["y","scaleY","originY"];function qT(t,e,n,r){GT(t.x,e,R3,n?n.x:void 0,r?r.x:void 0),GT(t.y,e,N3,n?n.y:void 0,r?r.y:void 0)}function QT(t){return t.translate===0&&t.scale===1}function lA(t){return QT(t.x)&&QT(t.y)}function k3(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function cA(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function YT(t){return On(t.x)/On(t.y)}class j3{constructor(){this.members=[]}add(e){H0(this.members,e),e.scheduleRender()}remove(e){if(K0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XT(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:f}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),f&&(r+=`rotateY(${f}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const D3=(t,e)=>t.depth-e.depth;class M3{constructor(){this.children=[],this.isDirty=!1}add(e){H0(this.children,e),this.isDirty=!0}remove(e){K0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(D3),this.isDirty=!1,this.children.forEach(e)}}function O3(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(us(r),t(i-e))};return Ue.read(r,!0),()=>us(r)}function L3(t){window.MotionDebug&&window.MotionDebug.record(t)}function V3(t){return t instanceof SVGElement&&t.tagName!=="svg"}function F3(t,e,n){const r=Tn(t)?t:Ta(t);return r.start(W0("",r,e,n)),r.animation}const JT=["","X","Y","Z"],$3={visibility:"hidden"},ZT=1e3;let U3=0;const Li={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function uA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=U3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Li.totalNodes=Li.resolvedTargetDeltas=Li.recalculatedProjection=0,this.nodes.forEach(W3),this.nodes.forEach(Q3),this.nodes.forEach(Y3),this.nodes.forEach(H3),L3(Li)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new M3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new G0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=V3(o),this.instance=o;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=O3(m,250),Xd.hasAnimatedSinceResize&&(Xd.hasAnimatedSinceResize=!1,this.nodes.forEach(tS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||t5,{onLayoutAnimationStart:_,onLayoutAnimationComplete:E}=f.getProps(),v=!this.targetLayout||!cA(this.targetLayout,x)||g,T=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,T);const I={...z0(w,"layout"),onPlay:_,onComplete:E};(f.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||tS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eS);return}this.isUpdating||this.nodes.forEach(G3),this.isUpdating=!1,this.nodes.forEach(q3),this.nodes.forEach(B3),this.nodes.forEach(z3),this.clearAllSnapshots();const a=performance.now();Wt.delta=ui(0,1e3/60,a-Wt.timestamp),Wt.timestamp=a,Wt.isProcessing=!0,jm.update.process(Wt),jm.preRender.process(Wt),jm.render.process(Wt),Wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(K3),this.sharedNodes.forEach(J3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!lA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&(a||Oi(this.latestValues)||f)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),n5(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return gt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ds(a.x,l.offset.x),Ds(a.y,l.offset.y)),a}removeElementScroll(o){const a=gt();Bn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:h}=c;if(c!==this.root&&f&&h.layoutScroll){if(f.isRoot){Bn(a,o);const{scroll:m}=this.root;m&&(Ds(a.x,-m.offset.x),Ds(a.y,-m.offset.y))}Ds(a.x,f.offset.x),Ds(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const l=gt();Bn(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Zo(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Oi(f.latestValues)&&Zo(l,f.latestValues)}return Oi(this.latestValues)&&Zo(l,this.latestValues),l}removeTransform(o){const a=gt();Bn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Oi(c.latestValues))continue;Nv(c.latestValues)&&c.updateSnapshot();const f=gt(),h=c.measurePageBox();Bn(f,h),qT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Oi(this.latestValues)&&qT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Wt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),sc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gt(),this.targetWithTransforms=gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),nA(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),sc(this.relativeTargetOrigin,this.target,g.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Li.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nv(this.parent.latestValues)||tA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Wt.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Bn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;f3(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=Jo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jo(),this.projectionDeltaWithTransform=Jo());const w=this.projectionTransform;rc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=XT(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Li.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},h=Jo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=gt(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,w=g!==x,_=this.getStack(),E=!_||_.members.length<=1,v=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(e5));this.animationProgress=0;let T;this.mixTargetDelta=I=>{const R=I/1e3;nS(h.x,o.x,R),nS(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z3(this.relativeTarget,this.relativeTargetOrigin,m,R),T&&k3(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=gt()),Bn(T,this.relativeTarget)),w&&(this.animationValues=f,b3(f,c,this.latestValues,R,v,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{Xd.hasAnimatedSinceResize=!0,this.currentAnimation=F3(0,ZT,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:f}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&dA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||gt();const h=On(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=On(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Bn(a,l),Zo(a,f),rc(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new j3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let f=0;f<JT.length;f++){const h="rotate"+JT[f];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const f in c)o.setStaticValue(f,c[f]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $3;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Yd(o==null?void 0:o.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Yd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Oi(this.latestValues)&&(w.transform=f?f({},""):"none",this.hasProjected=!1),w}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=XT(this.projectionDeltaWithTransform,this.treeScale,m),f&&(c.transform=f(m,c.transform));const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in Ff){if(m[w]===void 0)continue;const{correct:_,applyTo:E}=Ff[w],v=c.transform==="none"?m[w]:_(m[w],h);if(E){const T=E.length;for(let I=0;I<T;I++)c[E[I]]=v}else c[w]=v}return this.options.layoutId&&(c.pointerEvents=h===this?Yd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(eS),this.root.sharedNodes.clear()}}}function B3(t){t.updateLayout()}function z3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?zn(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],g=On(m);m.min=r[h].min,m.max=m.min+g}):dA(i,n.layoutBox,r)&&zn(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],g=On(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Jo();rc(a,r,n.layoutBox);const l=Jo();o?rc(l,t.applyTransform(s,!0),n.measuredBox):rc(l,r,n.layoutBox);const c=!lA(a);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const x=gt();sc(x,n.layoutBox,m.layoutBox);const w=gt();sc(w,r,g.layoutBox),cA(x,w)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function W3(t){Li.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function H3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function K3(t){t.clearSnapshot()}function eS(t){t.clearMeasurements()}function G3(t){t.isLayoutDirty=!1}function q3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Q3(t){t.resolveTargetDelta()}function Y3(t){t.calcProjection()}function X3(t){t.resetRotation()}function J3(t){t.removeLeadSnapshot()}function nS(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function rS(t,e,n,r){t.min=tt(e.min,n.min,r),t.max=tt(e.max,n.max,r)}function Z3(t,e,n,r){rS(t.x,e.x,n.x,r),rS(t.y,e.y,n.y,r)}function e5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const t5={duration:.45,ease:[.4,0,.1,1]},sS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),iS=sS("applewebkit/")&&!sS("chrome/")?Math.round:ut;function oS(t){t.min=iS(t.min),t.max=iS(t.max)}function n5(t){oS(t.x),oS(t.y)}function dA(t,e,n){return t==="position"||t==="preserve-aspect"&&!Av(YT(e),YT(n),.2)}const r5=uA({attachResizeListener:(t,e)=>Yr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wm={current:void 0},fA=uA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wm.current){const t=new r5({});t.mount(window),t.setOptions({layoutScroll:!0}),Wm.current=t}return Wm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),s5={pan:{Feature:x3},drag:{Feature:w3,ProjectionNode:fA,MeasureLayout:iA}},i5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function o5(t){const e=i5.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function jv(t,e,n=1){const[r,s]=o5(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return qP(o)?parseFloat(o):o}else return Ev(s)?jv(s,e,n+1):s}function a5(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Ev(i))return;const o=jv(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Ev(i))continue;const o=jv(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const l5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),hA=t=>l5.has(t),c5=t=>Object.keys(t).some(hA),aS=t=>t===mo||t===fe,lS=(t,e)=>parseFloat(t.split(", ")[e]),cS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return lS(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?lS(i[1],t):0}},u5=new Set(["x","y","z"]),d5=cu.filter(t=>!u5.has(t));function f5(t){const e=[];return d5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Sa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:cS(4,13),y:cS(5,14)};Sa.translateX=Sa.x;Sa.translateY=Sa.y;const h5=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Sa[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const f=e.getValue(c);f&&f.jump(a[c]),t[c]=Sa[c](l,i)}),t},p5=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(hA);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let f=n[l],h=bl(f);const m=e[l];let g;if(Uf(m)){const x=m.length,w=m[0]===null?1:0;f=m[w],h=bl(f);for(let _=w;_<x&&m[_]!==null;_++)g?V0(bl(m[_])===g):g=bl(m[_])}else g=bl(m);if(h!==g)if(aS(h)&&aS(g)){const x=c.get();typeof x=="string"&&c.set(parseFloat(x)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&g===fe&&(e[l]=m.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(f===0||m===0)?f===0?c.set(g.transform(f)):e[l]=h.transform(m):(o||(i=f5(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=h5(e,t,a);return i.length&&i.forEach(([f,h])=>{t.getValue(f).set(h)}),t.render(),Uh&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function m5(t,e,n,r){return c5(e)?p5(t,e,n,r):{target:e,transitionEnd:r}}const g5=(t,e,n,r)=>{const s=a5(t,e,r);return e=s.target,r=s.transitionEnd,m5(t,e,n,r)},Dv={current:null},pA={current:!1};function v5(){if(pA.current=!0,!!Uh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dv.current=t.matches;t.addListener(e),e()}else Dv.current=!1}function y5(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Tn(i))t.addValue(s,i),Hf(r)&&r.add(s);else if(Tn(o))t.addValue(s,Ta(i,{owner:t})),Hf(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Ta(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const uS=new WeakMap,mA=Object.keys(jc),w5=mA.length,dS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],x5=A0.length;class _5{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ue.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=zh(n),this.isVariantNode=ZI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{});for(const h in f){const m=f[h];a[h]!==void 0&&Tn(m)&&(m.set(a[h],!1),Hf(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,uS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),pA.current||v5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uS.delete(this.current),this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=po.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ue.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<w5;l++){const c=mA[l],{isEnabled:f,Feature:h,ProjectionNode:m,MeasureLayout:g}=jc[c];m&&(o=m),f(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:f,dragConstraints:h,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!f||h&&Yo(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dS.length;r++){const s=dS[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=y5(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<x5;r++){const s=A0[r],i=this.props[s];(kc(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ta(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=L0(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Tn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new G0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class gA extends _5{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=V$(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){O$(this,r,o);const a=g5(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function E5(t){return window.getComputedStyle(t)}class T5 extends gA{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(po.has(n)){const r=B0(n);return r&&r.default||0}else{const r=E5(e),s=(rP(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rA(e,n)}build(e,n,r,s){k0(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return O0(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){cP(e,n,r,s)}}class S5 extends gA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const r=B0(n);return r&&r.default||0}return n=uP.has(n)?n:I0(n),e.getAttribute(n)}measureInstanceViewportBox(){return gt()}scrapeMotionValuesFromProps(e,n){return fP(e,n)}build(e,n,r,s){D0(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){dP(e,n,r,s)}mount(e){this.isSVGTag=M0(e.tagName),super.mount(e)}}const C5=(t,e)=>N0(t)?new S5(e,{enableHardwareAcceleration:!1}):new T5(e,{enableHardwareAcceleration:!0}),b5={layout:{ProjectionNode:fA,MeasureLayout:iA}},I5={...Z$,...wF,...s5,...b5},Ne=P4((t,e)=>oF(t,e,I5,C5));function vA(){const t=p.useRef(!1);return b0(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function P5(){const t=vA(),[e,n]=p.useState(0),r=p.useCallback(()=>{t.current&&n(e+1)},[e]);return[p.useCallback(()=>Ue.postRender(r),[r]),e]}class A5 extends p.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function R5({children:t,isPresent:e}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),p.createElement(A5,{isPresent:e,childRef:r,sizeRef:s},p.cloneElement(t,{ref:r}))}const Hm=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=hP(N5),l=p.useId(),c=p.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:f=>{a.set(f,!0);for(const h of a.values())if(!h)return;r&&r()},register:f=>(a.set(f,!1),()=>a.delete(f))}),i?void 0:[n]);return p.useMemo(()=>{a.forEach((f,h)=>a.set(h,!1))},[n]),p.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.createElement(R5,{isPresent:n},t)),p.createElement($h.Provider,{value:c},t)};function N5(){return new Map}function k5(t){return p.useEffect(()=>()=>t(),[])}const Vi=t=>t.key||"";function j5(t,e){t.forEach(n=>{const r=Vi(n);e.set(r,n)})}function D5(t){const e=[];return p.Children.forEach(t,n=>{p.isValidElement(n)&&e.push(n)}),e}const Ci=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=p.useContext(R0).forceRender||P5()[0],l=vA(),c=D5(t);let f=c;const h=p.useRef(new Map).current,m=p.useRef(f),g=p.useRef(new Map).current,x=p.useRef(!0);if(b0(()=>{x.current=!1,j5(c,g),m.current=f}),k5(()=>{x.current=!0,g.clear(),h.clear()}),x.current)return p.createElement(p.Fragment,null,f.map(v=>p.createElement(Hm,{key:Vi(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));f=[...f];const w=m.current.map(Vi),_=c.map(Vi),E=w.length;for(let v=0;v<E;v++){const T=w[v];_.indexOf(T)===-1&&!h.has(T)&&h.set(T,void 0)}return o==="wait"&&h.size&&(f=[]),h.forEach((v,T)=>{if(_.indexOf(T)!==-1)return;const I=g.get(T);if(!I)return;const R=w.indexOf(T);let M=v;if(!M){const b=()=>{h.delete(T);const S=Array.from(g.keys()).filter(A=>!_.includes(A));if(S.forEach(A=>g.delete(A)),m.current=c.filter(A=>{const P=Vi(A);return P===T||S.includes(P)}),!h.size){if(l.current===!1)return;a(),r&&r()}};M=p.createElement(Hm,{key:Vi(I),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:i,mode:o},I),h.set(T,M)}f.splice(R,0,M)}),f=f.map(v=>{const T=v.key;return h.has(T)?v:p.createElement(Hm,{key:Vi(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),p.createElement(p.Fragment,null,h.size?f:f.map(v=>p.cloneElement(v)))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},M5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,f=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[f],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new O5;const m=i<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const x=c<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L5=function(t){const e=yA(t);return wA.encodeByteArray(e,!0)},Gf=function(t){return L5(t).replace(/\./g,"")},xA=function(t){try{return wA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=()=>V5().__FIREBASE_DEFAULTS__,$5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},U5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xA(t[1]);return e&&JSON.parse(e)},Gh=()=>{try{return F5()||$5()||U5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_A=t=>{var e,n;return(n=(e=Gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},B5=t=>{const e=_A(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EA=()=>{var t;return(t=Gh())===null||t===void 0?void 0:t.config},TA=t=>{var e;return(e=Gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Gf(JSON.stringify(n)),Gf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function K5(){var t;const e=(t=Gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y5(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X5(){return!K5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J5(){try{return typeof indexedDB=="object"}catch{return!1}}function Z5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eU,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ws(s,a,r)}}function tU(t,e){return t.replace(nU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nU=/\{\$([^}]+)}/g;function rU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fS(i)&&fS(o)){if(!qf(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sU(t,e){const n=new iU(t,e);return n.subscribe.bind(n)}class iU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Km),s.error===void 0&&(s.error=Km),s.complete===void 0&&(s.complete=Km);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aU=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new z5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cU(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lU(t){return t===Fi?void 0:t}function cU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const dU={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},fU=Ie.INFO,hU={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},pU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=fU,this._logHandler=pU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const mU=(t,e)=>e.some(n=>t instanceof n);let hS,pS;function gU(){return hS||(hS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vU(){return pS||(pS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SA=new WeakMap,Mv=new WeakMap,CA=new WeakMap,Gm=new WeakMap,Q0=new WeakMap;function yU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ni(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SA.set(n,t)}).catch(()=>{}),Q0.set(e,t),e}function wU(t){if(Mv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mv.set(t,e)}let Ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xU(t){Ov=t(Ov)}function _U(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qm(this),e,...n);return CA.set(r,e.sort?e.sort():[e]),ni(r)}:vU().includes(t)?function(...e){return t.apply(qm(this),e),ni(SA.get(this))}:function(...e){return ni(t.apply(qm(this),e))}}function EU(t){return typeof t=="function"?_U(t):(t instanceof IDBTransaction&&wU(t),mU(t,gU())?new Proxy(t,Ov):t)}function ni(t){if(t instanceof IDBRequest)return yU(t);if(Gm.has(t))return Gm.get(t);const e=EU(t);return e!==t&&(Gm.set(t,e),Q0.set(e,t)),e}const qm=t=>Q0.get(t);function TU(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ni(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ni(o.result),l.oldVersion,l.newVersion,ni(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SU=["get","getKey","getAll","getAllKeys","count"],CU=["put","add","delete","clear"],Qm=new Map;function mS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qm.get(e))return Qm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||SU.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Qm.set(e,i),i}xU(t=>({...t,get:(e,n,r)=>mS(e,n)||t.get(e,n,r),has:(e,n)=>!!mS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lv="@firebase/app",gS="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new q0("@firebase/app"),PU="@firebase/app-compat",AU="@firebase/analytics-compat",RU="@firebase/analytics",NU="@firebase/app-check-compat",kU="@firebase/app-check",jU="@firebase/auth",DU="@firebase/auth-compat",MU="@firebase/database",OU="@firebase/data-connect",LU="@firebase/database-compat",VU="@firebase/functions",FU="@firebase/functions-compat",$U="@firebase/installations",UU="@firebase/installations-compat",BU="@firebase/messaging",zU="@firebase/messaging-compat",WU="@firebase/performance",HU="@firebase/performance-compat",KU="@firebase/remote-config",GU="@firebase/remote-config-compat",qU="@firebase/storage",QU="@firebase/storage-compat",YU="@firebase/firestore",XU="@firebase/vertexai-preview",JU="@firebase/firestore-compat",ZU="firebase",e9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="[DEFAULT]",t9={[Lv]:"fire-core",[PU]:"fire-core-compat",[RU]:"fire-analytics",[AU]:"fire-analytics-compat",[kU]:"fire-app-check",[NU]:"fire-app-check-compat",[jU]:"fire-auth",[DU]:"fire-auth-compat",[MU]:"fire-rtdb",[OU]:"fire-data-connect",[LU]:"fire-rtdb-compat",[VU]:"fire-fn",[FU]:"fire-fn-compat",[$U]:"fire-iid",[UU]:"fire-iid-compat",[BU]:"fire-fcm",[zU]:"fire-fcm-compat",[WU]:"fire-perf",[HU]:"fire-perf-compat",[KU]:"fire-rc",[GU]:"fire-rc-compat",[qU]:"fire-gcs",[QU]:"fire-gcs-compat",[YU]:"fire-fst",[JU]:"fire-fst-compat",[XU]:"fire-vertex","fire-js":"fire-js",[ZU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,n9=new Map,Fv=new Map;function vS(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ca(t){const e=t.name;if(Fv.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Fv.set(e,t);for(const n of Mc.values())vS(n,t);for(const n of n9.values())vS(n,t);return!0}function Y0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new hu("app","Firebase",r9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=e9;function X0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vv,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ri.create("bad-app-name",{appName:String(s)});if(n||(n=EA()),!n)throw ri.create("no-options");const i=Mc.get(s);if(i){if(qf(n,i.options)&&qf(r,i.config))return i;throw ri.create("duplicate-app",{appName:s})}const o=new uU(s);for(const l of Fv.values())o.addComponent(l);const a=new s9(n,r,o);return Mc.set(s,a),a}function J0(t=Vv){const e=Mc.get(t);if(!e&&t===Vv&&EA())return X0();if(!e)throw ri.create("no-app",{appName:t});return e}function bA(){return Array.from(Mc.values())}function si(t,e,n){var r;let s=(r=t9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(a.join(" "));return}Ca(new no(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9="firebase-heartbeat-database",o9=1,Oc="firebase-heartbeat-store";let Ym=null;function IA(){return Ym||(Ym=TU(i9,o9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),Ym}async function a9(t){try{const n=(await IA()).transaction(Oc),r=await n.objectStore(Oc).get(PA(t));return await n.done,r}catch(e){if(e instanceof ws)ds.warn(e.message);else{const n=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(n.message)}}}async function yS(t,e){try{const r=(await IA()).transaction(Oc,"readwrite");await r.objectStore(Oc).put(e,PA(t)),await r.done}catch(n){if(n instanceof ws)ds.warn(n.message);else{const r=ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(r.message)}}}function PA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=1024,c9=30*24*60*60*1e3;class u9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=c9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wS(),{heartbeatsToSend:r,unsentEntries:s}=d9(this._heartbeatsCache.heartbeats),i=Gf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ds.warn(n),""}}}function wS(){return new Date().toISOString().substring(0,10)}function d9(t,e=l9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),xS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J5()?Z5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xS(t){return Gf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){Ca(new no("platform-logger",e=>new bU(e),"PRIVATE")),Ca(new no("heartbeat",e=>new u9(e),"PRIVATE")),si(Lv,gS,t),si(Lv,gS,"esm2017"),si("fire-js","")}h9("");var qt=function(){return qt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qt.apply(this,arguments)};function Qa(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function AA(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function RA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p9=RA,NA=new hu("auth","Firebase",RA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new q0("@firebase/auth");function m9(t,...e){Qf.logLevel<=Ie.WARN&&Qf.warn(`Auth (${qa}): ${t}`,...e)}function Jd(t,...e){Qf.logLevel<=Ie.ERROR&&Qf.error(`Auth (${qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,...e){throw Z0(t,...e)}function Ar(t,...e){return Z0(t,...e)}function kA(t,e,n){const r=Object.assign(Object.assign({},p9()),{[e]:n});return new hu("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return kA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NA.create(t,...e)}function me(t,e,...n){if(!t)throw Z0(e,...n)}function Xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jd(e),new Error(e)}function fs(t,e){t||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g9(){return _S()==="http:"||_S()==="https:"}function _S(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g9()||q5()||"connection"in navigator)?navigator.onLine:!0}function y9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=H5()||Q5()}get(){return v9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=new mu(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xs(t,e,n,r,s={}){return DA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=pu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return G5()||(c.referrerPolicy="no-referrer"),jA.fetch()(MA(t,t.config.apiHost,n,a),c)})}async function DA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},w9),e);try{const s=new E9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wd(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kA(t,f,c);hr(t,f)}}catch(s){if(s instanceof ws)throw s;hr(t,"network-request-failed",{message:String(s)})}}async function gu(t,e,n,r,s={}){const i=await xs(t,e,n,r,s);return"mfaPendingCredential"in i&&hr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function MA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ew(t.config,s):`${t.config.apiScheme}://${s}`}function _9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),x9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ar(t,e,r);return s.customData._tokenResponse=n,s}function ES(t){return t!==void 0&&t.enterprise!==void 0}class T9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function S9(t,e){return xs(t,"GET","/v2/recaptchaConfig",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e){return xs(t,"POST","/v1/accounts:delete",e)}async function OA(t,e){return xs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b9(t,e=!1){const n=ot(t),r=await n.getIdToken(e),s=tw(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ic(Xm(s.auth_time)),issuedAtTime:ic(Xm(s.iat)),expirationTime:ic(Xm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Xm(t){return Number(t)*1e3}function tw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=xA(n);return s?JSON.parse(s):(Jd("Failed to decode base64 JWT payload"),null)}catch(s){return Jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function TS(t){const e=tw(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ws&&I9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ba(t,OA(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?LA(i.providerUserInfo):[],a=R9(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Uv(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function A9(t){const e=ot(t);await Yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function LA(t){return t.map(e=>{var{providerId:n}=e,r=Qa(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(t,e){const n=await DA(t,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=MA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k9(t,e){return xs(t,"POST","/v2/accounts:revokeToken",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=TS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await N9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new aa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Qa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ba(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b9(this,e)}reload(){return A9(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await ba(this,C9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,f;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:I,isAnonymous:R,providerData:M,stsTokenManager:b}=n;me(T&&b,e,"internal-error");const S=aa.fromJSON(this.name,b);me(typeof T=="string",e,"internal-error"),Is(h,e.name),Is(m,e.name),me(typeof I=="boolean",e,"internal-error"),me(typeof R=="boolean",e,"internal-error"),Is(g,e.name),Is(x,e.name),Is(w,e.name),Is(_,e.name),Is(E,e.name),Is(v,e.name);const A=new Jr({uid:T,auth:e,email:m,emailVerified:I,displayName:h,isAnonymous:R,photoURL:x,phoneNumber:g,tenantId:w,stsTokenManager:S,createdAt:E,lastLoginAt:v});return M&&Array.isArray(M)&&(A.providerData=M.map(P=>Object.assign({},P))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new Jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?LA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new aa;a.updateFromIdToken(r);const l=new Jr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Uv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new Map;function Zr(t){fs(t instanceof Function,"Expected a class definition");let e=SS.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VA.type="NONE";const CS=VA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new la(Zr(CS),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Zr(CS);const o=Zd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const f=await c._get(o);if(f){const h=Jr._fromJSON(e,f);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new la(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new la(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WA(e))return"Blackberry";if(HA(e))return"Webos";if($A(e))return"Safari";if((e.includes("chrome/")||UA(e))&&!e.includes("edge/"))return"Chrome";if(zA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FA(t=Zt()){return/firefox\//i.test(t)}function $A(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UA(t=Zt()){return/crios\//i.test(t)}function BA(t=Zt()){return/iemobile/i.test(t)}function zA(t=Zt()){return/android/i.test(t)}function WA(t=Zt()){return/blackberry/i.test(t)}function HA(t=Zt()){return/webos/i.test(t)}function nw(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j9(t=Zt()){var e;return nw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D9(){return Y5()&&document.documentMode===10}function KA(t=Zt()){return nw(t)||zA(t)||HA(t)||WA(t)||/windows phone/i.test(t)||BA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e=[]){let n;switch(t){case"Browser":n=bS(Zt());break;case"Worker":n=`${bS(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9(t,e={}){return xs(t,"GET","/v2/passwordPolicy",bi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=6;class V9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:L9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IS(this),this.idTokenSubscription=new IS(this),this.beforeStateQueue=new M9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OA(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Rr(this));const n=e?ot(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O9(this),n=new V9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&m9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function go(t){return ot(t)}class IS{constructor(e){this.auth=e,this.observer=null,this.addObserver=sU(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $9(t){qh=t}function qA(t){return qh.loadJS(t)}function U9(){return qh.recaptchaEnterpriseScript}function B9(){return qh.gapiScript}function z9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const W9="recaptcha-enterprise",H9="NO_RECAPTCHA";class K9{constructor(e){this.type=W9,this.auth=go(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{S9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new T9(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;ES(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(H9)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&ES(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=U9();l.length!==0&&(l+=a),qA(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function PS(t,e,n,r=!1){const s=new K9(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Bv(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await PS(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await PS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t,e){const n=Y0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(qf(i,e??{}))return s;hr(s,"already-initialized")}return n.initialize({options:e})}function q9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Q9(t,e,n){const r=go(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=QA(e),{host:o,port:a}=Y9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||X9()}function QA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y9(t){const e=QA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:AS(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:AS(o)}}}function AS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function X9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,n){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function J9(t,e){return xs(t,"POST","/v1/accounts:update",e)}async function Z9(t,e){return xs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t,e){return gu(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}async function n6(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends rw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Lc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bv(e,n,"signInWithPassword",e6);case"emailLink":return t6(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bv(e,r,"signUpPassword",Z9);case"emailLink":return n6(e,{idToken:n,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return gu(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="http://localhost";class ro extends rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Qa(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ro(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:r6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i6(t){const e=Fl($l(t)).link,n=e?Fl($l(e)).deep_link_id:null,r=Fl($l(t)).deep_link_id;return(r?Fl($l(r)).link:null)||r||n||e||t}class sw{constructor(e){var n,r,s,i,o,a;const l=Fl($l(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,h=s6((s=l.mode)!==null&&s!==void 0?s:null);me(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=i6(e);try{return new sw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return Lc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sw.parseLink(n);return me(r,"argument-error"),Lc._fromEmailAndCode(e,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends YA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends vu{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends vu{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends vu{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $s.credential(n,r)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t,e){return gu(t,"POST","/v1/accounts:signUp",bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jr._fromIdTokenResponse(e,r,s),o=RS(r);return new so({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=RS(r);return new so({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function RS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends ws{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xf.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xf(e,n,r,s)}}function XA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xf._fromErrorAndOperation(t,i,e,r):i})}async function a6(t,e,n=!1){const r=await ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return so._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(Rr(r));const s="reauthenticate";try{const i=await ba(t,XA(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=tw(i.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),so._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e,n=!1){if(lr(t.app))return Promise.reject(Rr(t));const r="signIn",s=await XA(t,r,e),i=await so._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function c6(t,e){return JA(go(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t){const e=go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u6(t,e,n){if(lr(t.app))return Promise.reject(Rr(t));const r=go(t),o=await Bv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o6).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ZA(t),l}),a=await so._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function d6(t,e,n){return lr(t.app)?Promise.reject(Rr(t)):c6(ot(t),Ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZA(t),r})}function f6(t,e){const n=ot(t);return lr(n.auth.app)?Promise.reject(Rr(n.auth)):eR(n,e,null)}function h6(t,e){return eR(ot(t),null,e)}async function eR(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await ba(t,J9(r,i));await t._updateTokensIfNecessary(o,!0)}function p6(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function m6(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function g6(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function Jm(t){return ot(t).signOut()}const Jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=1e3,y6=10;class nR extends tR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);D9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,y6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nR.type="LOCAL";const w6=nR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR extends tR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rR.type="SESSION";const sR=rR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Qh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await x6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=iw("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function E6(t){Nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function T6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function C6(){return iR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firebaseLocalStorageDb",b6=1,Zf="firebaseLocalStorage",aR="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(t,e){return t.transaction([Zf],e?"readwrite":"readonly").objectStore(Zf)}function I6(){const t=indexedDB.deleteDatabase(oR);return new yu(t).toPromise()}function zv(){const t=indexedDB.open(oR,b6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zf,{keyPath:aR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zf)?e(r):(r.close(),await I6(),e(await zv()))})})}async function NS(t,e,n){const r=Yh(t,!0).put({[aR]:e,value:n});return new yu(r).toPromise()}async function P6(t,e){const n=Yh(t,!1).get(e),r=await new yu(n).toPromise();return r===void 0?null:r.value}function kS(t,e){const n=Yh(t,!0).delete(e);return new yu(n).toPromise()}const A6=800,R6=3;class lR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(C6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await T6(),!this.activeServiceWorker)return;this.sender=new _6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zv();return await NS(e,Jf,"1"),await kS(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>NS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yh(s,!1).getAll();return new yu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lR.type="LOCAL";const N6=lR;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e){return e?Zr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j6(t){return JA(t.auth,new ow(t),t.bypassAuthState)}function D6(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),l6(n,new ow(t),t.bypassAuthState)}async function M6(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),a6(n,new ow(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j6;case"linkViaPopup":case"linkViaRedirect":return M6;case"reauthViaPopup":case"reauthViaRedirect":return D6;default:hr(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new mu(2e3,1e4);class ea extends cR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=iw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O6.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="pendingRedirect",ef=new Map;class V6 extends cR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await F6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F6(t,e){const n=B6(e),r=U6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $6(t,e){ef.set(t._key(),e)}function U6(t){return Zr(t._redirectPersistence)}function B6(t){return Zd(L6,t.config.apiKey,t.name)}async function z6(t,e,n=!1){if(lr(t.app))return Promise.reject(Rr(t));const r=go(t),s=k6(r,e),o=await new V6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=10*60*1e3;class H6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ar(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W6&&this.cachedEventUids.clear(),this.cachedEventUids.has(jS(e))}saveEventToCache(e){this.cachedEventUids.add(jS(e)),this.lastProcessedEventTime=Date.now()}}function jS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e={}){return xs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q6=/^https?/;async function Y6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G6(t);for(const n of e)try{if(X6(n))return}catch{}hr(t,"unauthorized-domain")}function X6(t){const e=$v(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Q6.test(n))return!1;if(q6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=new mu(3e4,6e4);function DS(){const t=Nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Z6(t){return new Promise((e,n)=>{var r,s,i;function o(){DS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DS(),n(Ar(t,"network-request-failed"))},timeout:J6.get()})}if(!((s=(r=Nr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Nr().gapi)===null||i===void 0)&&i.load)o();else{const a=z9("iframefcb");return Nr()[a]=()=>{gapi.load?o():n(Ar(t,"network-request-failed"))},qA(`${B9()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw tf=null,e})}let tf=null;function eB(t){return tf=tf||Z6(t),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=new mu(5e3,15e3),nB="__/auth/iframe",rB="emulator/auth/iframe",sB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oB(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ew(e,rB):`https://${t.config.authDomain}/${nB}`,r={apiKey:e.apiKey,appName:t.name,v:qa},s=iB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${pu(r).slice(1)}`}async function aB(t){const e=await eB(t),n=Nr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:oB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ar(t,"network-request-failed"),a=Nr().setTimeout(()=>{i(o)},tB.get());function l(){Nr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cB=500,uB=600,dB="_blank",fB="http://localhost";class MS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hB(t,e,n,r=cB,s=uB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},lB),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Zt().toLowerCase();n&&(a=UA(c)?dB:n),FA(c)&&(e=e||fB,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(j9(c)&&a!=="_self")return pB(e||"",a),new MS(null);const h=window.open(e||"",a,f);me(h,t,"popup-blocked");try{h.focus()}catch{}return new MS(h)}function pB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="__/auth/handler",gB="emulator/auth/handler",vB=encodeURIComponent("fac");async function OS(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qa,eventId:s};if(e instanceof YA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rU(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries(i||{}))o[f]=h}if(e instanceof vu){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),c=l?`#${vB}=${encodeURIComponent(l)}`:"";return`${yB(t)}?${pu(a).slice(1)}${c}`}function yB({config:t}){return t.emulator?ew(t,gB):`https://${t.authDomain}/${mB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="webStorageSupport";class wB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sR,this._completeRedirectFn=z6,this._overrideRedirectResult=$6}async _openPopup(e,n,r,s){var i;fs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await OS(e,n,r,$v(),s);return hB(e,o,iw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await OS(e,n,r,$v(),s);return E6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(fs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aB(e),r=new H6(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zm,{type:Zm},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Zm];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KA()||$A()||nw()}}const xB=wB;var LS="@firebase/auth",VS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TB(t){Ca(new no("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GA(t)},c=new F9(r,s,i,l);return q9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ca(new no("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(r=>new _B(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(LS,VS,EB(t)),si(LS,VS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=5*60,CB=TA("authIdTokenMaxAge")||SB;let FS=null;const bB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CB)return;const s=n==null?void 0:n.token;FS!==s&&(FS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function dR(t=J0()){const e=Y0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=G9(t,{popupRedirectResolver:xB,persistence:[N6,w6,sR]}),r=TA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bB(i.toString());m6(n,o,()=>o(n.currentUser)),p6(n,a=>o(a))}}const s=_A("auth");return s&&Q9(n,`http://${s}`),n}function IB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ar("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",IB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TB("Browser");var $S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,fR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function A(){}A.prototype=S.prototype,b.D=S.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(P,k,D){for(var j=Array(arguments.length-2),L=2;L<arguments.length;L++)j[L-2]=arguments[L];return S.prototype[k].apply(P,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)P[k]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(k=0;16>k;++k)P[k]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=b.g[0],A=b.g[1],k=b.g[2];var D=b.g[3],j=S+(D^A&(k^D))+P[0]+3614090360&4294967295;S=A+(j<<7&4294967295|j>>>25),j=D+(k^S&(A^k))+P[1]+3905402710&4294967295,D=S+(j<<12&4294967295|j>>>20),j=k+(A^D&(S^A))+P[2]+606105819&4294967295,k=D+(j<<17&4294967295|j>>>15),j=A+(S^k&(D^S))+P[3]+3250441966&4294967295,A=k+(j<<22&4294967295|j>>>10),j=S+(D^A&(k^D))+P[4]+4118548399&4294967295,S=A+(j<<7&4294967295|j>>>25),j=D+(k^S&(A^k))+P[5]+1200080426&4294967295,D=S+(j<<12&4294967295|j>>>20),j=k+(A^D&(S^A))+P[6]+2821735955&4294967295,k=D+(j<<17&4294967295|j>>>15),j=A+(S^k&(D^S))+P[7]+4249261313&4294967295,A=k+(j<<22&4294967295|j>>>10),j=S+(D^A&(k^D))+P[8]+1770035416&4294967295,S=A+(j<<7&4294967295|j>>>25),j=D+(k^S&(A^k))+P[9]+2336552879&4294967295,D=S+(j<<12&4294967295|j>>>20),j=k+(A^D&(S^A))+P[10]+4294925233&4294967295,k=D+(j<<17&4294967295|j>>>15),j=A+(S^k&(D^S))+P[11]+2304563134&4294967295,A=k+(j<<22&4294967295|j>>>10),j=S+(D^A&(k^D))+P[12]+1804603682&4294967295,S=A+(j<<7&4294967295|j>>>25),j=D+(k^S&(A^k))+P[13]+4254626195&4294967295,D=S+(j<<12&4294967295|j>>>20),j=k+(A^D&(S^A))+P[14]+2792965006&4294967295,k=D+(j<<17&4294967295|j>>>15),j=A+(S^k&(D^S))+P[15]+1236535329&4294967295,A=k+(j<<22&4294967295|j>>>10),j=S+(k^D&(A^k))+P[1]+4129170786&4294967295,S=A+(j<<5&4294967295|j>>>27),j=D+(A^k&(S^A))+P[6]+3225465664&4294967295,D=S+(j<<9&4294967295|j>>>23),j=k+(S^A&(D^S))+P[11]+643717713&4294967295,k=D+(j<<14&4294967295|j>>>18),j=A+(D^S&(k^D))+P[0]+3921069994&4294967295,A=k+(j<<20&4294967295|j>>>12),j=S+(k^D&(A^k))+P[5]+3593408605&4294967295,S=A+(j<<5&4294967295|j>>>27),j=D+(A^k&(S^A))+P[10]+38016083&4294967295,D=S+(j<<9&4294967295|j>>>23),j=k+(S^A&(D^S))+P[15]+3634488961&4294967295,k=D+(j<<14&4294967295|j>>>18),j=A+(D^S&(k^D))+P[4]+3889429448&4294967295,A=k+(j<<20&4294967295|j>>>12),j=S+(k^D&(A^k))+P[9]+568446438&4294967295,S=A+(j<<5&4294967295|j>>>27),j=D+(A^k&(S^A))+P[14]+3275163606&4294967295,D=S+(j<<9&4294967295|j>>>23),j=k+(S^A&(D^S))+P[3]+4107603335&4294967295,k=D+(j<<14&4294967295|j>>>18),j=A+(D^S&(k^D))+P[8]+1163531501&4294967295,A=k+(j<<20&4294967295|j>>>12),j=S+(k^D&(A^k))+P[13]+2850285829&4294967295,S=A+(j<<5&4294967295|j>>>27),j=D+(A^k&(S^A))+P[2]+4243563512&4294967295,D=S+(j<<9&4294967295|j>>>23),j=k+(S^A&(D^S))+P[7]+1735328473&4294967295,k=D+(j<<14&4294967295|j>>>18),j=A+(D^S&(k^D))+P[12]+2368359562&4294967295,A=k+(j<<20&4294967295|j>>>12),j=S+(A^k^D)+P[5]+4294588738&4294967295,S=A+(j<<4&4294967295|j>>>28),j=D+(S^A^k)+P[8]+2272392833&4294967295,D=S+(j<<11&4294967295|j>>>21),j=k+(D^S^A)+P[11]+1839030562&4294967295,k=D+(j<<16&4294967295|j>>>16),j=A+(k^D^S)+P[14]+4259657740&4294967295,A=k+(j<<23&4294967295|j>>>9),j=S+(A^k^D)+P[1]+2763975236&4294967295,S=A+(j<<4&4294967295|j>>>28),j=D+(S^A^k)+P[4]+1272893353&4294967295,D=S+(j<<11&4294967295|j>>>21),j=k+(D^S^A)+P[7]+4139469664&4294967295,k=D+(j<<16&4294967295|j>>>16),j=A+(k^D^S)+P[10]+3200236656&4294967295,A=k+(j<<23&4294967295|j>>>9),j=S+(A^k^D)+P[13]+681279174&4294967295,S=A+(j<<4&4294967295|j>>>28),j=D+(S^A^k)+P[0]+3936430074&4294967295,D=S+(j<<11&4294967295|j>>>21),j=k+(D^S^A)+P[3]+3572445317&4294967295,k=D+(j<<16&4294967295|j>>>16),j=A+(k^D^S)+P[6]+76029189&4294967295,A=k+(j<<23&4294967295|j>>>9),j=S+(A^k^D)+P[9]+3654602809&4294967295,S=A+(j<<4&4294967295|j>>>28),j=D+(S^A^k)+P[12]+3873151461&4294967295,D=S+(j<<11&4294967295|j>>>21),j=k+(D^S^A)+P[15]+530742520&4294967295,k=D+(j<<16&4294967295|j>>>16),j=A+(k^D^S)+P[2]+3299628645&4294967295,A=k+(j<<23&4294967295|j>>>9),j=S+(k^(A|~D))+P[0]+4096336452&4294967295,S=A+(j<<6&4294967295|j>>>26),j=D+(A^(S|~k))+P[7]+1126891415&4294967295,D=S+(j<<10&4294967295|j>>>22),j=k+(S^(D|~A))+P[14]+2878612391&4294967295,k=D+(j<<15&4294967295|j>>>17),j=A+(D^(k|~S))+P[5]+4237533241&4294967295,A=k+(j<<21&4294967295|j>>>11),j=S+(k^(A|~D))+P[12]+1700485571&4294967295,S=A+(j<<6&4294967295|j>>>26),j=D+(A^(S|~k))+P[3]+2399980690&4294967295,D=S+(j<<10&4294967295|j>>>22),j=k+(S^(D|~A))+P[10]+4293915773&4294967295,k=D+(j<<15&4294967295|j>>>17),j=A+(D^(k|~S))+P[1]+2240044497&4294967295,A=k+(j<<21&4294967295|j>>>11),j=S+(k^(A|~D))+P[8]+1873313359&4294967295,S=A+(j<<6&4294967295|j>>>26),j=D+(A^(S|~k))+P[15]+4264355552&4294967295,D=S+(j<<10&4294967295|j>>>22),j=k+(S^(D|~A))+P[6]+2734768916&4294967295,k=D+(j<<15&4294967295|j>>>17),j=A+(D^(k|~S))+P[13]+1309151649&4294967295,A=k+(j<<21&4294967295|j>>>11),j=S+(k^(A|~D))+P[4]+4149444226&4294967295,S=A+(j<<6&4294967295|j>>>26),j=D+(A^(S|~k))+P[11]+3174756917&4294967295,D=S+(j<<10&4294967295|j>>>22),j=k+(S^(D|~A))+P[2]+718787259&4294967295,k=D+(j<<15&4294967295|j>>>17),j=A+(D^(k|~S))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(k+(j<<21&4294967295|j>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var A=S-this.blockSize,P=this.B,k=this.h,D=0;D<S;){if(k==0)for(;D<=A;)s(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<S;)if(P[k++]=b.charCodeAt(D++),k==this.blockSize){s(this,P),k=0;break}}else for(;D<S;)if(P[k++]=b[D++],k==this.blockSize){s(this,P),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var A=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=A&255,A/=256;for(this.u(b),b=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)b[A++]=this.g[S]>>>P&255;return b};function i(b,S){var A=a;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=S(b)}function o(b,S){this.h=S;for(var A=[],P=!0,k=b.length-1;0<=k;k--){var D=b[k]|0;P&&D==S||(A[k]=D,P=!1)}this.g=A}var a={};function l(b){return-128<=b&&128>b?i(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return _(c(-b));for(var S=[],A=1,P=0;b>=A;P++)S[P]=b/A|0,A*=4294967296;return new o(S,0)}function f(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return _(f(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(S,8)),P=h,k=0;k<b.length;k+=8){var D=Math.min(8,b.length-k),j=parseInt(b.substring(k,k+D),S);8>D?(D=c(Math.pow(S,D)),P=P.j(D).add(c(j))):(P=P.j(A),P=P.add(c(j)))}return P}var h=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-_(this).m();for(var b=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);b+=(0<=P?P:4294967296+P)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(w(this))return"-"+_(this).toString(b);for(var S=c(Math.pow(b,6)),A=this,P="";;){var k=I(A,S).g;A=E(A,k.j(S));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=k,x(A))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function w(b){return b.h==-1}t.l=function(b){return b=E(this,b),w(b)?-1:x(b)?0:1};function _(b){for(var S=b.g.length,A=[],P=0;P<S;P++)A[P]=~b.g[P];return new o(A,~b.h).add(m)}t.abs=function(){return w(this)?_(this):this},t.add=function(b){for(var S=Math.max(this.g.length,b.g.length),A=[],P=0,k=0;k<=S;k++){var D=P+(this.i(k)&65535)+(b.i(k)&65535),j=(D>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);P=j>>>16,D&=65535,j&=65535,A[k]=j<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(b,S){return b.add(_(S))}t.j=function(b){if(x(this)||x(b))return h;if(w(this))return w(b)?_(this).j(_(b)):_(_(this).j(b));if(w(b))return _(this.j(_(b)));if(0>this.l(g)&&0>b.l(g))return c(this.m()*b.m());for(var S=this.g.length+b.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<b.g.length;k++){var D=this.i(P)>>>16,j=this.i(P)&65535,L=b.i(k)>>>16,q=b.i(k)&65535;A[2*P+2*k]+=j*q,v(A,2*P+2*k),A[2*P+2*k+1]+=D*q,v(A,2*P+2*k+1),A[2*P+2*k+1]+=j*L,v(A,2*P+2*k+1),A[2*P+2*k+2]+=D*L,v(A,2*P+2*k+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new o(A,0)};function v(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function T(b,S){this.g=b,this.h=S}function I(b,S){if(x(S))throw Error("division by zero");if(x(b))return new T(h,h);if(w(b))return S=I(_(b),S),new T(_(S.g),_(S.h));if(w(S))return S=I(b,_(S)),new T(_(S.g),S.h);if(30<b.g.length){if(w(b)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var A=m,P=S;0>=P.l(b);)A=R(A),P=R(P);var k=M(A,1),D=M(P,1);for(P=M(P,2),A=M(A,2);!x(P);){var j=D.add(P);0>=j.l(b)&&(k=k.add(A),D=j),P=M(P,1),A=M(A,1)}return S=E(b,k.j(S)),new T(k,S)}for(k=h;0<=b.l(S);){for(A=Math.max(1,Math.floor(b.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(A),j=D.j(S);w(j)||0<j.l(b);)A-=P,D=c(A),j=D.j(S);x(D)&&(D=m),k=k.add(D),b=E(b,j)}return new T(k,b)}t.A=function(b){return I(this,b).h},t.and=function(b){for(var S=Math.max(this.g.length,b.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&b.i(P);return new o(A,this.h&b.h)},t.or=function(b){for(var S=Math.max(this.g.length,b.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|b.i(P);return new o(A,this.h|b.h)},t.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^b.i(P);return new o(A,this.h^b.h)};function R(b){for(var S=b.g.length+1,A=[],P=0;P<S;P++)A[P]=b.i(P)<<1|b.i(P-1)>>>31;return new o(A,b.h)}function M(b,S){var A=S>>5;S%=32;for(var P=b.g.length-A,k=[],D=0;D<P;D++)k[D]=0<S?b.i(D+A)>>>S|b.i(D+A+1)<<32-S:b.i(D+A);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Qi=o}).apply(typeof $S<"u"?$S:typeof self<"u"?self:typeof window<"u"?window:{});var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hR,Ul,pR,nf,Wv,mR,gR,vR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,C){return d==Array.prototype||d==Object.prototype||(d[y]=C.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof xd=="object"&&xd];for(var y=0;y<d.length;++y){var C=d[y];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var C=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var V=d[N];if(!(V in C))break e;C=C[V]}d=d[d.length-1],N=C[d],y=y(N),y!=N&&y!=null&&e(C,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var C=0,N=!1,V={next:function(){if(!N&&C<d.length){var U=C++;return{value:y(U,d[U]),done:!1}}return N=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(d){return d||function(){return i(this,function(y,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function f(d,y,C){return d.call.apply(d.bind,arguments)}function h(d,y,C){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,N),d.apply(y,V)}}return function(){return d.apply(y,arguments)}}function m(d,y,C){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:h,m.apply(null,arguments)}function g(d,y){var C=Array.prototype.slice.call(arguments,1);return function(){var N=C.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function x(d,y){function C(){}C.prototype=y.prototype,d.aa=y.prototype,d.prototype=new C,d.prototype.constructor=d,d.Qb=function(N,V,U){for(var Z=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)Z[Ve-2]=arguments[Ve];return y.prototype[V].apply(N,Z)}}function w(d){const y=d.length;if(0<y){const C=Array(y);for(let N=0;N<y;N++)C[N]=d[N];return C}return[]}function _(d,y){for(let C=1;C<arguments.length;C++){const N=arguments[C];if(l(N)){const V=d.length||0,U=N.length||0;d.length=V+U;for(let Z=0;Z<U;Z++)d[V+Z]=N[Z]}else d.push(N)}}class E{constructor(y,C){this.i=y,this.j=C,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function v(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var R=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(d,y,C){for(const N in d)y.call(C,d[N],N,d)}function b(d,y){for(const C in d)y.call(void 0,d[C],C,d)}function S(d){const y={};for(const C in d)y[C]=d[C];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,y){let C,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(C in N)d[C]=N[C];for(let U=0;U<A.length;U++)C=A[U],Object.prototype.hasOwnProperty.call(N,C)&&(d[C]=N[C])}}function k(d){var y=1;d=d.split(":");const C=[];for(;0<y&&d.length;)C.push(d.shift()),y--;return d.length&&C.push(d.join(":")),C}function D(d){a.setTimeout(()=>{throw d},0)}function j(){var d=F;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class L{constructor(){this.h=this.g=null}add(y,C){const N=q.get();N.set(y,C),this.h?this.h.next=N:this.g=N,this.h=N}}var q=new E(()=>new $,d=>d.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,C){this.h=y,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let B,O=!1,F=new L,W=()=>{const d=a.Promise.resolve(void 0);B=()=>{d.then(H)}};var H=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(C){D(C)}var y=q;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}O=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};a.addEventListener("test",C,y),a.removeEventListener("test",C,y)}catch{}return d}();function se(d,y){if(te.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var C=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(R){e:{try{I(y.nodeName);var V=!0;break e}catch{}V=!1}V||(y=null)}}else C=="mouseover"?y=d.fromElement:C=="mouseout"&&(y=d.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&se.aa.h.call(this)}}x(se,te);var oe={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),ue=0;function pe(d,y,C,N,V){this.listener=d,this.proxy=null,this.src=y,this.type=C,this.capture=!!N,this.ha=V,this.key=++ue,this.da=this.fa=!1}function ve(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,y,C,N,V){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var Z=Be(d,y,N,V);return-1<Z?(y=d[Z],C||(y.fa=!1)):(y=new pe(y,this.src,U,!!N,V),y.fa=C,d.push(y)),y};function Te(d,y){var C=y.type;if(C in d.g){var N=d.g[C],V=Array.prototype.indexOf.call(N,y,void 0),U;(U=0<=V)&&Array.prototype.splice.call(N,V,1),U&&(ve(y),d.g[C].length==0&&(delete d.g[C],d.h--))}}function Be(d,y,C,N){for(var V=0;V<d.length;++V){var U=d[V];if(!U.da&&U.listener==y&&U.capture==!!C&&U.ha==N)return V}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),It={};function Et(d,y,C,N,V){if(N&&N.once)return Ur(d,y,C,N,V);if(Array.isArray(y)){for(var U=0;U<y.length;U++)Et(d,y[U],C,N,V);return null}return C=zp(C),d&&d[Y]?d.K(y,C,c(N)?!!N.capture:!!N,V):_r(d,y,C,!1,N,V)}function _r(d,y,C,N,V,U){if(!y)throw Error("Invalid event type");var Z=c(V)?!!V.capture:!!V,Ve=Up(d);if(Ve||(d[qe]=Ve=new de(d)),C=Ve.add(y,C,N,Z,U),C.proxy)return C;if(N=sl(),C.proxy=N,N.src=d,N.listener=C,d.addEventListener)K||(V=Z),V===void 0&&(V=!1),d.addEventListener(y.toString(),N,V);else if(d.attachEvent)d.attachEvent(qx(y.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return C}function sl(){function d(C){return y.call(d.src,d.listener,C)}const y=pM;return d}function Ur(d,y,C,N,V){if(Array.isArray(y)){for(var U=0;U<y.length;U++)Ur(d,y[U],C,N,V);return null}return C=zp(C),d&&d[Y]?d.L(y,C,c(N)?!!N.capture:!!N,V):_r(d,y,C,!0,N,V)}function Mu(d,y,C,N,V){if(Array.isArray(y))for(var U=0;U<y.length;U++)Mu(d,y[U],C,N,V);else N=c(N)?!!N.capture:!!N,C=zp(C),d&&d[Y]?(d=d.i,y=String(y).toString(),y in d.g&&(U=d.g[y],C=Be(U,C,N,V),-1<C&&(ve(U[C]),Array.prototype.splice.call(U,C,1),U.length==0&&(delete d.g[y],d.h--)))):d&&(d=Up(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Be(y,C,N,V)),(C=-1<d?y[d]:null)&&Es(C))}function Es(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Y])Te(y.i,d);else{var C=d.type,N=d.proxy;y.removeEventListener?y.removeEventListener(C,N,d.capture):y.detachEvent?y.detachEvent(qx(C),N):y.addListener&&y.removeListener&&y.removeListener(N),(C=Up(y))?(Te(C,d),C.h==0&&(C.src=null,y[qe]=null)):ve(d)}}}function qx(d){return d in It?It[d]:It[d]="on"+d}function pM(d,y){if(d.da)d=!0;else{y=new se(y,this);var C=d.listener,N=d.ha||d.src;d.fa&&Es(d),d=C.call(N,y)}return d}function Up(d){return d=d[qe],d instanceof de?d:null}var Bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function zp(d){return typeof d=="function"?d:(d[Bp]||(d[Bp]=function(y){return d.handleEvent(y)}),d[Bp])}function Vt(){X.call(this),this.i=new de(this),this.M=this,this.F=null}x(Vt,X),Vt.prototype[Y]=!0,Vt.prototype.removeEventListener=function(d,y,C,N){Mu(this,d,y,C,N)};function nn(d,y){var C,N=d.F;if(N)for(C=[];N;N=N.F)C.push(N);if(d=d.M,N=y.type||y,typeof y=="string")y=new te(y,d);else if(y instanceof te)y.target=y.target||d;else{var V=y;y=new te(N,d),P(y,V)}if(V=!0,C)for(var U=C.length-1;0<=U;U--){var Z=y.g=C[U];V=Ou(Z,N,!0,y)&&V}if(Z=y.g=d,V=Ou(Z,N,!0,y)&&V,V=Ou(Z,N,!1,y)&&V,C)for(U=0;U<C.length;U++)Z=y.g=C[U],V=Ou(Z,N,!1,y)&&V}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var C=d.g[y],N=0;N<C.length;N++)ve(C[N]);delete d.g[y],d.h--}}this.F=null},Vt.prototype.K=function(d,y,C,N){return this.i.add(String(d),y,!1,C,N)},Vt.prototype.L=function(d,y,C,N){return this.i.add(String(d),y,!0,C,N)};function Ou(d,y,C,N){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var V=!0,U=0;U<y.length;++U){var Z=y[U];if(Z&&!Z.da&&Z.capture==C){var Ve=Z.listener,Pt=Z.ha||Z.src;Z.fa&&Te(d.i,Z),V=Ve.call(Pt,N)!==!1&&V}}return V&&!N.defaultPrevented}function Qx(d,y,C){if(typeof d=="function")C&&(d=m(d,C));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function Yx(d){d.g=Qx(()=>{d.g=null,d.i&&(d.i=!1,Yx(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class mM extends X{constructor(y,C){super(),this.m=y,this.l=C,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Yx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function il(d){X.call(this),this.h=d,this.g={}}x(il,X);var Xx=[];function Jx(d){M(d.g,function(y,C){this.g.hasOwnProperty(C)&&Es(y)},d),d.g={}}il.prototype.N=function(){il.aa.N.call(this),Jx(this)},il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wp=a.JSON.stringify,gM=a.JSON.parse,vM=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Hp(){}Hp.prototype.h=null;function Zx(d){return d.h||(d.h=d.i())}function e_(){}var ol={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kp(){te.call(this,"d")}x(Kp,te);function Gp(){te.call(this,"c")}x(Gp,te);var Ai={},t_=null;function Lu(){return t_=t_||new Vt}Ai.La="serverreachability";function n_(d){te.call(this,Ai.La,d)}x(n_,te);function al(d){const y=Lu();nn(y,new n_(y))}Ai.STAT_EVENT="statevent";function r_(d,y){te.call(this,Ai.STAT_EVENT,d),this.stat=y}x(r_,te);function rn(d){const y=Lu();nn(y,new r_(y,d))}Ai.Ma="timingevent";function s_(d,y){te.call(this,Ai.Ma,d),this.size=y}x(s_,te);function ll(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function cl(){this.g=!0}cl.prototype.xa=function(){this.g=!1};function yM(d,y,C,N,V,U){d.info(function(){if(d.g)if(U)for(var Z="",Ve=U.split("&"),Pt=0;Pt<Ve.length;Pt++){var ke=Ve[Pt].split("=");if(1<ke.length){var Ft=ke[0];ke=ke[1];var $t=Ft.split("_");Z=2<=$t.length&&$t[1]=="type"?Z+(Ft+"="+ke+"&"):Z+(Ft+"=redacted&")}}else Z=null;else Z=U;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+y+`
`+C+`
`+Z})}function wM(d,y,C,N,V,U,Z){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+y+`
`+C+`
`+U+" "+Z})}function So(d,y,C,N){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+_M(d,C)+(N?" "+N:"")})}function xM(d,y){d.info(function(){return"TIMEOUT: "+y})}cl.prototype.info=function(){};function _M(d,y){if(!d.g)return y;if(!y)return null;try{var C=JSON.parse(y);if(C){for(d=0;d<C.length;d++)if(Array.isArray(C[d])){var N=C[d];if(!(2>N.length)){var V=N[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Z=1;Z<V.length;Z++)V[Z]=""}}}}return Wp(C)}catch{return y}}var Vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},i_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qp;function Fu(){}x(Fu,Hp),Fu.prototype.g=function(){return new XMLHttpRequest},Fu.prototype.i=function(){return{}},qp=new Fu;function Ts(d,y,C,N){this.j=d,this.i=y,this.l=C,this.R=N||1,this.U=new il(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new o_}function o_(){this.i=null,this.g="",this.h=!1}var a_={},Qp={};function Yp(d,y,C){d.L=1,d.v=zu(Br(y)),d.m=C,d.P=!0,l_(d,null)}function l_(d,y){d.F=Date.now(),$u(d),d.A=Br(d.v);var C=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),E_(C.i,"t",N),d.C=0,C=d.j.J,d.h=new o_,d.g=$_(d.j,C?y:null,!d.m),0<d.O&&(d.M=new mM(m(d.Y,d,d.g),d.O)),y=d.U,C=d.g,N=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(Xx[0]=V.toString()),V=Xx);for(var U=0;U<V.length;U++){var Z=Et(C,V[U],N||y.handleEvent,!1,y.h||y);if(!Z)break;y.g[Z.key]=Z}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),al(),yM(d.i,d.u,d.A,d.l,d.R,d.m)}Ts.prototype.ca=function(d){d=d.target;const y=this.M;y&&zr(d)==3?y.j():this.Y(d)},Ts.prototype.Y=function(d){try{if(d==this.g)e:{const $t=zr(this.g);var y=this.g.Ba();const Io=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||A_(this.g)))){this.J||$t!=4||y==7||(y==8||0>=Io?al(3):al(2)),Xp(this);var C=this.g.Z();this.X=C;t:if(c_(this)){var N=A_(this.g);d="";var V=N.length,U=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ul(this);var Z="";break t}this.h.i=new a.TextDecoder}for(y=0;y<V;y++)this.h.h=!0,d+=this.h.i.decode(N[y],{stream:!(U&&y==V-1)});N.length=0,this.h.g+=d,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=C==200,wM(this.i,this.u,this.A,this.l,this.R,$t,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Pt=this.g;if((Ve=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ve)){var ke=Ve;break t}}ke=null}if(C=ke)So(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jp(this,C);else{this.o=!1,this.s=3,rn(12),Ri(this),ul(this);break e}}if(this.P){C=!0;let nr;for(;!this.J&&this.C<Z.length;)if(nr=EM(this,Z),nr==Qp){$t==4&&(this.s=4,rn(14),C=!1),So(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==a_){this.s=4,rn(15),So(this.i,this.l,Z,"[Invalid Chunk]"),C=!1;break}else So(this.i,this.l,nr,null),Jp(this,nr);if(c_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||Z.length!=0||this.h.h||(this.s=1,rn(16),C=!1),this.o=this.o&&C,!C)So(this.i,this.l,Z,"[Invalid Chunked Response]"),Ri(this),ul(this);else if(0<Z.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),sm(Ft),Ft.M=!0,rn(11))}}else So(this.i,this.l,Z,null),Jp(this,Z);$t==4&&Ri(this),this.o&&!this.J&&($t==4?O_(this.j,this):(this.o=!1,$u(this)))}else FM(this.g),C==400&&0<Z.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),Ri(this),ul(this)}}}catch{}finally{}};function c_(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function EM(d,y){var C=d.C,N=y.indexOf(`
`,C);return N==-1?Qp:(C=Number(y.substring(C,N)),isNaN(C)?a_:(N+=1,N+C>y.length?Qp:(y=y.slice(N,N+C),d.C=N+C,y)))}Ts.prototype.cancel=function(){this.J=!0,Ri(this)};function $u(d){d.S=Date.now()+d.I,u_(d,d.I)}function u_(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ll(m(d.ba,d),y)}function Xp(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ts.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(xM(this.i,this.A),this.L!=2&&(al(),rn(17)),Ri(this),this.s=2,ul(this)):u_(this,this.S-d)};function ul(d){d.j.G==0||d.J||O_(d.j,d)}function Ri(d){Xp(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Jx(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Jp(d,y){try{var C=d.j;if(C.G!=0&&(C.g==d||Zp(C.h,d))){if(!d.K&&Zp(C.h,d)&&C.G==3){try{var N=C.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<d.F)Qu(C),Gu(C);else break e;rm(C),rn(18)}}else C.za=V[1],0<C.za-C.T&&37500>V[2]&&C.F&&C.v==0&&!C.C&&(C.C=ll(m(C.Za,C),6e3));if(1>=h_(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ki(C,11)}else if((d.K||C.g==d)&&Qu(C),!v(y))for(V=C.Da.g.parse(y),y=0;y<V.length;y++){let ke=V[y];if(C.T=ke[0],ke=ke[1],C.G==2)if(ke[0]=="c"){C.K=ke[1],C.ia=ke[2];const Ft=ke[3];Ft!=null&&(C.la=Ft,C.j.info("VER="+C.la));const $t=ke[4];$t!=null&&(C.Aa=$t,C.j.info("SVER="+C.Aa));const Io=ke[5];Io!=null&&typeof Io=="number"&&0<Io&&(N=1.5*Io,C.L=N,C.j.info("backChannelRequestTimeoutMs_="+N)),N=C;const nr=d.g;if(nr){const Xu=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var U=N.h;U.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(em(U,U.h),U.h=null))}if(N.D){const im=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;im&&(N.ya=im,ze(N.I,N.D,im))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-d.F,C.j.info("Handshake RTT: "+C.R+"ms")),N=C;var Z=d;if(N.qa=F_(N,N.J?N.ia:null,N.W),Z.K){p_(N.h,Z);var Ve=Z,Pt=N.L;Pt&&(Ve.I=Pt),Ve.B&&(Xp(Ve),$u(Ve)),N.g=Z}else D_(N);0<C.i.length&&qu(C)}else ke[0]!="stop"&&ke[0]!="close"||ki(C,7);else C.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?ki(C,7):nm(C):ke[0]!="noop"&&C.l&&C.l.ta(ke),C.v=0)}}al(4)}catch{}}var TM=class{constructor(d,y){this.g=d,this.map=y}};function d_(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function f_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function h_(d){return d.h?1:d.g?d.g.size:0}function Zp(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function em(d,y){d.g?d.g.add(y):d.h=y}function p_(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}d_.prototype.cancel=function(){if(this.i=m_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function m_(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const C of d.g.values())y=y.concat(C.D);return y}return w(d.i)}function SM(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],C=d.length,N=0;N<C;N++)y.push(d[N]);return y}y=[],C=0;for(N in d)y[C++]=d[N];return y}function CM(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var C=0;C<d;C++)y.push(C);return y}y=[],C=0;for(const N in d)y[C++]=N;return y}}}function g_(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var C=CM(d),N=SM(d),V=N.length,U=0;U<V;U++)y.call(void 0,N[U],C&&C[U],d)}var v_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bM(d,y){if(d){d=d.split("&");for(var C=0;C<d.length;C++){var N=d[C].indexOf("="),V=null;if(0<=N){var U=d[C].substring(0,N);V=d[C].substring(N+1)}else U=d[C];y(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ni(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ni){this.h=d.h,Uu(this,d.j),this.o=d.o,this.g=d.g,Bu(this,d.s),this.l=d.l;var y=d.i,C=new hl;C.i=y.i,y.g&&(C.g=new Map(y.g),C.h=y.h),y_(this,C),this.m=d.m}else d&&(y=String(d).match(v_))?(this.h=!1,Uu(this,y[1]||"",!0),this.o=dl(y[2]||""),this.g=dl(y[3]||"",!0),Bu(this,y[4]),this.l=dl(y[5]||"",!0),y_(this,y[6]||"",!0),this.m=dl(y[7]||"")):(this.h=!1,this.i=new hl(null,this.h))}Ni.prototype.toString=function(){var d=[],y=this.j;y&&d.push(fl(y,w_,!0),":");var C=this.g;return(C||y=="file")&&(d.push("//"),(y=this.o)&&d.push(fl(y,w_,!0),"@"),d.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&d.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(fl(C,C.charAt(0)=="/"?AM:PM,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",fl(C,NM)),d.join("")};function Br(d){return new Ni(d)}function Uu(d,y,C){d.j=C?dl(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Bu(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function y_(d,y,C){y instanceof hl?(d.i=y,kM(d.i,d.h)):(C||(y=fl(y,RM)),d.i=new hl(y,d.h))}function ze(d,y,C){d.i.set(y,C)}function zu(d){return ze(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function dl(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fl(d,y,C){return typeof d=="string"?(d=encodeURI(d).replace(y,IM),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function IM(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var w_=/[#\/\?@]/g,PM=/[#\?:]/g,AM=/[#\?]/g,RM=/[#\?@]/g,NM=/#/g;function hl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Ss(d){d.g||(d.g=new Map,d.h=0,d.i&&bM(d.i,function(y,C){d.add(decodeURIComponent(y.replace(/\+/g," ")),C)}))}t=hl.prototype,t.add=function(d,y){Ss(this),this.i=null,d=Co(this,d);var C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(y),this.h+=1,this};function x_(d,y){Ss(d),y=Co(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function __(d,y){return Ss(d),y=Co(d,y),d.g.has(y)}t.forEach=function(d,y){Ss(this),this.g.forEach(function(C,N){C.forEach(function(V){d.call(y,V,N,this)},this)},this)},t.na=function(){Ss(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),C=[];for(let N=0;N<y.length;N++){const V=d[N];for(let U=0;U<V.length;U++)C.push(y[N])}return C},t.V=function(d){Ss(this);let y=[];if(typeof d=="string")__(this,d)&&(y=y.concat(this.g.get(Co(this,d))));else{d=Array.from(this.g.values());for(let C=0;C<d.length;C++)y=y.concat(d[C])}return y},t.set=function(d,y){return Ss(this),this.i=null,d=Co(this,d),__(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function E_(d,y,C){x_(d,y),0<C.length&&(d.i=null,d.g.set(Co(d,y),w(C)),d.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var C=0;C<y.length;C++){var N=y[C];const U=encodeURIComponent(String(N)),Z=this.V(N);for(N=0;N<Z.length;N++){var V=U;Z[N]!==""&&(V+="="+encodeURIComponent(String(Z[N]))),d.push(V)}}return this.i=d.join("&")};function Co(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function kM(d,y){y&&!d.j&&(Ss(d),d.i=null,d.g.forEach(function(C,N){var V=N.toLowerCase();N!=V&&(x_(this,N),E_(this,V,C))},d)),d.j=y}function jM(d,y){const C=new cl;if(a.Image){const N=new Image;N.onload=g(Cs,C,"TestLoadImage: loaded",!0,y,N),N.onerror=g(Cs,C,"TestLoadImage: error",!1,y,N),N.onabort=g(Cs,C,"TestLoadImage: abort",!1,y,N),N.ontimeout=g(Cs,C,"TestLoadImage: timeout",!1,y,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else y(!1)}function DM(d,y){const C=new cl,N=new AbortController,V=setTimeout(()=>{N.abort(),Cs(C,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:N.signal}).then(U=>{clearTimeout(V),U.ok?Cs(C,"TestPingServer: ok",!0,y):Cs(C,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),Cs(C,"TestPingServer: error",!1,y)})}function Cs(d,y,C,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(C)}catch{}}function MM(){this.g=new vM}function OM(d,y,C){const N=C||"";try{g_(d,function(V,U){let Z=V;c(V)&&(Z=Wp(V)),y.push(N+U+"="+encodeURIComponent(Z))})}catch(V){throw y.push(N+"type="+encodeURIComponent("_badmap")),V}}function Wu(d){this.l=d.Ub||null,this.j=d.eb||!1}x(Wu,Hp),Wu.prototype.g=function(){return new Hu(this.l,this.j)},Wu.prototype.i=function(d){return function(){return d}}({});function Hu(d,y){Vt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Hu,Vt),t=Hu.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,ml(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;T_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function T_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?pl(this):ml(this),this.readyState==3&&T_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,pl(this))},t.Qa=function(d){this.g&&(this.response=d,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ml(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var C=y.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=y.next();return d.join(`\r
`)};function ml(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function S_(d){let y="";return M(d,function(C,N){y+=N,y+=":",y+=C,y+=`\r
`}),y}function tm(d,y,C){e:{for(N in C){var N=!1;break e}N=!0}N||(C=S_(C),typeof d=="string"?C!=null&&encodeURIComponent(String(C)):ze(d,y,C))}function lt(d){Vt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(lt,Vt);var LM=/^https?$/i,VM=["POST","PUT"];t=lt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,C,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qp.g(),this.v=this.o?Zx(this.o):Zx(qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(U){C_(this,U);return}if(d=C||"",C=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)C.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const U of N.keys())C.set(U,N.get(U));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(C.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VM,y,void 0))||N||V||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of C)this.g.setRequestHeader(U,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{P_(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){C_(this,U)}};function C_(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,b_(d),Ku(d)}function b_(d){d.A||(d.A=!0,nn(d,"complete"),nn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,nn(this,"complete"),nn(this,"abort"),Ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ku(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I_(this):this.bb())},t.bb=function(){I_(this)};function I_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||zr(d)!=4||d.Z()!=2)){if(d.u&&zr(d)==4)Qx(d.Ea,0,d);else if(nn(d,"readystatechange"),zr(d)==4){d.h=!1;try{const Z=d.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var C;if(!(C=y)){var N;if(N=Z===0){var V=String(d.D).match(v_)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),N=!LM.test(V?V.toLowerCase():"")}C=N}if(C)nn(d,"complete"),nn(d,"success");else{d.m=6;try{var U=2<zr(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",b_(d)}}finally{Ku(d)}}}}function Ku(d,y){if(d.g){P_(d);const C=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||nn(d,"ready");try{C.onreadystatechange=N}catch{}}}function P_(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function zr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),gM(y)}};function A_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function FM(d){const y={};d=(d.g&&2<=zr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(v(d[N]))continue;var C=k(d[N]);const V=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const U=y[V]||[];y[V]=U,U.push(C)}b(y,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gl(d,y,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||y}function R_(d){this.Aa=0,this.i=[],this.j=new cl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gl("baseRetryDelayMs",5e3,d),this.cb=gl("retryDelaySeedMs",1e4,d),this.Wa=gl("forwardChannelMaxRetries",2,d),this.wa=gl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new d_(d&&d.concurrentRequestLimit),this.Da=new MM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=R_.prototype,t.la=8,t.G=1,t.connect=function(d,y,C,N){rn(0),this.W=d,this.H=y||{},C&&N!==void 0&&(this.H.OSID=C,this.H.OAID=N),this.F=this.X,this.I=F_(this,null,this.W),qu(this)};function nm(d){if(N_(d),d.G==3){var y=d.U++,C=Br(d.I);if(ze(C,"SID",d.K),ze(C,"RID",y),ze(C,"TYPE","terminate"),vl(d,C),y=new Ts(d,d.j,y),y.L=2,y.v=zu(Br(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=y.v,C=!0),C||(y.g=$_(y.j,null),y.g.ea(y.v)),y.F=Date.now(),$u(y)}V_(d)}function Gu(d){d.g&&(sm(d),d.g.cancel(),d.g=null)}function N_(d){Gu(d),d.u&&(a.clearTimeout(d.u),d.u=null),Qu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function qu(d){if(!f_(d.h)&&!d.s){d.s=!0;var y=d.Ga;B||W(),O||(B(),O=!0),F.add(y,d),d.B=0}}function $M(d,y){return h_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ll(m(d.Ga,d,y),L_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new Ts(this,this.j,d);let U=this.o;if(this.S&&(U?(U=S(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var y=0,C=0;C<this.i.length;C++){t:{var N=this.i[C];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=C;break e}if(y===4096||C===this.i.length-1){y=C+1;break e}}y=1e3}else y=1e3;y=j_(this,V,y),C=Br(this.I),ze(C,"RID",d),ze(C,"CVER",22),this.D&&ze(C,"X-HTTP-Session-Id",this.D),vl(this,C),U&&(this.O?y="headers="+encodeURIComponent(String(S_(U)))+"&"+y:this.m&&tm(C,this.m,U)),em(this.h,V),this.Ua&&ze(C,"TYPE","init"),this.P?(ze(C,"$req",y),ze(C,"SID","null"),V.T=!0,Yp(V,C,null)):Yp(V,C,y),this.G=2}}else this.G==3&&(d?k_(this,d):this.i.length==0||f_(this.h)||k_(this))};function k_(d,y){var C;y?C=y.l:C=d.U++;const N=Br(d.I);ze(N,"SID",d.K),ze(N,"RID",C),ze(N,"AID",d.T),vl(d,N),d.m&&d.o&&tm(N,d.m,d.o),C=new Ts(d,d.j,C,d.B+1),d.m===null&&(C.H=d.o),y&&(d.i=y.D.concat(d.i)),y=j_(d,C,1e3),C.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),em(d.h,C),Yp(C,N,y)}function vl(d,y){d.H&&M(d.H,function(C,N){ze(y,N,C)}),d.l&&g_({},function(C,N){ze(y,N,C)})}function j_(d,y,C){C=Math.min(d.i.length,C);var N=d.l?m(d.l.Na,d.l,d):null;e:{var V=d.i;let U=-1;for(;;){const Z=["count="+C];U==-1?0<C?(U=V[0].g,Z.push("ofs="+U)):U=0:Z.push("ofs="+U);let Ve=!0;for(let Pt=0;Pt<C;Pt++){let ke=V[Pt].g;const Ft=V[Pt].map;if(ke-=U,0>ke)U=Math.max(0,V[Pt].g-100),Ve=!1;else try{OM(Ft,Z,"req"+ke+"_")}catch{N&&N(Ft)}}if(Ve){N=Z.join("&");break e}}}return d=d.i.splice(0,C),y.D=d,N}function D_(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;B||W(),O||(B(),O=!0),F.add(y,d),d.v=0}}function rm(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ll(m(d.Fa,d),L_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,M_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ll(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Gu(this),M_(this))};function sm(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function M_(d){d.g=new Ts(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Br(d.qa);ze(y,"RID","rpc"),ze(y,"SID",d.K),ze(y,"AID",d.T),ze(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&ze(y,"TO",d.ja),ze(y,"TYPE","xmlhttp"),vl(d,y),d.m&&d.o&&tm(y,d.m,d.o),d.L&&(d.g.I=d.L);var C=d.g;d=d.ia,C.L=1,C.v=zu(Br(y)),C.m=null,C.P=!0,l_(C,d)}t.Za=function(){this.C!=null&&(this.C=null,Gu(this),rm(this),rn(19))};function Qu(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function O_(d,y){var C=null;if(d.g==y){Qu(d),sm(d),d.g=null;var N=2}else if(Zp(d.h,y))C=y.D,p_(d.h,y),N=1;else return;if(d.G!=0){if(y.o)if(N==1){C=y.m?y.m.length:0,y=Date.now()-y.F;var V=d.B;N=Lu(),nn(N,new s_(N,C)),qu(d)}else D_(d);else if(V=y.s,V==3||V==0&&0<y.X||!(N==1&&$M(d,y)||N==2&&rm(d)))switch(C&&0<C.length&&(y=d.h,y.i=y.i.concat(C)),V){case 1:ki(d,5);break;case 4:ki(d,10);break;case 3:ki(d,6);break;default:ki(d,2)}}}function L_(d,y){let C=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(C*=2),C*y}function ki(d,y){if(d.j.info("Error code "+y),y==2){var C=m(d.fb,d),N=d.Xa;const V=!N;N=new Ni(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uu(N,"https"),zu(N),V?jM(N.toString(),C):DM(N.toString(),C)}else rn(2);d.G=0,d.l&&d.l.sa(y),V_(d),N_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function V_(d){if(d.G=0,d.ka=[],d.l){const y=m_(d.h);(y.length!=0||d.i.length!=0)&&(_(d.ka,y),_(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function F_(d,y,C){var N=C instanceof Ni?Br(C):new Ni(C);if(N.g!="")y&&(N.g=y+"."+N.g),Bu(N,N.s);else{var V=a.location;N=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;var U=new Ni(null);N&&Uu(U,N),y&&(U.g=y),V&&Bu(U,V),C&&(U.l=C),N=U}return C=d.D,y=d.ya,C&&y&&ze(N,C,y),ze(N,"VER",d.la),vl(d,N),N}function $_(d,y,C){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new lt(new Wu({eb:C})):new lt(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function U_(){}t=U_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yu(){}Yu.prototype.g=function(d,y){return new Cn(d,y)};function Cn(d,y){Vt.call(this),this.g=new R_(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!v(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!v(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new bo(this)}x(Cn,Vt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){nm(this.g)},Cn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.u&&(C={},C.__data__=Wp(d),d=C);y.i.push(new TM(y.Ya++,d)),y.G==3&&qu(y)},Cn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,Cn.aa.N.call(this)};function B_(d){Kp.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const C in y){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}x(B_,Kp);function z_(){Gp.call(this),this.status=1}x(z_,Gp);function bo(d){this.g=d}x(bo,U_),bo.prototype.ua=function(){nn(this.g,"a")},bo.prototype.ta=function(d){nn(this.g,new B_(d))},bo.prototype.sa=function(d){nn(this.g,new z_)},bo.prototype.ra=function(){nn(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,vR=function(){return new Yu},gR=function(){return Lu()},mR=Ai,Wv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vu.NO_ERROR=0,Vu.TIMEOUT=8,Vu.HTTP_ERROR=6,nf=Vu,i_.COMPLETE="complete",pR=i_,e_.EventType=ol,ol.OPEN="a",ol.CLOSE="b",ol.ERROR="c",ol.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Ul=e_,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,hR=lt}).apply(typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{});const US="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new q0("@firebase/firestore");function Pl(){return io.logLevel}function ae(t,...e){if(io.logLevel<=Ie.DEBUG){const n=e.map(aw);io.debug(`Firestore (${Xa}): ${t}`,...n)}}function hs(t,...e){if(io.logLevel<=Ie.ERROR){const n=e.map(aw);io.error(`Firestore (${Xa}): ${t}`,...n)}}function Ia(t,...e){if(io.logLevel<=Ie.WARN){const n=e.map(aw);io.warn(`Firestore (${Xa}): ${t}`,...n)}}function aw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: `+t;throw hs(e),new Error(e)}function Le(t,e){t||ge()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class AB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RB{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new yR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new Ht(e)}}class NB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=i=>{i.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new jB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=MB(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function Pa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new _t(0,0))}static max(){return new ye(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends Vc{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const OB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Vc{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return OB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ke.fromString(e))}static fromName(e){return new ce(Ke.fromString(e).popFirst(5))}static empty(){return new ce(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ke(e.slice()))}}function LB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new fi(s,ce.empty(),e)}function VB(t){return new fi(t.readTime,t.key,-1)}class fi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fi(ye.min(),ce.empty(),-1)}static max(){return new fi(ye.max(),ce.empty(),-1)}}function FB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==$B)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(f=>{o[c]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function BB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lw.oe=-1;function Xh(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function zB(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zS(this.data.getIterator())}getIteratorFrom(e){return new zS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class zS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new An([])}unionWith(e){let n=new Dt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _R("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const WB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(Le(!!t),typeof t=="string"){let e=0;const n=WB.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uw(t){const e=t.mapValue.fields.__previous_value__;return cw(e)?uw(e):e}function Fc(t){const e=hi(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class $c{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cw(t)?4:GB(t)?9007199254740991:KB(t)?10:11:ge()}function Mr(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hi(s.timestampValue),a=hi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return oo(s.bytesValue).isEqual(oo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?eh(o)===eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pa(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(BS(o)!==BS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return ge()}}function Uc(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function Aa(t,e){if(t===e)return 0;const n=ao(t),r=ao(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return WS(t.timestampValue,e.timestampValue);case 4:return WS(Fc(t),Fc(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(i,o){const a=oo(i),l=oo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const f=je(a[c],l[c]);if(f!==0)return f}return je(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=je(dt(i.latitude),dt(o.latitude));return a!==0?a:je(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,f;const h=i.fields||{},m=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,w=je(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return w!==0?w:HS(g,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ed.mapValue&&o===Ed.mapValue)return 0;if(i===Ed.mapValue)return 1;if(o===Ed.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let h=0;h<l.length&&h<f.length;++h){const m=je(l[h],f[h]);if(m!==0)return m;const g=Aa(a[l[h]],c[f[h]]);if(g!==0)return g}return je(l.length,f.length)}(t.mapValue,e.mapValue);default:throw ge()}}function WS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=hi(t),r=hi(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function HS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Aa(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function Ra(t){return Hv(t)}function Hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Hv(n.fields[o])}`;return s+"}"}(t.mapValue):ge()}function KS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kv(t){return!!t&&"integerValue"in t}function dw(t){return!!t&&"arrayValue"in t}function GS(t){return!!t&&"nullValue"in t}function qS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rf(t){return!!t&&"mapValue"in t}function KB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=oc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];rf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new yn(oc(this.value))}}function ER(t){const e=[];return vo(t.fields,(n,r)=>{const s=new kt([n]);if(rf(r)){const i=ER(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Gt(e,0,ye.min(),ye.min(),ye.min(),yn.empty(),0)}static newFoundDocument(e,n,r,s){return new Gt(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new Gt(e,2,n,ye.min(),ye.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,ye.min(),ye.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function QS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Aa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function YS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function qB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{}class yt extends TR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YB(e,n,r):n==="array-contains"?new ZB(e,r):n==="in"?new ez(e,r):n==="not-in"?new tz(e,r):n==="array-contains-any"?new nz(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XB(e,r):new JB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Aa(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(Aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends TR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pr(e,n)}matches(e){return SR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function SR(t){return t.op==="and"}function CR(t){return QB(t)&&SR(t)}function QB(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function Gv(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Ra(t.value);if(CR(t))return t.filters.map(e=>Gv(e)).join(",");{const e=t.filters.map(n=>Gv(n)).join(",");return`${t.op}(${e})`}}function bR(t,e){return t instanceof yt?function(r,s){return s instanceof yt&&r.op===s.op&&r.field.isEqual(s.field)&&Mr(r.value,s.value)}(t,e):t instanceof pr?function(r,s){return s instanceof pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&bR(o,s.filters[a]),!0):!1}(t,e):void ge()}function IR(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ra(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(IR).join(" ,")+"}"}(t):"Filter"}class YB extends yt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class XB extends yt{constructor(e,n){super(e,"in",n),this.keys=PR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JB extends yt{constructor(e,n){super(e,"not-in",n),this.keys=PR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class ZB extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dw(n)&&Uc(n.arrayValue,this.value)}}class ez extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uc(this.value.arrayValue,n)}}class tz extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uc(this.value.arrayValue,n)}}class nz extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function XS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rz(t,e,n,r,s,i,o)}function fw(t){const e=we(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ra(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ra(r)).join(",")),e.ue=n}return e.ue}function hw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YS(t.startAt,e.startAt)&&YS(t.endAt,e.endAt)}function qv(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sz(t,e,n,r,s,i,o,a){return new Ja(t,e,n,r,s,i,o,a)}function Jh(t){return new Ja(t)}function JS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AR(t){return t.collectionGroup!==null}function ac(t){const e=we(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Bc(i,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new Bc(kt.keyField(),r))}return e.ce}function kr(t){const e=we(t);return e.le||(e.le=iz(e,ac(t))),e.le}function iz(t,e){if(t.limitType==="F")return XS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bc(s.field,i)});const n=t.endAt?new th(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new th(t.startAt.position,t.startAt.inclusive):null;return XS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qv(t,e){const n=t.filters.concat([e]);return new Ja(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nh(t,e,n){return new Ja(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return hw(kr(t),kr(e))&&t.limitType===e.limitType}function RR(t){return`${fw(kr(t))}|lt:${t.limitType}`}function Mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>IR(s)).join(", ")}]`),Xh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ra(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ra(s)).join(",")),`Target(${r})`}(kr(t))}; limitType=${t.limitType})`}function ep(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ac(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=QS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ac(r),s)||r.endAt&&!function(o,a,l){const c=QS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ac(r),s))}(t,e)}function oz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NR(t){return(e,n)=>{let r=!1;for(const s of ac(t)){const i=az(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function az(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Aa(l,c):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return xR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=new at(ce.comparator);function ps(){return lz}const kR=new at(ce.comparator);function Bl(...t){let e=kR;for(const n of t)e=e.insert(n.key,n);return e}function jR(t){let e=kR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return lc()}function DR(){return lc()}function lc(){return new Za(t=>t.toString(),(t,e)=>t.isEqual(e))}const cz=new at(ce.comparator),uz=new Dt(ce.comparator);function be(...t){let e=uz;for(const n of t)e=e.add(n);return e}const dz=new Dt(je);function fz(){return dz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function MR(t){return{integerValue:""+t}}function hz(t,e){return zB(e)?MR(e):pw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this._=void 0}}function pz(t,e,n){return t instanceof zc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cw(i)&&(i=uw(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Wc?LR(t,e):t instanceof Hc?VR(t,e):function(s,i){const o=OR(s,i),a=ZS(o)+ZS(s.Pe);return Kv(o)&&Kv(s.Pe)?MR(a):pw(s.serializer,a)}(t,e)}function mz(t,e,n){return t instanceof Wc?LR(t,e):t instanceof Hc?VR(t,e):n}function OR(t,e){return t instanceof rh?function(r){return Kv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class zc extends tp{}class Wc extends tp{constructor(e){super(),this.elements=e}}function LR(t,e){const n=FR(e);for(const r of t.elements)n.some(s=>Mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hc extends tp{constructor(e){super(),this.elements=e}}function VR(t,e){let n=FR(e);for(const r of t.elements)n=n.filter(s=>!Mr(s,r));return{arrayValue:{values:n}}}class rh extends tp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZS(t){return dt(t.integerValue||t.doubleValue)}function FR(t){return dw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.field=e,this.transform=n}}function vz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wc&&s instanceof Wc||r instanceof Hc&&s instanceof Hc?Pa(r.elements,s.elements,Mr):r instanceof rh&&s instanceof rh?Mr(r.Pe,s.Pe):r instanceof zc&&s instanceof zc}(t.transform,e.transform)}class yz{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class np{}function $R(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,fn.none()):new _u(t.key,t.data,fn.none());{const n=t.data,r=yn.empty();let s=new Dt(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ii(t.key,r,new An(s.toArray()),fn.none())}}function wz(t,e,n){t instanceof _u?function(s,i,o){const a=s.value.clone(),l=t1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(s,i,o){if(!sf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=t1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(UR(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cc(t,e,n,r){return t instanceof _u?function(i,o,a,l){if(!sf(i.precondition,o))return a;const c=i.value.clone(),f=n1(i.fieldTransforms,l,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ii?function(i,o,a,l){if(!sf(i.precondition,o))return a;const c=n1(i.fieldTransforms,l,o),f=o.data;return f.setAll(UR(i)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return sf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function xz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=OR(r.transform,s||null);i!=null&&(n===null&&(n=yn.empty()),n.set(r.field,i))}return n||null}function e1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pa(r,s,(i,o)=>vz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _u extends np{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ii extends np{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function t1(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,mz(o,a,n[s]))}return r}function n1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,pz(i,o,e))}return r}class rp extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _z extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&wz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=$R(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(n,r)=>e1(n,r))&&Pa(this.baseMutations,e.baseMutations,(n,r)=>e1(n,r))}}class mw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return cz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tz=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Pe;function Cz(t){switch(t){default:return ge();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function BR(t){if(t===void 0)return hs("GRPC error has no .code"),z.UNKNOWN;switch(t){case mt.OK:return z.OK;case mt.CANCELLED:return z.CANCELLED;case mt.UNKNOWN:return z.UNKNOWN;case mt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case mt.INTERNAL:return z.INTERNAL;case mt.UNAVAILABLE:return z.UNAVAILABLE;case mt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case mt.NOT_FOUND:return z.NOT_FOUND;case mt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case mt.ABORTED:return z.ABORTED;case mt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case mt.DATA_LOSS:return z.DATA_LOSS;default:return ge()}}(Pe=mt||(mt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=new Qi([4294967295,4294967295],0);function r1(t){const e=bz().encode(t),n=new fR;return n.update(e),new Uint8Array(n.digest())}function s1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qi([n,r],0),new Qi([s,i],0)]}class gw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Qi.fromNumber(r)));return s.compare(Iz)===1&&(s=new Qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=r1(e),[r,s]=s1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new gw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=r1(e),[r,s]=s1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sp(ye.min(),s,new at(je),ps(),be())}}class Eu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Eu(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class zR{constructor(e,n){this.targetId=e,this.me=n}}class WR{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class i1{constructor(){this.fe=0,this.ge=a1(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),n=be(),r=be();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge()}}),new Eu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=a1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pz{constructor(e){this.Le=e,this.Be=new Map,this.ke=ps(),this.qe=o1(),this.Qe=new at(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(qv(i))if(r===0){const o=new ce(i.path);this.Ue(n,o,Gt.newNoDocument(o,ye.min()))}else Le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=oo(r).toUint8Array()}catch(l){if(l instanceof _R)return Ia("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gw(o,s,i)}catch(l){return Ia(l instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&qv(a.target)){const l=new ce(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Gt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=be();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new sp(e,n,this.Qe,this.ke,r);return this.ke=ps(),this.qe=o1(),this.Qe=new at(je),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new i1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dt(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new i1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function o1(){return new at(ce.comparator)}function a1(){return new at(ce.comparator)}const Az=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Rz=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Nz=(()=>({and:"AND",or:"OR"}))();class kz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yv(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jz(t,e){return sh(t,e.toTimestamp())}function jr(t){return Le(!!t),ye.fromTimestamp(function(n){const r=hi(n);return new _t(r.seconds,r.nanos)}(t))}function vw(t,e){return Xv(t,e).canonicalString()}function Xv(t,e){const n=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KR(t){const e=Ke.fromString(t);return Le(XR(e)),e}function Jv(t,e){return vw(t.databaseId,e.path)}function eg(t,e){const n=KR(e);if(n.get(1)!==t.databaseId.projectId)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(qR(n))}function GR(t,e){return vw(t.databaseId,e)}function Dz(t){const e=KR(t);return e.length===4?Ke.emptyPath():qR(e)}function Zv(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qR(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function l1(t,e,n){return{name:Jv(t,e),fields:n.value.mapValue.fields}}function Mz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,f){return c.useProto3Json?(Le(f===void 0||typeof f=="string"),Ot.fromBase64String(f||"")):(Le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const f=c.code===void 0?z.UNKNOWN:BR(c.code);return new re(f,c.message||"")}(o);n=new WR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eg(t,r.document.name),i=jr(r.document.updateTime),o=r.document.createTime?jr(r.document.createTime):ye.min(),a=new yn({mapValue:{fields:r.document.fields}}),l=Gt.newFoundDocument(s,i,o,a),c=r.targetIds||[],f=r.removedTargetIds||[];n=new of(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eg(t,r.document),i=r.readTime?jr(r.readTime):ye.min(),o=Gt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new of([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eg(t,r.document),i=r.removedTargetIds||[];n=new of([],i,s,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Sz(s,i),a=r.targetId;n=new zR(a,o)}}return n}function Oz(t,e){let n;if(e instanceof _u)n={update:l1(t,e.key,e.value)};else if(e instanceof rp)n={delete:Jv(t,e.key)};else if(e instanceof Ii)n={update:l1(t,e.key,e.data),updateMask:Hz(e.fieldMask)};else{if(!(e instanceof _z))return ge();n={verify:Jv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof zc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jz(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge()}(t,e.precondition)),n}function Lz(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?jr(s.updateTime):jr(i);return o.isEqual(ye.min())&&(o=jr(i)),new yz(o,s.transformResults||[])}(n,e))):[]}function Vz(t,e){return{documents:[GR(t,e.path)]}}function Fz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GR(t,s);const i=function(c){if(c.length!==0)return YR(pr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:Oo(m.field),direction:Bz(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function $z(t){let e=Dz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(h){const m=QR(h);return m instanceof pr&&CR(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(x){return new Bc(Lo(x.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Xh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new th(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,g=h.values||[];return new th(g,m)}(n.endAt)),sz(e,s,o,i,a,"F",l,c)}function Uz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lo(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Lo(n.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lo(n.unaryFilter.field);return yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lo(n.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(Lo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>QR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function Bz(t){return Az[t]}function zz(t){return Rz[t]}function Wz(t){return Nz[t]}function Oo(t){return{fieldPath:t.canonicalString()}}function Lo(t){return kt.fromServerFormat(t.fieldPath)}function YR(t){return t instanceof yt?function(n){if(n.op==="=="){if(qS(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NAN"}};if(GS(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qS(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NAN"}};if(GS(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(n.field),op:zz(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(s=>YR(s));return r.length===1?r[0]:{compositeFilter:{op:Wz(n.op),filters:r}}}(t):ge()}function Hz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r,s,i=ye.min(),o=ye.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.ct=e}}function Gz(t){const e=$z({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.un=new Qz}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(fi.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class Qz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Dt(Ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Na(0)}static kn(){return new Na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(){this.changes=new Za(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cc(r.mutation,s,An.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=Hi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Bl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ps();const o=lc(),a=function(){return lc()}();return n.forEach((l,c)=>{const f=r.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Ii)?i=i.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),cc(f.mutation,c,f.mutation.getFieldMask(),_t.now())):o.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var h;return a.set(c,new Xz(f,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=lc();let s=new at((o,a)=>o-a),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let f=r.get(l)||An.empty();f=a.applyToLocalView(c,f),r.set(l,f);const h=(s.get(a.batchId)||be()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,f=l.value,h=DR();f.forEach(m=>{if(!i.has(m)){const g=$R(n.get(m),r.get(m));g!==null&&h.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Hi());let a=-1,l=i;return o.next(c=>G.forEach(c,(f,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,be())).next(f=>({batchId:a,changes:jR(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=Bl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Bl();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,l=>{const c=function(h,m){return new Ja(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(f=>{f.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Gt.newInvalidDocument(f)))});let a=Bl();return o.forEach((l,c)=>{const f=i.get(l);f!==void 0&&cc(f.mutation,c,An.empty(),_t.now()),ep(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Gz(s.bundledQuery),readTime:jr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.overlays=new at(ce.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Hi(),i=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new at((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=i.get(c.largestBatchId);f===null&&(f=Hi(),i=i.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=Hi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=s)););return G.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tz(n,r));let i=this.Ir.get(n);i===void 0&&(i=be(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.Tr=new Dt(Tt.Er),this.dr=new Dt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ce(new Ke([])),r=new Tt(n,e),s=new Tt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ce(new Ke([])),r=new Tt(n,e),s=new Tt(n,e+1);let i=be();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ce.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dt(Tt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ez(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(je);return n.forEach(s=>{const i=new Tt(s,0),o=new Tt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const o=new Tt(new ce(i),0);let a=new Dt(je);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,s=>{const i=new Tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tt(n,0),s=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.Mr=e,this.docs=function(){return new at(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=ps();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Gt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ps();const o=n.path,a=new ce(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||FB(VB(f),r)<=0||(s.has(f.key)||ep(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new s7(this)}getSize(e){return G.resolve(this.size)}}class s7 extends Yz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e){this.persistence=e,this.Nr=new Za(n=>fw(n),hw),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yw,this.targetCount=0,this.kr=Na.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lw(0),this.Kr=!1,this.Kr=!0,this.$r=new t7,this.referenceDelegate=e(this),this.Ur=new i7(this),this.indexManager=new qz,this.remoteDocumentCache=function(s){return new r7(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Kz(n),this.Gr=new Zz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new n7(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const s=new a7(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class a7 extends UB{constructor(e){super(),this.currentSequenceNumber=e}}class ww{constructor(e){this.persistence=e,this.Jr=new yw,this.Yr=null}static Zr(e){return new ww(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const s=ce.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=be(),s=be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return X5()?8:BB(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new l7;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Pl()<=Ie.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Pl()<=Ie.DEBUG&&ae("QueryEngine","Query:",Mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Pl()<=Ie.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):G.resolve())}Yi(e,n){if(JS(n))return G.resolve(null);let r=kr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nh(n,null,"F"),r=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=be(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,nh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return JS(n)||s.isEqual(ye.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?G.resolve(null):(Pl()<=Ie.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mo(n)),this.rs(e,o,n,LB(s,-1)).next(a=>a))})}ts(e,n){let r=new Dt(NR(e));return n.forEach((s,i)=>{ep(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Pl()<=Ie.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.Ji.getDocumentsMatchingQuery(e,n,fi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new at(je),this._s=new Za(i=>fw(i),hw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function d7(t,e,n,r){return new u7(t,e,n,r)}async function JR(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=be();for(const c of s){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function f7(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,f){const h=c.batch,m=h.keys();let g=G.resolve();return m.forEach(x=>{g=g.next(()=>f.getEntry(l,x)).next(w=>{const _=c.docVersions.get(x);Le(_!==null),w.version.compareTo(_)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),f.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=be();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZR(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function h7(t,e){const n=we(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,h)=>{const m=s.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,h)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ot.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),s=s.insert(h,g),function(w,_,E){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,g,f)&&a.push(n.Ur.updateTargetData(i,g))});let l=ps(),c=be();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(p7(i,o,e.documentUpdates).next(f=>{l=f.Ps,c=f.Is})),!r.isEqual(ye.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function p7(t,e,n){let r=be(),s=be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ps();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function m7(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g7(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ey(t,e,n){const r=we(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xu(o))throw o;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function c1(t,e,n){const r=we(t);let s=ye.min(),i=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,f){const h=we(l),m=h._s.get(f);return m!==void 0?G.resolve(h.os.get(m)):h.Ur.getTargetData(c,f)}(r,o,kr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:be())).next(a=>(v7(r,oz(e),a),{documents:a,Ts:i})))}function v7(t,e,n){let r=t.us.get(e)||ye.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class u1{constructor(){this.activeTargetIds=fz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y7{constructor(){this.so=new u1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new u1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function tg(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class E7 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=tg(),l=this.xo(n,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(f=>(ae("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw Ia("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=x7[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=tg();return new Promise((o,a)=>{const l=new hR;l.setWithCredentials(!0),l.listenOnce(pR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nf.NO_ERROR:const f=l.getResponseJson();ae(zt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case nf.TIMEOUT:ae(zt,`RPC '${e}' ${i} timed out`),a(new re(z.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const h=l.getStatus();if(ae(zt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(_){const E=_.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(E)>=0?E:z.UNKNOWN}(g.status);a(new re(x,g.message))}else a(new re(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new re(z.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ae(zt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ae(zt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=tg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vR(),a=gR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");ae(zt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const h=o.createWebChannel(f,l);let m=!1,g=!1;const x=new _7({Io:_=>{g?ae(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(ae(zt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),ae(zt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),w=(_,E,v)=>{_.listen(E,T=>{try{v(T)}catch(I){setTimeout(()=>{throw I},0)}})};return w(h,Ul.EventType.OPEN,()=>{g||(ae(zt,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),w(h,Ul.EventType.CLOSE,()=>{g||(g=!0,ae(zt,`RPC '${e}' stream ${s} transport closed`),x.So())}),w(h,Ul.EventType.ERROR,_=>{g||(g=!0,Ia(zt,`RPC '${e}' stream ${s} transport errored:`,_),x.So(new re(z.UNAVAILABLE,"The operation could not be completed")))}),w(h,Ul.EventType.MESSAGE,_=>{var E;if(!g){const v=_.data[0];Le(!!v);const T=v,I=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(I){ae(zt,`RPC '${e}' stream ${s} received error:`,I);const R=I.status;let M=function(A){const P=mt[A];if(P!==void 0)return BR(P)}(R),b=I.message;M===void 0&&(M=z.INTERNAL,b="Unknown error status: "+R+" with message "+I.message),g=!0,x.So(new re(M,b)),h.close()}else ae(zt,`RPC '${e}' stream ${s} received:`,v),x.bo(v)}}),w(a,mR.STAT_EVENT,_=>{_.stat===Wv.PROXY?ae(zt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Wv.NOPROXY&&ae(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function ng(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new kz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new re(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T7 extends tN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Mz(this.serializer,e),r=function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?jr(o.readTime):ye.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Zv(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=qv(l)?{documents:Vz(i,l)}:{query:Fz(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HR(i,o.resumeToken);const c=Yv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=sh(i,o.snapshotVersion.toTimestamp());const c=Yv(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Uz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Zv(this.serializer),n.removeTarget=e,this.a_(n)}}class S7 extends tN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Lz(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Zv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Oz(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Xv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(z.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Xv(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class b7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hs(n),this.D_=!1):ae("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{yo(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=we(l);c.L_.add(4),await Tu(c),c.q_.set("Unknown"),c.L_.delete(4),await op(c)}(this))})}),this.q_=new b7(r,s)}}async function op(t){if(yo(t))for(const e of t.B_)await e(!0)}async function Tu(t){for(const e of t.B_)await e(!1)}function nN(t,e){const n=we(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sw(n)?Tw(n):el(n).r_()&&Ew(n,e))}function _w(t,e){const n=we(t),r=el(n);n.N_.delete(e),r.r_()&&rN(n,e),n.N_.size===0&&(r.r_()?r.o_():yo(n)&&n.q_.set("Unknown"))}function Ew(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(t).A_(e)}function rN(t,e){t.Q_.xe(e),el(t).R_(e)}function Tw(t){t.Q_=new Pz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),el(t).start(),t.q_.v_()}function Sw(t){return yo(t)&&!el(t).n_()&&t.N_.size>0}function yo(t){return we(t).L_.size===0}function sN(t){t.Q_=void 0}async function P7(t){t.q_.set("Online")}async function A7(t){t.N_.forEach((e,n)=>{Ew(t,e)})}async function R7(t,e){sN(t),Sw(t)?(t.q_.M_(e),Tw(t)):t.q_.set("Unknown")}async function N7(t,e,n){if(t.q_.set("Online"),e instanceof WR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ih(t,r)}else if(e instanceof of?t.Q_.Ke(e):e instanceof zR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const r=await ZR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.N_.get(c);f&&i.N_.set(c,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const f=i.N_.get(l);if(!f)return;i.N_.set(l,f.withResumeToken(Ot.EMPTY_BYTE_STRING,f.snapshotVersion)),rN(i,l);const h=new Ws(f.target,l,c,f.sequenceNumber);Ew(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),await ih(t,r)}}async function ih(t,e,n){if(!xu(e))throw e;t.L_.add(1),await Tu(t),t.q_.set("Offline"),n||(n=()=>ZR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await op(t)})}function iN(t,e){return e().catch(n=>ih(t,n,e))}async function ap(t){const e=we(t),n=pi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;k7(e);)try{const s=await m7(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,j7(e,s)}catch(s){await ih(e,s)}oN(e)&&aN(e)}function k7(t){return yo(t)&&t.O_.length<10}function j7(t,e){t.O_.push(e);const n=pi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function oN(t){return yo(t)&&!pi(t).n_()&&t.O_.length>0}function aN(t){pi(t).start()}async function D7(t){pi(t).p_()}async function M7(t){const e=pi(t);for(const n of t.O_)e.m_(n.mutations)}async function O7(t,e,n){const r=t.O_.shift(),s=mw.from(r,e,n);await iN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ap(t)}async function L7(t,e){e&&pi(t).V_&&await async function(r,s){if(function(o){return Cz(o)&&o!==z.ABORTED}(s.code)){const i=r.O_.shift();pi(r).s_(),await iN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ap(r)}}(t,e),oN(t)&&aN(t)}async function f1(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=yo(n);n.L_.add(3),await Tu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await op(n)}async function V7(t,e){const n=we(t);e?(n.L_.delete(2),await op(n)):e||(n.L_.add(2),await Tu(n),n.q_.set("Unknown"))}function el(t){return t.K_||(t.K_=function(n,r,s){const i=we(n);return i.w_(),new T7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:P7.bind(null,t),Ro:A7.bind(null,t),mo:R7.bind(null,t),d_:N7.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sw(t)?Tw(t):t.q_.set("Unknown")):(await t.K_.stop(),sN(t))})),t.K_}function pi(t){return t.U_||(t.U_=function(n,r,s){const i=we(n);return i.w_(),new S7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:D7.bind(null,t),mo:L7.bind(null,t),f_:M7.bind(null,t),g_:O7.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ap(t)):(await t.U_.stop(),t.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Cw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bw(t,e){if(hs("AsyncQueue",`${e}: ${t}`),xu(t))return new re(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Bl(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.W_=new at(ce.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ka{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ka(e,n,ua.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $7{constructor(){this.queries=p1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=p1(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new re(z.ABORTED,"Firestore shutting down"))}}function p1(){return new Za(t=>RR(t),Zh)}async function Iw(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new F7,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=bw(o,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Aw(n)}async function Pw(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function U7(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Aw(n)}function B7(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Aw(t){t.Y_.forEach(e=>{e.next()})}var ty,m1;(m1=ty||(ty={})).ea="default",m1.Cache="cache";class Rw{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ty.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class z7{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=NR(e),this.Ra=new ua(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h1,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,h)=>{const m=s.get(f),g=ep(this.query,h)?h:null,x=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?x!==w&&(r.track({type:3,doc:g}),_=!0):this.ga(m,g)||(r.track({type:2,doc:g}),_=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),_=!0):m&&!g&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(g?(o=o.add(g),i=w?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,h)=>function(g,x){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return w(g)-w(x)}(f.type,h.type)||this.Aa(f.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ka(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lN(r))}),n}ba(e){this.Ta=e.Ts,this.da=be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class W7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class H7{constructor(e){this.key=e,this.va=!1}}class K7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Za(a=>RR(a),Zh),this.Ma=new Map,this.xa=new Set,this.Oa=new at(ce.comparator),this.Na=new Map,this.La=new yw,this.Ba={},this.ka=new Map,this.qa=Na.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function G7(t,e,n=!0){const r=mN(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await uN(r,e,n,!0),s}async function q7(t,e){const n=mN(t);await uN(n,e,!0,!1)}async function uN(t,e,n,r){const s=await g7(t.localStore,kr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Q7(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nN(t.remoteStore,s),a}async function Q7(t,e,n,r,s){t.Ka=(h,m,g)=>async function(w,_,E,v){let T=_.view.ma(E);T.ns&&(T=await c1(w.localStore,_.query,!1).then(({documents:b})=>_.view.ma(b,T)));const I=v&&v.targetChanges.get(_.targetId),R=v&&v.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(T,w.isPrimaryClient,I,R);return v1(w,_.targetId,M.wa),M.snapshot}(t,h,m,g);const i=await c1(t.localStore,e,!0),o=new z7(e,i.Ts),a=o.ma(i.documents),l=Eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);v1(t,n,c.wa);const f=new W7(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Y7(t,e,n){const r=we(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Zh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ey(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_w(r.remoteStore,s.targetId),ny(r,s.targetId)}).catch(wu)):(ny(r,s.targetId),await ey(r.localStore,s.targetId,!0))}async function X7(t,e){const n=we(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_w(n.remoteStore,r.targetId))}async function J7(t,e,n){const r=i8(t);try{const s=await function(o,a){const l=we(o),c=_t.now(),f=a.reduce((g,x)=>g.add(x.key),be());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ps(),w=be();return l.cs.getEntries(g,f).next(_=>{x=_,x.forEach((E,v)=>{v.isValidDocument()||(w=w.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(_=>{h=_;const E=[];for(const v of a){const T=xz(v,h.get(v.key).overlayedDocument);T!=null&&E.push(new Ii(v.key,T,ER(T.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(_=>{m=_;const E=_.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(g,_.batchId,E)})}).then(()=>({batchId:m.batchId,changes:jR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new at(je)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Su(r,s.changes),await ap(r.remoteStore)}catch(s){const i=bw(s,"Failed to persist write");n.reject(i)}}async function dN(t,e){const n=we(t);try{const r=await h7(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Le(o.va):s.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await Su(n,r,e)}catch(r){await wu(r)}}function g1(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=we(o);l.onlineState=a;let c=!1;l.queries.forEach((f,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&Aw(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z7(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new at(ce.comparator);o=o.insert(i,Gt.newNoDocument(i,ye.min()));const a=be().add(i),l=new sp(ye.min(),new Map,new at(je),o,a);await dN(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Nw(r)}else await ey(r.localStore,e,!1).then(()=>ny(r,e,n)).catch(wu)}async function e8(t,e){const n=we(t),r=e.batch.batchId;try{const s=await f7(n.localStore,e);hN(n,r,null),fN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Su(n,s)}catch(s){await wu(s)}}async function t8(t,e,n){const r=we(t);try{const s=await function(o,a){const l=we(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),f=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(r.localStore,e);hN(r,e,n),fN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Su(r,s)}catch(s){await wu(s)}}function fN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hN(t,e,n){const r=we(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||pN(t,r)})}function pN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_w(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Nw(t))}function v1(t,e,n){for(const r of n)r instanceof lN?(t.La.addReference(r.key,e),n8(t,r)):r instanceof cN?(ae("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||pN(t,r.key)):ge()}function n8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ae("SyncEngine","New document in limbo: "+n),t.xa.add(r),Nw(t))}function Nw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ce(Ke.fromString(e)),r=t.qa.next();t.Na.set(r,new H7(n)),t.Oa=t.Oa.insert(n,r),nN(t.remoteStore,new Ws(kr(Jh(n.path)),r,"TargetPurposeLimboResolution",lw.oe))}}async function Su(t,e,n){const r=we(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=xw.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const f=we(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(c,m=>G.forEach(m.$i,g=>f.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>G.forEach(m.Ui,g=>f.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!xu(h))throw h;ae("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const g=f.os.get(m),x=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(m,w)}}}(r.localStore,i))}async function r8(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=await JR(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new re(z.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(n,r.hs)}}function s8(t,e){const n=we(t),r=n.Na.get(e);if(r&&r.va)return be().add(r.key);{let s=be();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function mN(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z7.bind(null,e),e.Ca.d_=U7.bind(null,e.eventManager),e.Ca.$a=B7.bind(null,e.eventManager),e}function i8(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t8.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return d7(this.persistence,new c7,e.initialUser,this.serializer)}Ga(e){return new o7(ww.Zr,this.serializer)}Wa(e){return new y7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class ry{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r8.bind(null,this.syncEngine),await V7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $7}()}createDatastore(e){const n=ip(e.databaseInfo.databaseId),r=function(i){return new E7(i)}(e.databaseInfo);return function(i,o,a,l){return new C7(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new I7(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>g1(this.syncEngine,n,0),function(){return d1.D()?new d1:new w7}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,f){const h=new K7(s,i,o,a,l,c);return f&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);ae("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ry.provider={build:()=>new ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ht.UNAUTHENTICATED,this.clientId=wR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ae("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rg(t,e){t.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await JR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await a8(t);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>f1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>f1(e.remoteStore,s)),t._onlineComponents=e}async function a8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ia("Error using user provided cache. Falling back to memory cache: "+n),await rg(t,new oh)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await rg(t,new oh);return t._offlineComponents}async function gN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await y1(t,t._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await y1(t,new ry))),t._onlineComponents}function l8(t){return gN(t).then(e=>e.syncEngine)}async function ah(t){const e=await gN(t),n=e.eventManager;return n.onListen=G7.bind(null,e.syncEngine),n.onUnlisten=Y7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=q7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X7.bind(null,e.syncEngine),n}function c8(t,e,n={}){const r=new rs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const f=new kw({next:m=>{f.Za(),o.enqueueAndForget(()=>Pw(i,h));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new re(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new re(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Rw(Jh(a.path),f,{includeMetadataChanges:!0,_a:!0});return Iw(i,h)}(await ah(t),t.asyncQueue,e,n,r)),r.promise}function u8(t,e,n={}){const r=new rs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const f=new kw({next:m=>{f.Za(),o.enqueueAndForget(()=>Pw(i,h)),m.fromCache&&l.source==="server"?c.reject(new re(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Rw(a,f,{includeMetadataChanges:!0,_a:!0});return Iw(i,h)}(await ah(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e,n){if(!n)throw new re(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d8(t,e,n,r){if(e===!0&&r===!0)throw new re(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x1(t){if(!ce.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _1(t){if(ce.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lp(t);throw new re(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function f8(t,e){if(e<=0)throw new re(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PB;switch(r.type){case"firstParty":return new kB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=w1.get(n);r&&(ae("ComponentProvider","Removing Datastore"),w1.delete(n),r.terminate())}(this),Promise.resolve()}}function h8(t,e,n,r={}){var s;const i=(t=hn(t,cp))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ht.MOCK_USER;else{a=W5(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new re(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ht(c)}t._authCredentials=new AB(new yR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class ii extends _s{constructor(e,n,r){super(e,n,Jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ce(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=ot(t),yN("collection","path",e),t instanceof cp){const r=Ke.fromString(e,...n);return _1(r),new ii(t,null,r)}{if(!(t instanceof Xt||t instanceof ii))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return _1(r),new ii(t.firestore,null,r)}}function xe(t,e,...n){if(t=ot(t),arguments.length===1&&(e=wR.newId()),yN("doc","path",e),t instanceof cp){const r=Ke.fromString(e,...n);return x1(r),new Xt(t,null,new ce(r))}{if(!(t instanceof Xt||t instanceof ii))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return x1(r),new Xt(t.firestore,t instanceof ii?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eN(this,"async_queue_retry"),this.Vu=()=>{const r=ng();r&&ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ng();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ng();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new rs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xu(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Cw.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function S1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Or extends cp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new T1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T1(e),this._firestoreClient=void 0,await e}}}function $n(t,e){const n=typeof t=="object"?t:J0(),r=typeof t=="string"?t:e||"(default)",s=Y0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=B5("firestore");i&&h8(s,...i)}return s}function Cu(t){if(t._terminated)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p8(t),t._firestoreClient}function p8(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,f){return new HB(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,vN(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new o8(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(Ot.fromBase64String(e))}catch(n){throw new re(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=/^__.*__$/;class g8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class wN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Mw{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Mw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xN(this.Cu)&&m8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class v8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}Qu(e,n,r,s=!1){return new Mw({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(t){const e=t._freezeSettings(),n=ip(t._databaseId);return new v8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ow(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Vw("Data must be an object, but it was:",o,r);const a=TN(r,o);let l,c;if(i.merge)l=new An(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const h of i.mergeFields){const m=sy(e,h,n);if(!o.contains(m))throw new re(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);CN(f,m)||f.push(m)}l=new An(f),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new g8(new yn(a),l,c)}class dp extends up{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dp}}class Lw extends up{_toFieldTransform(e){return new gz(e.path,new zc)}isEqual(e){return e instanceof Lw}}function _N(t,e,n,r){const s=t.Qu(1,e,n);Vw("Data must be an object, but it was:",s,r);const i=[],o=yn.empty();vo(r,(l,c)=>{const f=Fw(e,l,n);c=ot(c);const h=s.Nu(f);if(c instanceof dp)i.push(f);else{const m=Pu(c,h);m!=null&&(i.push(f),o.set(f,m))}});const a=new An(i);return new wN(o,a,s.fieldTransforms)}function EN(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[sy(e,r,n)],l=[s];if(i.length%2!=0)throw new re(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(sy(e,i[m])),l.push(i[m+1]);const c=[],f=yn.empty();for(let m=a.length-1;m>=0;--m)if(!CN(c,a[m])){const g=a[m];let x=l[m];x=ot(x);const w=o.Nu(g);if(x instanceof dp)c.push(g);else{const _=Pu(x,w);_!=null&&(c.push(g),f.set(g,_))}}const h=new An(c);return new wN(f,h,o.fieldTransforms)}function y8(t,e,n,r=!1){return Pu(n,t.Qu(r?4:3,e))}function Pu(t,e){if(SN(t=ot(t)))return Vw("Unsupported field value:",e,t),TN(t,e);if(t instanceof up)return function(r,s){if(!xN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Pu(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:sh(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(s.serializer,i)}}if(r instanceof jw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ja)return{bytesValue:HR(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return pw(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${lp(r)}`)}(t,e)}function TN(t,e){const n={};return xR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(t,(r,s)=>{const i=Pu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function SN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof jw||t instanceof ja||t instanceof Xt||t instanceof up||t instanceof Dw)}function Vw(t,e,n){if(!SN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sy(t,e,n){if((e=ot(e))instanceof bu)return e._internalPath;if(typeof e=="string")return Fw(t,e);throw lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const w8=new RegExp("[~\\*/\\[\\]]");function Fw(t,e,n){if(e.search(w8)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bu(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(z.INVALID_ARGUMENT,a+t+l)}function CN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x8 extends bN{data(){return super.data()}}function fp(t,e){return typeof e=="string"?Fw(t,e):e instanceof bu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $w{}class Uw extends $w{}function ln(t,e,...n){let r=[];e instanceof $w&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Bw).length,a=i.filter(l=>l instanceof hp).length;if(o>1||o>0&&a>0)throw new re(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class hp extends Uw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hp(e,n,r)}_apply(e){const n=this._parse(e);return PN(e._query,n),new _s(e.firestore,e.converter,Qv(e._query,n))}_parse(e){const n=Iu(e.firestore);return function(i,o,a,l,c,f,h){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){b1(h,f);const g=[];for(const x of h)g.push(C1(l,i,x));m={arrayValue:{values:g}}}else m=C1(l,i,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||b1(h,f),m=y8(a,o,h,f==="in"||f==="not-in");return yt.create(c,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qn(t,e,n){const r=e,s=fp("where",t);return hp._create(s,r,n)}class Bw extends $w{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)PN(o,l),o=Qv(o,l)}(e._query,n),new _s(e.firestore,e.converter,Qv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zw extends Uw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zw(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new re(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(i,o)}(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ja(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function uc(t,e="asc"){const n=e,r=fp("orderBy",t);return zw._create(r,n)}class Ww extends Uw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ww(e,n,r)}_apply(e){return new _s(e.firestore,e.converter,nh(e._query,this._limit,this._limitType))}}function _8(t){return f8("limit",t),Ww._create("limit",t,"F")}function C1(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new re(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AR(e)&&n.indexOf("/")!==-1)throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!ce.isDocumentKey(r))throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KS(t,new ce(r))}if(n instanceof Xt)return KS(t,n._key);throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lp(n)}.`)}function b1(t,e){if(!Array.isArray(t)||t.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class E8{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>dt(o.doubleValue));return new Dw(i)}convertGeoPoint(e){return new jw(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const n=hi(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);Le(XR(r));const s=new $c(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||hs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AN extends bN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class af extends AN{data(e={}){return super.data(e)}}class RN{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new af(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new af(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new af(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:T8(a.type),doc:l,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function T8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){t=hn(t,Xt);const e=hn(t.firestore,Or);return c8(Cu(e),t._key).then(n=>NN(e,t,n))}class Kw extends E8{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function oi(t){t=hn(t,_s);const e=hn(t.firestore,Or),n=Cu(e),r=new Kw(e);return IN(t._query),u8(n,t._query).then(s=>new RN(e,r,t,s))}function mi(t,e,n){t=hn(t,Xt);const r=hn(t.firestore,Or),s=Hw(t.converter,e,n);return Au(r,[Ow(Iu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function Da(t,e,n,...r){t=hn(t,Xt);const s=hn(t.firestore,Or),i=Iu(s);let o;return o=typeof(e=ot(e))=="string"||e instanceof bu?EN(i,"updateDoc",t._key,e,n,r):_N(i,"updateDoc",t._key,e),Au(s,[o.toMutation(t._key,fn.exists(!0))])}function ai(t){return Au(hn(t.firestore,Or),[new rp(t._key,fn.none())])}function Kc(t,e){const n=hn(t.firestore,Or),r=xe(t),s=Hw(t.converter,e);return Au(n,[Ow(Iu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function Zn(t,...e){var n,r,s;t=ot(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||S1(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(S1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,f;if(t instanceof Xt)c=hn(t.firestore,Or),f=Jh(t._key.path),l={next:h=>{e[o]&&e[o](NN(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hn(t,_s);c=hn(h.firestore,Or),f=h._query;const m=new Kw(c);l={next:g=>{e[o]&&e[o](new RN(c,m,h,g))},error:e[o+1],complete:e[o+2]},IN(t._query)}return function(m,g,x,w){const _=new kw(w),E=new Rw(g,_,x);return m.asyncQueue.enqueueAndForget(async()=>Iw(await ah(m),E)),()=>{_.Za(),m.asyncQueue.enqueueAndForget(async()=>Pw(await ah(m),E))}}(Cu(c),f,a,l)}function Au(t,e){return function(r,s){const i=new rs;return r.asyncQueue.enqueueAndForget(async()=>J7(await l8(r),s,i)),i.promise}(Cu(t),e)}function NN(t,e,n){const r=n.docs.get(e._key),s=new Kw(t);return new AN(t,s,e._key,r,new Wl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,n,r){this._verifyNotCommitted();const s=sg(e,this._firestore),i=Hw(s.converter,n,r),o=Ow(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,fn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=sg(e,this._firestore);let o;return o=typeof(n=ot(n))=="string"||n instanceof bu?EN(this._dataReader,"WriteBatch.update",i._key,n,r,s):_N(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sg(e,this._firestore);return this._mutations=this._mutations.concat(new rp(n._key,fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sg(t,e){if((t=ot(t)).firestore!==e)throw new re(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function iy(){return new Lw("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){return Cu(t=hn(t,Or)),new S8(t,e=>Au(t,e))}(function(e,n=!0){(function(s){Xa=s})(qa),Ca(new no("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Or(new RB(r.getProvider("auth-internal")),new DB(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(c.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),si(US,"4.7.3",e),si(US,"4.7.3","esm2017")})();const C8=1;let ig=0;function b8(){return ig=(ig+1)%Number.MAX_VALUE,ig.toString()}const on={state:{toasts:[]},listeners:[],getState:()=>on.state,setState:t=>{typeof t=="function"?on.state=t(on.state):on.state={...on.state,...t},on.listeners.forEach(e=>e(on.state))},subscribe:t=>(on.listeners.push(t),()=>{on.listeners=on.listeners.filter(e=>e!==t)})},ee=({...t})=>{const e=b8(),n=s=>on.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===e?{...o,...s}:o)})),r=()=>on.setState(s=>({...s,toasts:s.toasts.filter(i=>i.id!==e)}));return on.setState(s=>({...s,toasts:[{...t,id:e,dismiss:r},...s.toasts].slice(0,C8)})),{id:e,dismiss:r,update:n}};function I8(){const[t,e]=p.useState(on.getState());return p.useEffect(()=>on.subscribe(r=>{e(r)}),[]),p.useEffect(()=>{const n=[];return t.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(s)}),()=>{n.forEach(r=>clearTimeout(r))}},[t.toasts]),{toast:ee,toasts:t.toasts}}const kN=p.createContext(null),P8=({children:t})=>{const[e,n]=p.useState(null),[r,s]=p.useState(!1),[i,o]=p.useState(!0),[a,l]=p.useState({schoolName:"",educationalStages:[],academicYear:""}),c=tn(),f=dR(),h=$n();p.useEffect(()=>{const v=xe(h,"system_config","school_system_settings"),T=Zn(v,I=>{if(I.exists()){const R=I.data();l({schoolName:R.schoolName||" ",educationalStages:R.educationalStages||[],academicYear:R.academicYear||""})}});return()=>T()},[h]),p.useEffect(()=>{const v=g6(f,async T=>{if(o(!0),T){const I=xe(h,"users",T.uid),R=Zn(I,M=>{if(M.exists()){const b=M.data();b.role?(n({uid:T.uid,email:T.email,...b}),s(!0)):Jm(f)}else Jm(f);o(!1)});return()=>R()}else n(null),s(!1),o(!1)});return()=>v()},[f,h]);const m=async(v,T)=>{o(!0);try{const I=await d6(f,v,T),R=xe(h,"users",I.user.uid),M=await Nn(R);if(M.exists()){ee({title:"تم تسجيل الدخول بنجاح!",description:"مرحباً بك مجدداً."});const b=M.data(),S=b.role==="admin"?"/admin":b.role==="teacher"?"/teacher":"/student";c(S)}else throw new Error("User data not found in database.")}catch(I){let R="فشل تسجيل الدخول. يرجى المحاولة مرة أخرى.";(I.code==="auth/user-not-found"||I.code==="auth/wrong-password"||I.code==="auth/invalid-credential")&&(R="البريد الإلكتروني أو كلمة المرور غير صحيحة."),ee({title:"فشل تسجيل الدخول",description:R,variant:"destructive"}),o(!1)}},g=async()=>{await Jm(f),n(null),s(!1),c("/login"),ee({title:"تم تسجيل الخروج",description:"نأمل رؤيتك قريباً!"})},x=v=>{l(T=>({...T,...v}))},w=async v=>{if(e){o(!0);try{const T=xe(h,"users",e.uid);await mi(T,v,{merge:!0}),n(I=>({...I,...v})),ee({title:"نجاح",description:"تم تحديث اسمك بنجاح."})}catch{ee({title:"خطأ",description:"فشل تحديث الاسم.",variant:"destructive"})}finally{o(!1)}}},_=async v=>{if(!(!f.currentUser||v===f.currentUser.email)){o(!0);try{await f6(f.currentUser,v);const T=xe(h,"users",e.uid);await mi(T,{email:v},{merge:!0}),ee({title:"نجاح",description:"تم تحديث البريد الإلكتروني بنجاح."})}catch(T){ee({title:"خطأ",description:T.code==="auth/requires-recent-login"?"هذه العملية حساسة وتتطلب إعادة تسجيل الدخول. الرجاء تسجيل الخروج ثم الدخول مرة أخرى والمحاولة مجدداً.":"فشل تحديث البريد الإلكتروني.",variant:"destructive"})}finally{o(!1)}}},E=async v=>{if(f.currentUser){o(!0);try{await h6(f.currentUser,v),ee({title:"نجاح",description:"تم تحديث كلمة المرور بنجاح."})}catch(T){ee({title:"خطأ",description:T.code==="auth/requires-recent-login"?"هذه العملية حساسة وتتطلب إعادة تسجيل الدخول. الرجاء تسجيل الخروج ثم الدخول مرة أخرى والمحاولة مجدداً.":"فشل تحديث كلمة المرور.",variant:"destructive"})}finally{o(!1)}}};return u.jsx(kN.Provider,{value:{user:e,isAuthenticated:r,loadingAuth:i,login:m,logout:g,schoolSettings:a,updateSchoolSettings:x,auth:f,updateUserProfile:w,updateUserEmailInAuth:_,updateUserPasswordInAuth:E},children:t})},Un=()=>{const t=p.useContext(kN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};var A8=typeof Element<"u",R8=typeof Map=="function",N8=typeof Set=="function",k8=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function lf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!lf(t[r],e[r]))return!1;return!0}var i;if(R8&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!lf(r.value[1],e.get(r.value[0])))return!1;return!0}if(N8&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(k8&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(A8&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!lf(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var j8=function(e,n){try{return lf(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const D8=ru(j8);var M8=function(t,e,n,r,s,i,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,i,o,a],f=0;l=new Error(e.replace(/%s/g,function(){return c[f++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},O8=M8;const I1=ru(O8);var L8=function(e,n,r,s){var i=r?r.call(s,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var f=o[c];if(!l(f))return!1;var h=e[f],m=n[f];if(i=r?r.call(s,h,m,f):void 0,i===!1||i===void 0&&h!==m)return!1}return!0};const V8=ru(L8);var jN=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(jN||{}),og={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},P1=Object.values(jN),Gw={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},F8=Object.entries(Gw).reduce((t,[e,n])=>(t[n]=e,t),{}),cr="data-rh",da={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},fa=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},$8=t=>{let e=fa(t,"title");const n=fa(t,da.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=fa(t,da.DEFAULT_TITLE);return e||r||void 0},U8=t=>fa(t,da.ON_CHANGE_CLIENT_STATE)||(()=>{}),ag=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),B8=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let i=0;i<s.length;i+=1){const a=s[i].toLowerCase();if(t.indexOf(a)!==-1&&r[a])return n.concat(r)}}return n},[]),z8=t=>console&&typeof console.warn=="function"&&console.warn(t),Al=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&z8(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const o={};i.filter(l=>{let c;const f=Object.keys(l);for(let m=0;m<f.length;m+=1){const g=f[m],x=g.toLowerCase();e.indexOf(x)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(x==="rel"&&l[x].toLowerCase()==="stylesheet")&&(c=x),e.indexOf(g)!==-1&&(g==="innerHTML"||g==="cssText"||g==="itemprop")&&(c=g)}if(!c||!l[c])return!1;const h=l[c].toLowerCase();return r[c]||(r[c]={}),o[c]||(o[c]={}),r[c][h]?!1:(o[c][h]=!0,!0)}).reverse().forEach(l=>s.push(l));const a=Object.keys(o);for(let l=0;l<a.length;l+=1){const c=a[l],f={...r[c],...o[c]};r[c]=f}return s},[]).reverse()},W8=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},H8=t=>({baseTag:B8(["href"],t),bodyAttributes:ag("bodyAttributes",t),defer:fa(t,da.DEFER),encode:fa(t,da.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ag("htmlAttributes",t),linkTags:Al("link",["rel","href"],t),metaTags:Al("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Al("noscript",["innerHTML"],t),onChangeClientState:U8(t),scriptTags:Al("script",["src","innerHTML"],t),styleTags:Al("style",["cssText"],t),title:$8(t),titleAttributes:ag("titleAttributes",t),prioritizeSeoTags:W8(t,da.PRIORITIZE_SEO_TAGS)}),DN=t=>Array.isArray(t)?t.join(""):t,K8=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},lg=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(K8(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},A1=(t,e)=>({...t,[e]:void 0}),G8=["noscript","script","style"],ay=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),MN=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),q8=(t,e,n,r)=>{const s=MN(n),i=DN(e);return s?`<${t} ${cr}="true" ${s}>${ay(i,r)}</${t}>`:`<${t} ${cr}="true">${ay(i,r)}</${t}>`},Q8=(t,e,n=!0)=>e.reduce((r,s)=>{const i=s,o=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,f)=>{const h=typeof i[f]>"u"?f:`${f}="${ay(i[f],n)}"`;return c?`${c} ${h}`:h},""),a=i.innerHTML||i.cssText||"",l=G8.indexOf(t)===-1;return`${r}<${t} ${cr}="true" ${o}${l?"/>":`>${a}</${t}>`}`},""),ON=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Gw[r];return n[s||r]=t[r],n},e),Y8=(t,e,n)=>{const r={key:e,[cr]:!0},s=ON(n,r);return[J.createElement("title",s,e)]},cf=(t,e)=>e.map((n,r)=>{const s={key:r,[cr]:!0};return Object.keys(n).forEach(i=>{const a=Gw[i]||i;if(a==="innerHTML"||a==="cssText"){const l=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:l}}else s[a]=n[i]}),J.createElement(t,s)}),Wn=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>Y8(t,e.title,e.titleAttributes),toString:()=>q8(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ON(e),toString:()=>MN(e)};default:return{toComponent:()=>cf(t,e),toString:()=>Q8(t,e,n)}}},X8=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=lg(t,og.meta),i=lg(e,og.link),o=lg(n,og.script);return{priorityMethods:{toComponent:()=>[...cf("meta",s.priority),...cf("link",i.priority),...cf("script",o.priority)],toString:()=>`${Wn("meta",s.priority,r)} ${Wn("link",i.priority,r)} ${Wn("script",o.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:o.default}},J8=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:c}=t;let{linkTags:f,metaTags:h,scriptTags:m}=t,g={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:g,linkTags:f,metaTags:h,scriptTags:m}=X8(t)),{priority:g,base:Wn("base",e,r),bodyAttributes:Wn("bodyAttributes",n,r),htmlAttributes:Wn("htmlAttributes",s,r),link:Wn("link",f,r),meta:Wn("meta",h,r),noscript:Wn("noscript",i,r),script:Wn("script",m,r),style:Wn("style",o,r),title:Wn("title",{title:a,titleAttributes:l},r)}},ly=J8,Sd=[],LN=!!(typeof window<"u"&&window.document&&window.document.createElement),cy=class{constructor(t,e){Wr(this,"instances",[]);Wr(this,"canUseDOM",LN);Wr(this,"context");Wr(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Sd:this.instances,add:t=>{(this.canUseDOM?Sd:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Sd:this.instances).indexOf(t);(this.canUseDOM?Sd:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=ly({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Z8={},VN=J.createContext(Z8),ma,FN=(ma=class extends p.Component{constructor(n){super(n);Wr(this,"helmetData");this.helmetData=new cy(this.props.context||{},ma.canUseDOM)}render(){return J.createElement(VN.Provider,{value:this.helmetData.value},this.props.children)}},Wr(ma,"canUseDOM",LN),ma),Ao=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${cr}]`),s=[].slice.call(r),i=[];let o;return e&&e.length&&e.forEach(a=>{const l=document.createElement(t);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c==="innerHTML")l.innerHTML=a.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=a.cssText:l.appendChild(document.createTextNode(a.cssText));else{const f=c,h=typeof a[f]>"u"?"":a[f];l.setAttribute(c,h)}l.setAttribute(cr,"true"),s.some((c,f)=>(o=f,l.isEqualNode(c)))?s.splice(o,1):i.push(l)}),s.forEach(a=>{var l;return(l=a.parentNode)==null?void 0:l.removeChild(a)}),i.forEach(a=>n.appendChild(a)),{oldTags:s,newTags:i}},uy=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(cr),s=r?r.split(","):[],i=[...s],o=Object.keys(e);for(const a of o){const l=e[a]||"";n.getAttribute(a)!==l&&n.setAttribute(a,l),s.indexOf(a)===-1&&s.push(a);const c=i.indexOf(a);c!==-1&&i.splice(c,1)}for(let a=i.length-1;a>=0;a-=1)n.removeAttribute(i[a]);s.length===i.length?n.removeAttribute(cr):n.getAttribute(cr)!==o.join(",")&&n.setAttribute(cr,o.join(","))},eW=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=DN(t)),uy("title",e)},R1=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:f,title:h,titleAttributes:m}=t;uy("body",r),uy("html",s),eW(h,m);const g={baseTag:Ao("base",n),linkTags:Ao("link",i),metaTags:Ao("meta",o),noscriptTags:Ao("noscript",a),scriptTags:Ao("script",c),styleTags:Ao("style",f)},x={},w={};Object.keys(g).forEach(_=>{const{newTags:E,oldTags:v}=g[_];E.length&&(x[_]=E),v.length&&(w[_]=g[_].oldTags)}),e&&e(),l(t,x,w)},Rl=null,tW=t=>{Rl&&cancelAnimationFrame(Rl),t.defer?Rl=requestAnimationFrame(()=>{R1(t,()=>{Rl=null})}):(R1(t),Rl=null)},nW=tW,N1=class extends p.Component{constructor(){super(...arguments);Wr(this,"rendered",!1)}shouldComponentUpdate(e){return!V8(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=H8(e.get().map(i=>{const o={...i.props};return delete o.context,o}));FN.canUseDOM?nW(s):ly&&(r=ly(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Cg,rW=(Cg=class extends p.Component{shouldComponentUpdate(t){return!D8(A1(this.props,"helmetData"),A1(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return I1(P1.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${P1.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),I1(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return J.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...i}=r.props,o=Object.keys(i).reduce((l,c)=>(l[F8[c]||c]=i[c],l),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,s),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,s);break;default:e=this.mapObjectTypeChildren(r,e,o,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof cy)){const s=r;r=new cy(s.context,!0),delete n.helmetData}return r?J.createElement(N1,{...n,context:r.value}):J.createElement(VN.Consumer,null,s=>J.createElement(N1,{...n,context:s}))}},Wr(Cg,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Cg);function $N(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$N(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function UN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$N(t))&&(r&&(r+=" "),r+=e);return r}function sW(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=BN(e))&&(r&&(r+=" "),r+=n);return r}function BN(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=BN(t[r]))&&(n&&(n+=" "),n+=e);return n}var qw="-";function iW(t){var e=aW(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(a){var l=a.split(qw);return l[0]===""&&l.length!==1&&l.shift(),zN(l,e)||oW(a)}function o(a,l){var c=n[a]||[];return l&&s[a]?[].concat(c,s[a]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function zN(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),s=r?zN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(qw);return(o=e.validators.find(function(a){var l=a.validator;return l(i)}))==null?void 0:o.classGroupId}}var k1=/^\[(.+)\]$/;function oW(t){if(k1.test(t)){var e=k1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function aW(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},s=cW(Object.entries(t.classGroups),n);return s.forEach(function(i){var o=i[0],a=i[1];dy(a,r,o,e)}),r}function dy(t,e,n,r){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:j1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(lW(s)){dy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var a=o[0],l=o[1];dy(l,j1(e,a),n,r)})})}function j1(t,e){var n=t;return e.split(qw).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function lW(t){return t.isThemeGetter}function cW(t,e){return e?t.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,i]}):t}function uW(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):s(o,a)}}}var WN="!";function dW(t){var e=t.separator||":",n=e.length===1,r=e[0],s=e.length;return function(o){for(var a=[],l=0,c=0,f,h=0;h<o.length;h++){var m=o[h];if(l===0){if(m===r&&(n||o.slice(h,h+s)===e)){a.push(o.slice(c,h)),c=h+s;continue}if(m==="/"){f=h;continue}}m==="["?l++:m==="]"&&l--}var g=a.length===0?o:o.substring(c),x=g.startsWith(WN),w=x?g.substring(1):g,_=f&&f>c?f-c:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:_}}}function fW(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function hW(t){return{cache:uW(t.cacheSize),splitModifiers:dW(t),...iW(t)}}var pW=/\s+/;function mW(t,e){var n=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(pW).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,f=a.baseClassName,h=a.maybePostfixModifierPosition,m=r(h?f.substring(0,h):f),g=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=r(f),!m)return{isTailwindClass:!1,originalClassName:o};g=!1}var x=fW(l).join(":"),w=c?x+WN:x;return{isTailwindClass:!0,modifierId:w,classGroupId:m,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,f=a+l;return i.has(f)?!1:(i.add(f),s(l,c).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function gW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,s,i,o=a;function a(c){var f=e[0],h=e.slice(1),m=h.reduce(function(g,x){return x(g)},f());return r=hW(m),s=r.cache.get,i=r.cache.set,o=l,l(c)}function l(c){var f=s(c);if(f)return f;var h=mW(c,r);return i(c,h),h}return function(){return o(sW.apply(null,arguments))}}function We(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var HN=/^\[(?:([a-z-]+):)?(.+)\]$/i,vW=/^\d+\/\d+$/,yW=new Set(["px","full","screen"]),wW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_W=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function sr(t){return Ki(t)||yW.has(t)||vW.test(t)||fy(t)}function fy(t){return wo(t,"length",IW)}function EW(t){return wo(t,"size",KN)}function TW(t){return wo(t,"position",KN)}function SW(t){return wo(t,"url",PW)}function Cd(t){return wo(t,"number",Ki)}function Ki(t){return!Number.isNaN(Number(t))}function CW(t){return t.endsWith("%")&&Ki(t.slice(0,-1))}function Nl(t){return D1(t)||wo(t,"number",D1)}function Ce(t){return HN.test(t)}function kl(){return!0}function Ps(t){return wW.test(t)}function bW(t){return wo(t,"",AW)}function wo(t,e,n){var r=HN.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function IW(t){return xW.test(t)}function KN(){return!1}function PW(t){return t.startsWith("url(")}function D1(t){return Number.isInteger(Number(t))}function AW(t){return _W.test(t)}function RW(){var t=We("colors"),e=We("spacing"),n=We("blur"),r=We("brightness"),s=We("borderColor"),i=We("borderRadius"),o=We("borderSpacing"),a=We("borderWidth"),l=We("contrast"),c=We("grayscale"),f=We("hueRotate"),h=We("invert"),m=We("gap"),g=We("gradientColorStops"),x=We("gradientColorStopPositions"),w=We("inset"),_=We("margin"),E=We("opacity"),v=We("padding"),T=We("saturate"),I=We("scale"),R=We("sepia"),M=We("skew"),b=We("space"),S=We("translate"),A=function(){return["auto","contain","none"]},P=function(){return["auto","hidden","clip","visible","scroll"]},k=function(){return["auto",Ce,e]},D=function(){return[Ce,e]},j=function(){return["",sr]},L=function(){return["auto",Ki,Ce]},q=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},O=function(){return["start","end","center","between","around","evenly","stretch"]},F=function(){return["","0",Ce]},W=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},H=function(){return[Ki,Cd]},X=function(){return[Ki,Ce]};return{cacheSize:500,theme:{colors:[kl],spacing:[sr],blur:["none","",Ps,Ce],brightness:H(),borderColor:[t],borderRadius:["none","","full",Ps,Ce],borderSpacing:D(),borderWidth:j(),contrast:H(),grayscale:F(),hueRotate:X(),invert:F(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[CW,fy],inset:k(),margin:k(),opacity:H(),padding:D(),saturate:H(),scale:H(),sepia:F(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Ps]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(q(),[Ce])}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nl]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Nl]}],"grid-cols":[{"grid-cols":[kl]}],"col-start-end":[{col:["auto",{span:["full",Nl]},Ce]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[kl]}],"row-start-end":[{row:["auto",{span:[Nl]},Ce]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(O())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(O(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(O(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ce,e]}],"min-w":[{"min-w":["min","max","fit",Ce,sr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ps]},Ps,Ce]}],h:[{h:[Ce,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ce,sr]}],"max-h":[{"max-h":[Ce,e,"min","max","fit"]}],"font-size":[{text:["base",Ps,fy]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cd]}],"font-family":[{font:[kl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",Ki,Cd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ce,sr]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",sr]}],"underline-offset":[{"underline-offset":["auto",Ce,sr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(q(),[TW])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EW]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SW]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[Ce,sr]}],"outline-w":[{outline:[sr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[sr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ps,bW]}],"shadow-color":[{shadow:[kl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ps,Ce]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[T]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Nl,Ce]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[sr,Cd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var NW=gW(RW);function he(...t){return NW(UN(t))}function M1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pp(...t){return e=>{let n=!1;const r=t.map(s=>{const i=M1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():M1(t[s],null)}}}}function pt(...t){return p.useCallback(pp(...t),t)}function Ma(t){const e=jW(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(MW);if(l){const c=l.props.children,f=a.map(h=>h===l?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:s,children:p.isValidElement(c)?p.cloneElement(c,void 0,f):null})}return u.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var kW=Ma("Slot");function jW(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=LW(s),a=OW(i,s.props);return s.type!==p.Fragment&&(a.ref=r?pp(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var DW=Symbol("radix.slottable");function MW(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===DW}function OW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function LW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const O1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,L1=UN,mp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return L1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=O1(f)||O1(h);return s[c][m]}),a=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(x=>{let[w,_]=x;return Array.isArray(_)?_.includes({...i,...a}[w]):{...i,...a}[w]===_})?[...c,h,m]:c},[]);return L1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},VW=mp("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=J.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?kW:"button";return u.jsx(o,{className:he(VW({variant:e,size:n,className:t})),ref:i,...s})});ne.displayName="Button";const Ae=J.forwardRef(({className:t,type:e,...n},r)=>u.jsx("input",{type:e,className:he("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ae.displayName="Input";var FW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_e=FW.reduce((t,e)=>{const n=Ma(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Qw(t,e){t&&_i.flushSync(()=>t.dispatchEvent(e))}var $W="Label",GN=p.forwardRef((t,e)=>u.jsx(_e.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));GN.displayName=$W;var qN=GN;const UW=mp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),De=J.forwardRef(({className:t,...e},n)=>u.jsx(qN,{ref:n,className:he(UW(),t),...e}));De.displayName=qN.displayName;const Ye=J.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:he("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ye.displayName="Card";const nt=J.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:he("flex flex-col space-y-1.5 p-6",t),...e}));nt.displayName="CardHeader";const Xe=J.forwardRef(({className:t,...e},n)=>u.jsx("h3",{ref:n,className:he("text-2xl font-semibold leading-none tracking-tight",t),...e}));Xe.displayName="CardTitle";const kn=J.forwardRef(({className:t,...e},n)=>u.jsx("p",{ref:n,className:he("text-sm text-muted-foreground",t),...e}));kn.displayName="CardDescription";const st=J.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:he("p-6 pt-0",t),...e}));st.displayName="CardContent";const jn=J.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:he("flex items-center p-6 pt-0",t),...e}));jn.displayName="CardFooter";var BW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ee=(t,e)=>{const n=p.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>p.createElement("svg",{ref:c,...BW,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${zW(t)}`,...l},[...e.map(([f,h])=>p.createElement(f,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},WW=Ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Lr=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),HW=Ee("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]),KW=Ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),gp=Ee("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h11V6H11a2 2 0 0 0-2 2v12",key:"1owzki"}]]),GW=Ee("BookUser",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}]]),Yw=Ee("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),QN=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Xw=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qW=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),QW=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),YW=Ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Jw=Ee("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),YN=Ee("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),XW=Ee("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),XN=Ee("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),Zw=Ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ex=Ee("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),JW=Ee("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),ZW=Ee("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),eH=Ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),tH=Ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),nH=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),rH=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),sH=Ee("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),tx=Ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),V1=Ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Gc=Ee("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),iH=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),lo=Ee("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),ss=Ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),JN=Ee("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),ch=Ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ZN=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),er=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),oH=Ee("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),uh=Ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ek=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tk=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),vp=Ee("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),nk=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jl=[{label:"راسلنا على واتساب",link:"https://wa.me/201060607654",color:"bg-green-600",icon:u.jsx(sH,{className:"w-4 h-4 mr-2 text-white"})},{label:"اتصل بنا: 01060607654",link:"tel:01060607654",color:"bg-blue-600",icon:u.jsx(iH,{className:"w-4 h-4 mr-2 text-white"})},{label:"صفحتنا على فيسبوك",link:"https://web.facebook.com/maharet.edu",color:"bg-primary",icon:u.jsx(XW,{className:"w-4 h-4 mr-2 text-white"})}],aH=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),{login:s,loadingAuth:i,schoolSettings:o,isAuthenticated:a,user:l}=Un(),[c,f]=p.useState(""),h=tn(),m=Ti(),[g,x]=p.useState(0);p.useEffect(()=>{o!=null&&o.schoolName&&f(o.schoolName)},[o]),p.useEffect(()=>{var _,E;if(!i&&a&&l){const v=((E=(_=m.state)==null?void 0:_.from)==null?void 0:E.pathname)||(l.role==="admin"?"/admin":l.role==="teacher"?"/teacher":"/student");h(v,{replace:!0})}},[a,i,l,h,m.state]),p.useEffect(()=>{const _=setInterval(()=>{x(E=>(E+1)%jl.length)},4e3);return()=>clearInterval(_)},[]);const w=async _=>{if(_.preventDefault(),!i)try{const E=t.trim().toLowerCase(),v=E.includes("@")?E:`${E}@myapp.com`;await s(v,n)}catch{alert("بيانات الدخول غير صحيحة")}};return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/10 via-background to-secondary/10 p-4",children:[u.jsx(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:u.jsxs(Ye,{className:"w-full max-w-md shadow-2xl",children:[u.jsxs(nt,{className:"text-center",children:[u.jsx(Ne.div,{className:"mx-auto mb-4",animate:{rotateY:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:u.jsx(JN,{className:"w-16 h-16 text-primary"})}),u.jsxs(Xe,{className:"text-3xl font-bold",children:["مرحباً بك في نظام ",c]}),u.jsx(kn,{children:"الرجاء تسجيل الدخول للمتابعة"})]}),u.jsx(st,{children:u.jsxs("form",{onSubmit:w,className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(De,{htmlFor:"identifier",children:" الكود أو البريد"}),u.jsx(Ae,{id:"identifier",type:"text",placeholder:"الكود أو البريد",value:t,onChange:_=>e(_.target.value),required:!0,className:"text-lg"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(De,{htmlFor:"password",children:"كلمة المرور"}),u.jsx(Ae,{id:"password",type:"password",placeholder:"ادخل كلمة المرور",value:n,onChange:_=>r(_.target.value),required:!0,className:"text-lg"})]}),u.jsx(ne,{type:"submit",className:"w-full text-lg py-3 bg-primary hover:bg-primary/90",disabled:i,children:i?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-primary-foreground"}):u.jsxs(u.Fragment,{children:[u.jsx(tH,{className:"mr-2 ml-0 h-5 w-5"}),"تسجيل الدخول"]})})]})}),u.jsxs(jn,{className:"flex flex-col items-center text-center text-sm text-muted-foreground mt-2 space-y-1",children:[u.jsx("p",{className:"font-semibold text-xs text-muted-foreground",children:"جميع الحقوق محفوظة © 2025"}),u.jsx("p",{className:"font-semibold text-xs text-muted-foreground",children:"تصميم وتطوير بواسطة أ/ محمود جاد مصطفى"})]})]})}),u.jsxs("div",{className:"mt-10",children:[u.jsx("p",{className:"text-center text-sm font-semibold text-muted-foreground mb-2",children:"📢  للتواصل مع إدارة الموقع للحصول علي الكود والرقم السري"}),u.jsx("div",{className:"w-full max-w-md",children:u.jsx("div",{className:`text-white text-sm py-2 px-4 rounded-md text-center ${jl[g].color}`,children:u.jsxs("a",{href:jl[g].link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center hover:underline",children:[jl[g].icon,jl[g].label]})})})]})]})},lH=()=>{const t=tn(),{user:e,schoolSettings:n}=Un(),r=[{title:"إعدادات النظام",icon:u.jsx(ZN,{}),path:"/admin/settings",description:"إدارة اسم المدرسة والمراحل الدراسية"},{title:"إدارة المعلمين",icon:u.jsx(GW,{}),path:"/admin/manage-teachers",description:"إضافة وتعديل بيانات المعلمين"},{title:"إدارة الطلاب",icon:u.jsx(JW,{}),path:"/admin/manage-students",description:"إضافة وتعديل بيانات الطلاب"},{title:"إدارة المناهج",icon:u.jsx(gp,{}),path:"/admin/curriculum",description:"تحديد المواد والمعلمين لكل مرحلة"},{title:"الغرف الافتراضية",icon:u.jsx(vp,{}),path:"/admin/online-rooms",description:"إدارة روابط الحصص الأونلاين"},{title:"إرسال إشعارات",icon:u.jsx(ch,{}),path:"/admin/notifications",description:"إرسال تنبيهات للمعلمين والطلاب"}];return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("h1",{className:"text-3xl font-bold text-foreground mb-2",children:["لوحة تحكم المدير - ",(n==null?void 0:n.schoolName)||" "]}),u.jsxs("p",{className:"text-muted-foreground mb-8",children:["مرحباً بك، ",(e==null?void 0:e.name)||"مدير النظام","."]})]}),u.jsx(Ne.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:"hidden",animate:"visible",variants:{visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1}},hidden:{opacity:0}},children:r.map((s,i)=>u.jsx(Ne.div,{variants:{visible:{opacity:1,y:0},hidden:{opacity:0,y:20}},whileHover:{y:-5,scale:1.03},className:"h-full",children:u.jsxs(Ye,{onClick:()=>t(s.path),className:"shadow-lg hover:shadow-primary/20 transition-all duration-300 cursor-pointer h-full flex flex-col",children:[u.jsxs(nt,{className:"flex flex-row items-center justify-between pb-2",children:[u.jsx(Xe,{className:"text-lg font-bold",children:s.title}),u.jsx("div",{className:"p-2 rounded-full bg-primary/10 text-primary",children:J.cloneElement(s.icon,{size:24})})]}),u.jsx(st,{className:"flex-grow",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})})]})},i))})]})};var cH="Separator",F1="horizontal",uH=["horizontal","vertical"],rk=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=F1,...s}=t,i=dH(r)?r:F1,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return u.jsx(_e.div,{"data-orientation":i,...a,...s,ref:e})});rk.displayName=cH;function dH(t){return uH.includes(t)}var sk=rk;const nx=J.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>u.jsx(sk,{ref:s,decorative:n,orientation:e,className:he("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));nx.displayName=sk.displayName;function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function fH(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function vr(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:m,children:g,...x}=h,w=((E=m==null?void 0:m[t])==null?void 0:E[l])||a,_=p.useMemo(()=>x,Object.values(x));return u.jsx(w.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var w;const g=((w=m==null?void 0:m[t])==null?void 0:w[l])||a,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,hH(s,...e)]}function hH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Ln=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},pH=Eh[" useId ".trim().toString()]||(()=>{}),mH=0;function is(t){const[e,n]=p.useState(pH());return Ln(()=>{t||n(r=>r??String(mH++))},[t]),t||(e?`radix-${e}`:"")}var gH=Eh[" useInsertionEffect ".trim().toString()]||Ln;function Pi({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=vH({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const f=p.useRef(t!==void 0);p.useEffect(()=>{const h=f.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const c=p.useCallback(f=>{var h;if(a){const m=yH(f)?f(t):f;m!==t&&((h=o.current)==null||h.call(o,m))}else i(f)},[a,t,i,o]);return[l,c]}function vH({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),i=p.useRef(e);return gH(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function yH(t){return typeof t=="function"}function Sn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function wH(t,e=globalThis==null?void 0:globalThis.document){const n=Sn(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var xH="DismissableLayer",hy="dismissableLayer.update",_H="dismissableLayer.pointerDownOutside",EH="dismissableLayer.focusOutside",$1,ik=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yp=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=p.useContext(ik),[f,h]=p.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),x=pt(e,b=>h(b)),w=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(_),v=f?w.indexOf(f):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,I=v>=E,R=SH(b=>{const S=b.target,A=[...c.branches].some(P=>P.contains(S));!I||A||(s==null||s(b),o==null||o(b),b.defaultPrevented||a==null||a())},m),M=CH(b=>{const S=b.target;[...c.branches].some(P=>P.contains(S))||(i==null||i(b),o==null||o(b),b.defaultPrevented||a==null||a())},m);return wH(b=>{v===c.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},m),p.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&($1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),U1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$1)}},[f,m,n,c]),p.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),U1())},[f,c]),p.useEffect(()=>{const b=()=>g({});return document.addEventListener(hy,b),()=>document.removeEventListener(hy,b)},[]),u.jsx(_e.div,{...l,ref:x,style:{pointerEvents:T?I?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,M.onFocusCapture),onBlurCapture:le(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,R.onPointerDownCapture)})});yp.displayName=xH;var TH="DismissableLayerBranch",ok=p.forwardRef((t,e)=>{const n=p.useContext(ik),r=p.useRef(null),s=pt(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),u.jsx(_e.div,{...t,ref:s})});ok.displayName=TH;function SH(t,e=globalThis==null?void 0:globalThis.document){const n=Sn(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){ak(_H,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function CH(t,e=globalThis==null?void 0:globalThis.document){const n=Sn(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&ak(EH,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function U1(){const t=new CustomEvent(hy);document.dispatchEvent(t)}function ak(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qw(s,i):s.dispatchEvent(i)}var bH=yp,IH=ok,cg="focusScope.autoFocusOnMount",ug="focusScope.autoFocusOnUnmount",B1={bubbles:!1,cancelable:!0},PH="FocusScope",rx=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=Sn(s),f=Sn(i),h=p.useRef(null),m=pt(e,w=>l(w)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(T){if(g.paused||!a)return;const I=T.target;a.contains(I)?h.current=I:Rs(h.current,{select:!0})},_=function(T){if(g.paused||!a)return;const I=T.relatedTarget;I!==null&&(a.contains(I)||Rs(h.current,{select:!0}))},E=function(T){if(document.activeElement===document.body)for(const R of T)R.removedNodes.length>0&&Rs(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const v=new MutationObserver(E);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),v.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){W1.add(g);const w=document.activeElement;if(!a.contains(w)){const E=new CustomEvent(cg,B1);a.addEventListener(cg,c),a.dispatchEvent(E),E.defaultPrevented||(AH(DH(lk(a)),{select:!0}),document.activeElement===w&&Rs(a))}return()=>{a.removeEventListener(cg,c),setTimeout(()=>{const E=new CustomEvent(ug,B1);a.addEventListener(ug,f),a.dispatchEvent(E),E.defaultPrevented||Rs(w??document.body,{select:!0}),a.removeEventListener(ug,f),W1.remove(g)},0)}}},[a,c,f,g]);const x=p.useCallback(w=>{if(!n&&!r||g.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(_&&E){const v=w.currentTarget,[T,I]=RH(v);T&&I?!w.shiftKey&&E===I?(w.preventDefault(),n&&Rs(T,{select:!0})):w.shiftKey&&E===T&&(w.preventDefault(),n&&Rs(I,{select:!0})):E===v&&w.preventDefault()}},[n,r,g.paused]);return u.jsx(_e.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});rx.displayName=PH;function AH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Rs(r,{select:e}),document.activeElement!==n)return}function RH(t){const e=lk(t),n=z1(e,t),r=z1(e.reverse(),t);return[n,r]}function lk(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function z1(t,e){for(const n of t)if(!NH(n,{upTo:e}))return n}function NH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function kH(t){return t instanceof HTMLInputElement&&"select"in t}function Rs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&kH(t)&&e&&t.select()}}var W1=jH();function jH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=H1(t,e),t.unshift(e)},remove(e){var n;t=H1(t,e),(n=t[0])==null||n.resume()}}}function H1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function DH(t){return t.filter(e=>e.tagName!=="A")}var MH="Portal",wp=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);Ln(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?$I.createPortal(u.jsx(_e.div,{...r,ref:e}),o):null});wp.displayName=MH;function OH(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var yr=t=>{const{present:e,children:n}=t,r=LH(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=pt(r.ref,VH(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};yr.displayName="Presence";function LH(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=OH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=bd(r.current);i.current=a==="mounted"?c:"none"},[a]),Ln(()=>{const c=r.current,f=s.current;if(f!==t){const m=i.current,g=bd(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ln(()=>{if(e){let c;const f=e.ownerDocument.defaultView??window,h=g=>{const w=bd(r.current).includes(g.animationName);if(g.target===e&&w&&(l("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=g=>{g.target===e&&(i.current=bd(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{f.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function bd(t){return(t==null?void 0:t.animationName)||"none"}function VH(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var dg=0;function ck(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??K1()),document.body.insertAdjacentElement("beforeend",t[1]??K1()),dg++,()=>{dg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),dg--}},[])}function K1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var dc="right-scroll-bar-position",fc="width-before-scroll-bar",FH="with-scroll-bars-hidden",$H="--removed-body-scroll-bar-size";function fg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function UH(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var BH=typeof window<"u"?p.useLayoutEffect:p.useEffect,G1=new WeakMap;function uk(t,e){var n=UH(e||null,function(r){return t.forEach(function(s){return fg(s,r)})});return BH(function(){var r=G1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||fg(a,null)}),i.forEach(function(a){s.has(a)||fg(a,o)})}G1.set(n,t)},[t]),n}function zH(t){return t}function WH(t,e){e===void 0&&(e=zH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return s}function dk(t){t===void 0&&(t={});var e=WH(null);return e.options=qt({async:!0,ssr:!1},t),e}var fk=function(t){var e=t.sideCar,n=Qa(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,qt({},n))};fk.isSideCarExport=!0;function hk(t,e){return t.useMedium(e),fk}var pk=dk(),hg=function(){},xp=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:hg,onWheelCapture:hg,onTouchMoveCapture:hg}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,f=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,x=t.noIsolation,w=t.inert,_=t.allowPinchZoom,E=t.as,v=E===void 0?"div":E,T=t.gapMode,I=Qa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,M=uk([n,e]),b=qt(qt({},I),s);return p.createElement(p.Fragment,null,f&&p.createElement(R,{sideCar:pk,removeScrollBar:c,shards:h,noRelative:g,noIsolation:x,inert:w,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:T}),o?p.cloneElement(p.Children.only(a),qt(qt({},b),{ref:M})):p.createElement(v,qt({},b,{className:l,ref:M}),a))});xp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xp.classNames={fullWidth:fc,zeroRight:dc};var q1,HH=function(){if(q1)return q1;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=HH();return e&&t.setAttribute("nonce",e),t}function GH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function qH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var QH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=KH())&&(GH(e,n),qH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YH=function(){var t=QH();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},sx=function(){var t=YH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},XH={left:0,top:0,right:0,gap:0},pg=function(t){return parseInt(t||"",10)||0},JH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[pg(n),pg(r),pg(s)]},ZH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return XH;var e=JH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},eK=sx(),ha="data-scroll-locked",tK=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(FH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ha,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(fc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dc," .").concat(dc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fc," .").concat(fc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ha,`] {
    `).concat($H,": ").concat(a,`px;
  }
`)},Q1=function(){var t=parseInt(document.body.getAttribute(ha)||"0",10);return isFinite(t)?t:0},nK=function(){p.useEffect(function(){return document.body.setAttribute(ha,(Q1()+1).toString()),function(){var t=Q1()-1;t<=0?document.body.removeAttribute(ha):document.body.setAttribute(ha,t.toString())}},[])},mk=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;nK();var i=p.useMemo(function(){return ZH(s)},[s]);return p.createElement(eK,{styles:tK(i,!e,s,n?"":"!important")})},py=!1;if(typeof window<"u")try{var Id=Object.defineProperty({},"passive",{get:function(){return py=!0,!0}});window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{py=!1}var Ro=py?{passive:!1}:!1,rK=function(t){return t.tagName==="TEXTAREA"},gk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!rK(t)&&n[e]==="visible")},sK=function(t){return gk(t,"overflowY")},iK=function(t){return gk(t,"overflowX")},Y1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=vk(t,r);if(s){var i=yk(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},aK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},vk=function(t,e){return t==="v"?sK(e):iK(e)},yk=function(t,e){return t==="v"?oK(e):aK(e)},lK=function(t,e){return t==="h"&&e==="rtl"?-1:1},cK=function(t,e,n,r,s){var i=lK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,f=o>0,h=0,m=0;do{if(!a)break;var g=yk(t,a),x=g[0],w=g[1],_=g[2],E=w-_-i*x;(x||E)&&vk(t,a)&&(h+=E,m+=x);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(f&&(s&&Math.abs(h)<1||!s&&o>h)||!f&&(s&&Math.abs(m)<1||!s&&-o>m))&&(c=!0),c},Pd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},X1=function(t){return[t.deltaX,t.deltaY]},J1=function(t){return t&&"current"in t?t.current:t},uK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},dK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},fK=0,No=[];function hK(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(fK++)[0],i=p.useState(sx)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=AA([t.lockRef.current],(t.shards||[]).map(J1),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var E=Pd(w),v=n.current,T="deltaX"in w?w.deltaX:v[0]-E[0],I="deltaY"in w?w.deltaY:v[1]-E[1],R,M=w.target,b=Math.abs(T)>Math.abs(I)?"h":"v";if("touches"in w&&b==="h"&&M.type==="range")return!1;var S=Y1(b,M);if(!S)return!0;if(S?R=b:(R=b==="v"?"h":"v",S=Y1(b,M)),!S)return!1;if(!r.current&&"changedTouches"in w&&(T||I)&&(r.current=R),!R)return!0;var A=r.current||R;return cK(A,_,w,A==="h"?T:I,!0)},[]),l=p.useCallback(function(w){var _=w;if(!(!No.length||No[No.length-1]!==i)){var E="deltaY"in _?X1(_):Pd(_),v=e.current.filter(function(R){return R.name===_.type&&(R.target===_.target||_.target===R.shadowParent)&&uK(R.delta,E)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var T=(o.current.shards||[]).map(J1).filter(Boolean).filter(function(R){return R.contains(_.target)}),I=T.length>0?a(_,T[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),c=p.useCallback(function(w,_,E,v){var T={name:w,delta:_,target:E,should:v,shadowParent:pK(E)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(I){return I!==T})},1)},[]),f=p.useCallback(function(w){n.current=Pd(w),r.current=void 0},[]),h=p.useCallback(function(w){c(w.type,X1(w),w.target,a(w,t.lockRef.current))},[]),m=p.useCallback(function(w){c(w.type,Pd(w),w.target,a(w,t.lockRef.current))},[]);p.useEffect(function(){return No.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ro),document.addEventListener("touchmove",l,Ro),document.addEventListener("touchstart",f,Ro),function(){No=No.filter(function(w){return w!==i}),document.removeEventListener("wheel",l,Ro),document.removeEventListener("touchmove",l,Ro),document.removeEventListener("touchstart",f,Ro)}},[]);var g=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:dK(s)}):null,g?p.createElement(mk,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function pK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const mK=hk(pk,hK);var wk=p.forwardRef(function(t,e){return p.createElement(xp,qt({},t,{ref:e,sideCar:mK}))});wk.classNames=xp.classNames;const xk=wk;var gK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ko=new WeakMap,Ad=new WeakMap,Rd={},mg=0,_k=function(t){return t&&(t.host||_k(t.parentNode))},vK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_k(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},yK=function(t,e,n,r){var s=vK(e,Array.isArray(t)?t:[t]);Rd[n]||(Rd[n]=new WeakMap);var i=Rd[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var f=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))f(m);else try{var g=m.getAttribute(r),x=g!==null&&g!=="false",w=(ko.get(m)||0)+1,_=(i.get(m)||0)+1;ko.set(m,w),i.set(m,_),o.push(m),w===1&&x&&Ad.set(m,!0),_===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return f(e),a.clear(),mg++,function(){o.forEach(function(h){var m=ko.get(h)-1,g=i.get(h)-1;ko.set(h,m),i.set(h,g),m||(Ad.has(h)||h.removeAttribute(r),Ad.delete(h)),g||h.removeAttribute(n)}),mg--,mg||(ko=new WeakMap,ko=new WeakMap,Ad=new WeakMap,Rd={})}},ix=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=e||gK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),yK(r,s,n,"aria-hidden")):function(){return null}},_p="Dialog",[Ek,RJ]=vr(_p),[wK,wr]=Ek(_p),Tk=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[c,f]=Pi({prop:r,defaultProp:s??!1,onChange:i,caller:_p});return u.jsx(wK,{scope:e,triggerRef:a,contentRef:l,contentId:is(),titleId:is(),descriptionId:is(),open:c,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};Tk.displayName=_p;var Sk="DialogTrigger",Ck=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(Sk,n),i=pt(e,s.triggerRef);return u.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":lx(s.open),...r,ref:i,onClick:le(t.onClick,s.onOpenToggle)})});Ck.displayName=Sk;var ox="DialogPortal",[xK,bk]=Ek(ox,{forceMount:void 0}),Ik=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=wr(ox,e);return u.jsx(xK,{scope:e,forceMount:n,children:p.Children.map(r,o=>u.jsx(yr,{present:n||i.open,children:u.jsx(wp,{asChild:!0,container:s,children:o})}))})};Ik.displayName=ox;var dh="DialogOverlay",Pk=p.forwardRef((t,e)=>{const n=bk(dh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wr(dh,t.__scopeDialog);return i.modal?u.jsx(yr,{present:r||i.open,children:u.jsx(EK,{...s,ref:e})}):null});Pk.displayName=dh;var _K=Ma("DialogOverlay.RemoveScroll"),EK=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(dh,n);return u.jsx(xk,{as:_K,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(_e.div,{"data-state":lx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),co="DialogContent",Ak=p.forwardRef((t,e)=>{const n=bk(co,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wr(co,t.__scopeDialog);return u.jsx(yr,{present:r||i.open,children:i.modal?u.jsx(TK,{...s,ref:e}):u.jsx(SK,{...s,ref:e})})});Ak.displayName=co;var TK=p.forwardRef((t,e)=>{const n=wr(co,t.__scopeDialog),r=p.useRef(null),s=pt(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return ix(i)},[]),u.jsx(Rk,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault())})}),SK=p.forwardRef((t,e)=>{const n=wr(co,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return u.jsx(Rk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Rk=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=wr(co,n),l=p.useRef(null),c=pt(e,l);return ck(),u.jsxs(u.Fragment,{children:[u.jsx(rx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(yp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":lx(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(CK,{titleId:a.titleId}),u.jsx(IK,{contentRef:l,descriptionId:a.descriptionId})]})]})}),ax="DialogTitle",Nk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(ax,n);return u.jsx(_e.h2,{id:s.titleId,...r,ref:e})});Nk.displayName=ax;var kk="DialogDescription",jk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(kk,n);return u.jsx(_e.p,{id:s.descriptionId,...r,ref:e})});jk.displayName=kk;var Dk="DialogClose",Mk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wr(Dk,n);return u.jsx(_e.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});Mk.displayName=Dk;function lx(t){return t?"open":"closed"}var Ok="DialogTitleWarning",[NJ,Lk]=fH(Ok,{contentName:co,titleName:ax,docsSlug:"dialog"}),CK=({titleId:t})=>{const e=Lk(Ok),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},bK="DialogDescriptionWarning",IK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Lk(bK).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},PK=Tk,AK=Ck,RK=Ik,Vk=Pk,Fk=Ak,$k=Nk,Uk=jk,Bk=Mk;const qc=PK,NK=AK,kK=RK,jK=Bk,zk=J.forwardRef(({className:t,...e},n)=>u.jsx(Vk,{ref:n,className:he("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));zk.displayName=Vk.displayName;const Oa=J.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(kK,{children:[u.jsx(zk,{}),u.jsxs(Fk,{ref:r,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,u.jsxs(Bk,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(nk,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oa.displayName=Fk.displayName;const La=({className:t,...e})=>u.jsx("div",{className:he("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});La.displayName="DialogHeader";const Va=({className:t,...e})=>u.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Va.displayName="DialogFooter";const Fa=J.forwardRef(({className:t,...e},n)=>u.jsx($k,{ref:n,className:he("text-lg font-semibold leading-none tracking-tight",t),...e}));Fa.displayName=$k.displayName;const Ep=J.forwardRef(({className:t,...e},n)=>u.jsx(Uk,{ref:n,className:he("text-sm text-muted-foreground",t),...e}));Ep.displayName=Uk.displayName;const DK=()=>{const{user:t}=Un(),e=tn(),[n,r]=p.useState([]),[s,i]=p.useState([]),[o,a]=p.useState(!0),l=$n(),[c,f]=p.useState(!1),[h,m]=p.useState(null),[g,x]=p.useState({textbooks:[],summaries:[],youtube:[],exams:[]}),[w,_]=p.useState({textbooks:{title:"",url:""},summaries:{title:"",url:""},youtube:{title:"",url:""},exams:{title:"",url:""}}),[E,v]=p.useState(!1);p.useEffect(()=>{if(!(t!=null&&t.uid)){a(!1);return}a(!0);const P=Fe(l,"curriculum"),k=Zn(P,async D=>{try{const j=xe(l,"system_config","school_system_settings"),L=await Nn(j),q=L.exists()?L.data().educationalStages||[]:[],$=[];D.forEach(B=>{const O=B.id,F=B.data(),W=q.find(H=>H.id===O);["semesterOneSubjects","semesterTwoSubjects"].forEach(H=>{(F[H]||[]).forEach(te=>{te.teacherId===t.uid&&$.push({...te,stageId:O,semesterKey:H,stageName:W?W.name:"مرحلة غير معروفة",semesterName:H==="semesterOneSubjects"?"الفصل الأول":"الفصل الثاني"})})})}),r($)}catch(j){console.error("Error processing curriculum data:",j),ee({title:"خطأ",description:"فشل في معالجة بيانات المناهج.",variant:"destructive"})}finally{a(!1)}});return()=>k()},[l,t==null?void 0:t.uid]);const T=p.useMemo(()=>[...new Set(n.map(P=>P.stageId))],[n]);p.useEffect(()=>{if(T.length===0){i([]);return}const P=ln(Fe(l,"online_classrooms"),qn("stageId","in",T)),k=Zn(P,D=>{i(D.docs.map(j=>({id:j.id,...j.data()})))});return()=>k()},[l,T]);const I=P=>{m(P),x(P.content||{textbooks:[],summaries:[],youtube:[],exams:[]}),f(!0)},R=(P,k,D)=>{_(j=>({...j,[P]:{...j[P],[k]:D}}))},M=P=>{const k=w[P];if(!k.url.trim()||!k.title.trim()){ee({title:"خطأ",description:"الرجاء إدخال العنوان والرابط.",variant:"destructive"});return}x(D=>({...D,[P]:[...D[P]||[],{id:`new_${Date.now()}`,...k}]})),_(D=>({...D,[P]:{title:"",url:""}}))},b=(P,k)=>{x(D=>({...D,[P]:(D[P]||[]).filter((j,L)=>L!==k)}))},S=async()=>{if(h){v(!0);try{const P=xe(l,"curriculum",h.stageId),k=await Nn(P);if(!k.exists())throw new Error("Curriculum document not found!");const L=(k.data()[h.semesterKey]||[]).map(q=>q.id===h.id?{...q,content:g}:q);await mi(P,{[h.semesterKey]:L},{merge:!0}),ee({title:"نجاح",description:"تم تحديث المحتوى بنجاح."}),f(!1)}catch(P){console.error("Error updating content:",P),ee({title:"خطأ",description:`فشل تحديث المحتوى. ${P.message}`,variant:"destructive"})}finally{v(!1)}}},A=[{label:"الرسائل",icon:u.jsx(tx,{}),action:()=>e("/chat")}];return o?u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"})}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"لوحة تحكم المعلم"}),u.jsxs("p",{className:"text-muted-foreground",children:["مرحباً بك، ",t==null?void 0:t.name,"."]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs(Ye,{className:"shadow-lg",children:[u.jsxs(nt,{children:[u.jsx(Xe,{children:"المواد الدراسية والمحتوى التعليمي"}),u.jsx(kn,{children:"عرض وتعديل المحتوى التعليمي للمواد المسندة إليك."})]}),u.jsx(st,{children:n.length>0?u.jsx("div",{className:"space-y-4",children:n.map(P=>u.jsx(Ye,{className:"bg-muted/30",children:u.jsx(nt,{children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx(Xe,{className:"text-xl",children:P.name}),u.jsxs(kn,{children:[P.stageName," - ",P.semesterName]})]}),u.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>I(P),children:[u.jsx(XN,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," إدارة المحتوى"]})]})})},P.id))}):u.jsx("p",{className:"text-muted-foreground text-center p-4",children:"لم يتم إسناد أي مواد دراسية لك بعد."})})]}),u.jsxs(Ye,{className:"shadow-lg",children:[u.jsx(nt,{children:u.jsx(Xe,{children:"إجراءات سريعة"})}),u.jsx(st,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map((P,k)=>u.jsx(Ne.div,{whileHover:{y:-5},className:"h-full",children:u.jsxs(Ye,{onClick:P.action,className:"shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer h-full flex flex-col items-center justify-center p-4 text-center",children:[u.jsx("div",{className:"p-3 mb-2 rounded-full bg-primary/10 text-primary",children:J.cloneElement(P.icon,{size:28})}),u.jsx("p",{className:"font-semibold text-sm text-foreground",children:P.label})]})},k))})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs(Ye,{className:"shadow-lg sticky top-24",children:[u.jsxs(nt,{children:[u.jsxs(Xe,{className:"flex items-center",children:[u.jsx(vp,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 text-primary"})," الغرف الافتراضية"]}),u.jsx(kn,{children:"روابط الحصص الأونلاين المباشرة."})]}),u.jsx(st,{children:s.length>0?u.jsx("div",{className:"space-y-3",children:s.map(P=>u.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",children:u.jsxs(Ne.div,{whileHover:{scale:1.05},className:"p-4 rounded-lg bg-primary/10 hover:bg-primary/20 transition-colors cursor-pointer",children:[u.jsx("p",{className:"font-bold text-primary",children:P.name}),u.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:["انقر هنا للانضمام",u.jsx(YN,{size:14,className:"mr-2 rtl:mr-0 rtl:ml-2"})]})]})},P.id))}):u.jsx("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد غرف افتراضية متاحة حالياً للمراحل التي تدرسها."})})]})})]}),u.jsx(Ci,{children:c&&h&&u.jsx(qc,{open:c,onOpenChange:f,children:u.jsxs(Oa,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(La,{children:[u.jsxs(Fa,{children:["إدارة محتوى: ",h.name]}),u.jsx(Ep,{children:"أضف روابط الكتب، الملخصات، الاختبارات، والفيديوهات لهذه المادة."})]}),u.jsx("div",{className:"space-y-4 py-4",children:[{type:"textbooks",title:"الكتب المدرسية",icon:u.jsx(Yw,{})},{type:"summaries",title:"الملخصات",icon:u.jsx(Zw,{})},{type:"exams",title:"الاختبارات",icon:u.jsx(Jw,{})},{type:"youtube",title:"شروحات يوتيوب",icon:u.jsx(ex,{})}].map(P=>u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[P.icon,u.jsx("span",{className:"mr-2 rtl:mr-0 rtl:ml-2",children:P.title})]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-2",children:(g[P.type]||[]).map((k,D)=>u.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-medium",children:k.title}),u.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary truncate block",children:k.url})]}),u.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>b(P.type,D),children:u.jsx(er,{className:"h-4 w-4 text-destructive"})})]},k.id||D))}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx(Ae,{placeholder:"عنوان الرابط",value:w[P.type].title,onChange:k=>R(P.type,"title",k.target.value)}),u.jsx(Ae,{placeholder:"الرابط (URL)",value:w[P.type].url,onChange:k=>R(P.type,"url",k.target.value)}),u.jsx(ne,{onClick:()=>M(P.type),children:u.jsx(lo,{className:"h-4 w-4"})})]}),u.jsx(nx,{className:"my-4"})]},P.type))}),u.jsxs(Va,{children:[u.jsx(ne,{variant:"outline",onClick:()=>f(!1),children:"إلغاء"}),u.jsx(ne,{onClick:S,disabled:E,children:E?"جاري الحفظ...":"حفظ المحتوى"})]})]})})})]})};function Tp(t){const e=t+"CollectionProvider",[n,r]=vr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:E}=w,v=J.useRef(null),T=J.useRef(new Map).current;return u.jsx(s,{scope:_,itemMap:T,collectionRef:v,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=Ma(a),c=J.forwardRef((w,_)=>{const{scope:E,children:v}=w,T=i(a,E),I=pt(_,T.collectionRef);return u.jsx(l,{ref:I,children:v})});c.displayName=a;const f=t+"CollectionItemSlot",h="data-radix-collection-item",m=Ma(f),g=J.forwardRef((w,_)=>{const{scope:E,children:v,...T}=w,I=J.useRef(null),R=pt(_,I),M=i(f,E);return J.useEffect(()=>(M.itemMap.set(I,{ref:I,...T}),()=>void M.itemMap.delete(I))),u.jsx(m,{[h]:"",ref:R,children:v})});g.displayName=f;function x(w){const _=i(t+"CollectionConsumer",w);return J.useCallback(()=>{const v=_.collectionRef.current;if(!v)return[];const T=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((M,b)=>T.indexOf(M.ref.current)-T.indexOf(b.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},x,r]}var Sp="Collapsible",[MK,Wk]=vr(Sp),[OK,cx]=MK(Sp),Hk=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l,c]=Pi({prop:r,defaultProp:s??!1,onChange:o,caller:Sp});return u.jsx(OK,{scope:n,disabled:i,contentId:is(),open:l,onOpenToggle:p.useCallback(()=>c(f=>!f),[c]),children:u.jsx(_e.div,{"data-state":dx(l),"data-disabled":i?"":void 0,...a,ref:e})})});Hk.displayName=Sp;var Kk="CollapsibleTrigger",Gk=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=cx(Kk,n);return u.jsx(_e.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":dx(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:le(t.onClick,s.onOpenToggle)})});Gk.displayName=Kk;var ux="CollapsibleContent",qk=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cx(ux,t.__scopeCollapsible);return u.jsx(yr,{present:n||s.open,children:({present:i})=>u.jsx(LK,{...r,ref:e,present:i})})});qk.displayName=ux;var LK=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=cx(ux,n),[a,l]=p.useState(r),c=p.useRef(null),f=pt(e,c),h=p.useRef(0),m=h.current,g=p.useRef(0),x=g.current,w=o.open||a,_=p.useRef(w),E=p.useRef(void 0);return p.useEffect(()=>{const v=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(v)},[]),Ln(()=>{const v=c.current;if(v){E.current=E.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const T=v.getBoundingClientRect();h.current=T.height,g.current=T.width,_.current||(v.style.transitionDuration=E.current.transitionDuration,v.style.animationName=E.current.animationName),l(r)}},[o.open,r]),u.jsx(_e.div,{"data-state":dx(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...i,ref:f,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&s})});function dx(t){return t?"open":"closed"}var VK=Hk,FK=Gk,$K=qk,UK=p.createContext(void 0);function Cp(t){const e=p.useContext(UK);return t||e||"ltr"}var xr="Accordion",BK=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[fx,zK,WK]=Tp(xr),[bp,kJ]=vr(xr,[WK,Wk]),hx=Wk(),Qk=J.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return u.jsx(fx.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?u.jsx(qK,{...i,ref:e}):u.jsx(GK,{...s,ref:e})})});Qk.displayName=xr;var[Yk,HK]=bp(xr),[Xk,KK]=bp(xr,{collapsible:!1}),GK=J.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[a,l]=Pi({prop:n,defaultProp:r??"",onChange:s,caller:xr});return u.jsx(Yk,{scope:t.__scopeAccordion,value:J.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:J.useCallback(()=>i&&l(""),[i,l]),children:u.jsx(Xk,{scope:t.__scopeAccordion,collapsible:i,children:u.jsx(Jk,{...o,ref:e})})})}),qK=J.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o,a]=Pi({prop:n,defaultProp:r??[],onChange:s,caller:xr}),l=J.useCallback(f=>a((h=[])=>[...h,f]),[a]),c=J.useCallback(f=>a((h=[])=>h.filter(m=>m!==f)),[a]);return u.jsx(Yk,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:u.jsx(Xk,{scope:t.__scopeAccordion,collapsible:!0,children:u.jsx(Jk,{...i,ref:e})})})}),[QK,Ip]=bp(xr),Jk=J.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,a=J.useRef(null),l=pt(a,e),c=zK(n),h=Cp(s)==="ltr",m=le(t.onKeyDown,g=>{var S;if(!BK.includes(g.key))return;const x=g.target,w=c().filter(A=>{var P;return!((P=A.ref.current)!=null&&P.disabled)}),_=w.findIndex(A=>A.ref.current===x),E=w.length;if(_===-1)return;g.preventDefault();let v=_;const T=0,I=E-1,R=()=>{v=_+1,v>I&&(v=T)},M=()=>{v=_-1,v<T&&(v=I)};switch(g.key){case"Home":v=T;break;case"End":v=I;break;case"ArrowRight":i==="horizontal"&&(h?R():M());break;case"ArrowDown":i==="vertical"&&R();break;case"ArrowLeft":i==="horizontal"&&(h?M():R());break;case"ArrowUp":i==="vertical"&&M();break}const b=v%E;(S=w[b].ref.current)==null||S.focus()});return u.jsx(QK,{scope:n,disabled:r,direction:s,orientation:i,children:u.jsx(fx.Slot,{scope:n,children:u.jsx(_e.div,{...o,"data-orientation":i,ref:l,onKeyDown:r?void 0:m})})})}),fh="AccordionItem",[YK,px]=bp(fh),Zk=J.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=Ip(fh,n),o=HK(fh,n),a=hx(n),l=is(),c=r&&o.value.includes(r)||!1,f=i.disabled||t.disabled;return u.jsx(YK,{scope:n,open:c,disabled:f,triggerId:l,children:u.jsx(VK,{"data-orientation":i.orientation,"data-state":i2(c),...a,...s,ref:e,disabled:f,open:c,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});Zk.displayName=fh;var e2="AccordionHeader",t2=J.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ip(xr,n),i=px(e2,n);return u.jsx(_e.h3,{"data-orientation":s.orientation,"data-state":i2(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});t2.displayName=e2;var my="AccordionTrigger",n2=J.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ip(xr,n),i=px(my,n),o=KK(my,n),a=hx(n);return u.jsx(fx.ItemSlot,{scope:n,children:u.jsx(FK,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...a,...r,ref:e})})});n2.displayName=my;var r2="AccordionContent",s2=J.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ip(xr,n),i=px(r2,n),o=hx(n);return u.jsx($K,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});s2.displayName=r2;function i2(t){return t?"open":"closed"}var XK=Qk,JK=Zk,ZK=t2,o2=n2,a2=s2;const l2=XK,mx=J.forwardRef(({className:t,...e},n)=>u.jsx(JK,{ref:n,className:he("border-b",t),...e}));mx.displayName="AccordionItem";const gx=J.forwardRef(({className:t,children:e,...n},r)=>u.jsx(ZK,{className:"flex",children:u.jsxs(o2,{ref:r,className:he("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,u.jsx(Xw,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));gx.displayName=o2.displayName;const vx=J.forwardRef(({className:t,children:e,...n},r)=>u.jsx(a2,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:u.jsx("div",{className:he("pb-4 pt-0",t),children:e})}));vx.displayName=a2.displayName;var gg="rovingFocusGroup.onEntryFocus",eG={bubbles:!1,cancelable:!0},Ru="RovingFocusGroup",[gy,c2,tG]=Tp(Ru),[nG,Pp]=vr(Ru,[tG]),[rG,sG]=nG(Ru),u2=p.forwardRef((t,e)=>u.jsx(gy.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(gy.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(iG,{...t,ref:e})})}));u2.displayName=Ru;var iG=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=t,m=p.useRef(null),g=pt(e,m),x=Cp(i),[w,_]=Pi({prop:o,defaultProp:a??null,onChange:l,caller:Ru}),[E,v]=p.useState(!1),T=Sn(c),I=c2(n),R=p.useRef(!1),[M,b]=p.useState(0);return p.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(gg,T),()=>S.removeEventListener(gg,T)},[T]),u.jsx(rG,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:w,onItemFocus:p.useCallback(S=>_(S),[_]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>b(S=>S+1),[]),onFocusableItemRemove:p.useCallback(()=>b(S=>S-1),[]),children:u.jsx(_e.div,{tabIndex:E||M===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{R.current=!0}),onFocus:le(t.onFocus,S=>{const A=!R.current;if(S.target===S.currentTarget&&A&&!E){const P=new CustomEvent(gg,eG);if(S.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=I().filter($=>$.focusable),D=k.find($=>$.active),j=k.find($=>$.id===w),q=[D,j,...k].filter(Boolean).map($=>$.ref.current);h2(q,f)}}R.current=!1}),onBlur:le(t.onBlur,()=>v(!1))})})}),d2="RovingFocusGroupItem",f2=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=is(),c=i||l,f=sG(d2,n),h=f.currentTabStopId===c,m=c2(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:w}=f;return p.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),u.jsx(gy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:u.jsx(_e.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:le(t.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:le(t.onFocus,()=>f.onItemFocus(c)),onKeyDown:le(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const E=lG(_,f.orientation,f.dir);if(E!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let T=m().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")T.reverse();else if(E==="prev"||E==="next"){E==="prev"&&T.reverse();const I=T.indexOf(_.currentTarget);T=f.loop?cG(T,I+1):T.slice(I+1)}setTimeout(()=>h2(T))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:w!=null}):o})})});f2.displayName=d2;var oG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function lG(t,e,n){const r=aG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oG[r]}function h2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function cG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var p2=u2,m2=f2,Ap="Tabs",[uG,jJ]=vr(Ap,[Pp]),g2=Pp(),[dG,yx]=uG(Ap),v2=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,f=Cp(a),[h,m]=Pi({prop:r,onChange:s,defaultProp:i??"",caller:Ap});return u.jsx(dG,{scope:n,baseId:is(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:l,children:u.jsx(_e.div,{dir:f,"data-orientation":o,...c,ref:e})})});v2.displayName=Ap;var y2="TabsList",w2=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=yx(y2,n),o=g2(n);return u.jsx(p2,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:u.jsx(_e.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});w2.displayName=y2;var x2="TabsTrigger",_2=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=yx(x2,n),a=g2(n),l=S2(o.baseId,r),c=C2(o.baseId,r),f=r===o.value;return u.jsx(m2,{asChild:!0,...a,focusable:!s,active:f,children:u.jsx(_e.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:le(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:le(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!s&&h&&o.onValueChange(r)})})})});_2.displayName=x2;var E2="TabsContent",T2=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=yx(E2,n),l=S2(a.baseId,r),c=C2(a.baseId,r),f=r===a.value,h=p.useRef(f);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),u.jsx(yr,{present:s||f,children:({present:m})=>u.jsx(_e.div,{"data-state":f?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});T2.displayName=E2;function S2(t,e){return`${t}-trigger-${e}`}function C2(t,e){return`${t}-content-${e}`}var fG=v2,b2=w2,I2=_2,P2=T2;const A2=fG,wx=J.forwardRef(({className:t,...e},n)=>u.jsx(b2,{ref:n,className:he("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));wx.displayName=b2.displayName;const Qc=J.forwardRef(({className:t,...e},n)=>u.jsx(I2,{ref:n,className:he("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Qc.displayName=I2.displayName;const Yc=J.forwardRef(({className:t,...e},n)=>u.jsx(P2,{ref:n,className:he("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Yc.displayName=P2.displayName;function Me(){return Me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Me.apply(null,arguments)}function Z1(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xx(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:m,children:g,...x}=h,w=(m==null?void 0:m[t][l])||a,_=p.useMemo(()=>x,Object.values(x));return p.createElement(w.Provider,{value:_},g)}function f(h,m){const g=(m==null?void 0:m[t][l])||a,x=p.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,f]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,hG(s,...e)]}function hG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pG(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function R2(...t){return e=>t.forEach(n=>pG(n,e))}function en(...t){return p.useCallback(R2(...t),t)}const Xc=p.forwardRef((t,e)=>{const{children:n,...r}=t,s=p.Children.toArray(n),i=s.find(gG);if(i){const o=i.props.children,a=s.map(l=>l===i?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:l);return p.createElement(vy,Me({},r,{ref:e}),p.isValidElement(o)?p.cloneElement(o,void 0,a):null)}return p.createElement(vy,Me({},r,{ref:e}),n)});Xc.displayName="Slot";const vy=p.forwardRef((t,e)=>{const{children:n,...r}=t;return p.isValidElement(n)?p.cloneElement(n,{...vG(r,n.props),ref:e?R2(e,n.ref):n.ref}):p.Children.count(n)>1?p.Children.only(null):null});vy.displayName="SlotClone";const mG=({children:t})=>p.createElement(p.Fragment,null,t);function gG(t){return p.isValidElement(t)&&t.type===mG}function vG(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function yG(t){const e=t+"CollectionProvider",[n,r]=xx(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:w}=g,_=J.useRef(null),E=J.useRef(new Map).current;return J.createElement(s,{scope:x,itemMap:E,collectionRef:_},w)},a=t+"CollectionSlot",l=J.forwardRef((g,x)=>{const{scope:w,children:_}=g,E=i(a,w),v=en(x,E.collectionRef);return J.createElement(Xc,{ref:v},_)}),c=t+"CollectionItemSlot",f="data-radix-collection-item",h=J.forwardRef((g,x)=>{const{scope:w,children:_,...E}=g,v=J.useRef(null),T=en(x,v),I=i(c,w);return J.useEffect(()=>(I.itemMap.set(v,{ref:v,...E}),()=>void I.itemMap.delete(v))),J.createElement(Xc,{[f]:"",ref:T},_)});function m(g){const x=i(t+"CollectionConsumer",g);return J.useCallback(()=>{const _=x.collectionRef.current;if(!_)return[];const E=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((I,R)=>E.indexOf(I.ref.current)-E.indexOf(R.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},m,r]}const wG=p.createContext(void 0);function xG(t){const e=p.useContext(wG);return t||e||"ltr"}const _G=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Lt=_G.reduce((t,e)=>{const n=p.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Xc:e;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(a,Me({},o,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function EG(t,e){t&&_i.flushSync(()=>t.dispatchEvent(e))}function ms(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function TG(t,e=globalThis==null?void 0:globalThis.document){const n=ms(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const yy="dismissableLayer.update",SG="dismissableLayer.pointerDownOutside",CG="dismissableLayer.focusOutside";let eC;const bG=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),IG=p.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,f=p.useContext(bG),[h,m]=p.useState(null),g=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,x]=p.useState({}),w=en(e,S=>m(S)),_=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),v=_.indexOf(E),T=h?_.indexOf(h):-1,I=f.layersWithOutsidePointerEventsDisabled.size>0,R=T>=v,M=PG(S=>{const A=S.target,P=[...f.branches].some(k=>k.contains(A));!R||P||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},g),b=AG(S=>{const A=S.target;[...f.branches].some(k=>k.contains(A))||(o==null||o(S),a==null||a(S),S.defaultPrevented||l==null||l())},g);return TG(S=>{T===f.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},g),p.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(eC=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),tC(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=eC)}},[h,g,r,f]),p.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),tC())},[h,f]),p.useEffect(()=>{const S=()=>x({});return document.addEventListener(yy,S),()=>document.removeEventListener(yy,S)},[]),p.createElement(Lt.div,Me({},c,{ref:w,style:{pointerEvents:I?R?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,b.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,b.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,M.onPointerDownCapture)}))});function PG(t,e=globalThis==null?void 0:globalThis.document){const n=ms(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let f=function(){N2(SG,n,c,{discrete:!0})};var l=f;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function AG(t,e=globalThis==null?void 0:globalThis.document){const n=ms(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&N2(CG,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tC(){const t=new CustomEvent(yy);document.dispatchEvent(t)}function N2(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?EG(s,i):s.dispatchEvent(i)}let vg=0;function RG(){p.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:nC()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:nC()),vg++,()=>{vg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),vg--}},[])}function nC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const yg="focusScope.autoFocusOnMount",wg="focusScope.autoFocusOnUnmount",rC={bubbles:!1,cancelable:!0},NG=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=ms(s),f=ms(i),h=p.useRef(null),m=en(e,w=>l(w)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(M){if(g.paused||!a)return;const b=M.target;a.contains(b)?h.current=b:Ns(h.current,{select:!0})},T=function(M){if(g.paused||!a)return;const b=M.relatedTarget;b!==null&&(a.contains(b)||Ns(h.current,{select:!0}))},I=function(M){if(document.activeElement===document.body)for(const S of M)S.removedNodes.length>0&&Ns(a)};var w=v,_=T,E=I;document.addEventListener("focusin",v),document.addEventListener("focusout",T);const R=new MutationObserver(I);return a&&R.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",T),R.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){iC.add(g);const w=document.activeElement;if(!a.contains(w)){const E=new CustomEvent(yg,rC);a.addEventListener(yg,c),a.dispatchEvent(E),E.defaultPrevented||(kG(LG(k2(a)),{select:!0}),document.activeElement===w&&Ns(a))}return()=>{a.removeEventListener(yg,c),setTimeout(()=>{const E=new CustomEvent(wg,rC);a.addEventListener(wg,f),a.dispatchEvent(E),E.defaultPrevented||Ns(w??document.body,{select:!0}),a.removeEventListener(wg,f),iC.remove(g)},0)}}},[a,c,f,g]);const x=p.useCallback(w=>{if(!n&&!r||g.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(_&&E){const v=w.currentTarget,[T,I]=jG(v);T&&I?!w.shiftKey&&E===I?(w.preventDefault(),n&&Ns(T,{select:!0})):w.shiftKey&&E===T&&(w.preventDefault(),n&&Ns(I,{select:!0})):E===v&&w.preventDefault()}},[n,r,g.paused]);return p.createElement(Lt.div,Me({tabIndex:-1},o,{ref:m,onKeyDown:x}))});function kG(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ns(r,{select:e}),document.activeElement!==n)return}function jG(t){const e=k2(t),n=sC(e,t),r=sC(e.reverse(),t);return[n,r]}function k2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sC(t,e){for(const n of t)if(!DG(n,{upTo:e}))return n}function DG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function MG(t){return t instanceof HTMLInputElement&&"select"in t}function Ns(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&MG(t)&&e&&t.select()}}const iC=OG();function OG(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=oC(t,e),t.unshift(e)},remove(e){var n;t=oC(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function oC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function LG(t){return t.filter(e=>e.tagName!=="A")}const tr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},VG=Eh["useId".toString()]||(()=>{});let FG=0;function j2(t){const[e,n]=p.useState(VG());return tr(()=>{t||n(r=>r??String(FG++))},[t]),t||(e?`radix-${e}`:"")}const $G=["top","right","bottom","left"],gi=Math.min,In=Math.max,hh=Math.round,Nd=Math.floor,Dr=t=>({x:t,y:t}),UG={left:"right",right:"left",bottom:"top",top:"bottom"},BG={start:"end",end:"start"};function wy(t,e,n){return In(t,gi(e,n))}function gs(t,e){return typeof t=="function"?t(e):t}function vs(t){return t.split("-")[0]}function tl(t){return t.split("-")[1]}function _x(t){return t==="x"?"y":"x"}function Ex(t){return t==="y"?"height":"width"}function Cr(t){return["top","bottom"].includes(vs(t))?"y":"x"}function Tx(t){return _x(Cr(t))}function zG(t,e,n){n===void 0&&(n=!1);const r=tl(t),s=Tx(t),i=Ex(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ph(o)),[o,ph(o)]}function WG(t){const e=ph(t);return[xy(t),e,xy(e)]}function xy(t){return t.replace(/start|end/g,e=>BG[e])}function HG(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function KG(t,e,n,r){const s=tl(t);let i=HG(vs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(xy)))),i}function ph(t){return t.replace(/left|right|bottom|top/g,e=>UG[e])}function GG(t){return{top:0,right:0,bottom:0,left:0,...t}}function D2(t){return typeof t!="number"?GG(t):{top:t,right:t,bottom:t,left:t}}function mh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function aC(t,e,n){let{reference:r,floating:s}=t;const i=Cr(e),o=Tx(e),a=Ex(o),l=vs(e),c=i==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:f,y:r.y-s.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(tl(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const qG=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:h}=aC(c,r,l),m=r,g={},x=0;for(let w=0;w<a.length;w++){const{name:_,fn:E}=a[w],{x:v,y:T,data:I,reset:R}=await E({x:f,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});f=v??f,h=T??h,g={...g,[_]:{...g[_],...I}},R&&x<=50&&(x++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:f,y:h}=aC(c,m,l)),w=-1)}return{x:f,y:h,placement:m,strategy:s,middlewareData:g}};async function Jc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=gs(e,t),x=D2(g),_=a[m?h==="floating"?"reference":"floating":h],E=mh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),I=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},R=mh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:T,strategy:l}):v);return{top:(E.top-R.top+x.top)/I.y,bottom:(R.bottom-E.bottom+x.bottom)/I.y,left:(E.left-R.left+x.left)/I.x,right:(R.right-E.right+x.right)/I.x}}const QG=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:f=0}=gs(t,e)||{};if(c==null)return{};const h=D2(f),m={x:n,y:r},g=Tx(s),x=Ex(g),w=await o.getDimensions(c),_=g==="y",E=_?"top":"left",v=_?"bottom":"right",T=_?"clientHeight":"clientWidth",I=i.reference[x]+i.reference[g]-m[g]-i.floating[x],R=m[g]-i.reference[g],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let b=M?M[T]:0;(!b||!await(o.isElement==null?void 0:o.isElement(M)))&&(b=a.floating[T]||i.floating[x]);const S=I/2-R/2,A=b/2-w[x]/2-1,P=gi(h[E],A),k=gi(h[v],A),D=P,j=b-w[x]-k,L=b/2-w[x]/2+S,q=wy(D,L,j),$=!l.arrow&&tl(s)!=null&&L!==q&&i.reference[x]/2-(L<D?P:k)-w[x]/2<0,B=$?L<D?L-D:L-j:0;return{[g]:m[g]+B,data:{[g]:q,centerOffset:L-q-B,...$&&{alignmentOffset:B}},reset:$}}}),YG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,..._}=gs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=vs(s),v=Cr(a),T=vs(a)===a,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=m||(T||!w?[ph(a)]:WG(a)),M=x!=="none";!m&&M&&R.push(...KG(a,w,x,I));const b=[a,...R],S=await Jc(e,_),A=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&A.push(S[E]),h){const L=zG(s,o,I);A.push(S[L[0]],S[L[1]])}if(P=[...P,{placement:s,overflows:A}],!A.every(L=>L<=0)){var k,D;const L=(((k=i.flip)==null?void 0:k.index)||0)+1,q=b[L];if(q&&(!(h==="alignment"?v!==Cr(q):!1)||P.every(O=>O.overflows[0]>0&&Cr(O.placement)===v)))return{data:{index:L,overflows:P},reset:{placement:q}};let $=(D=P.filter(B=>B.overflows[0]<=0).sort((B,O)=>B.overflows[1]-O.overflows[1])[0])==null?void 0:D.placement;if(!$)switch(g){case"bestFit":{var j;const B=(j=P.filter(O=>{if(M){const F=Cr(O.placement);return F===v||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,W)=>F+W,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:j[0];B&&($=B);break}case"initialPlacement":$=a;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function lC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cC(t){return $G.some(e=>t[e]>=0)}const XG=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=gs(t,e);switch(r){case"referenceHidden":{const i=await Jc(e,{...s,elementContext:"reference"}),o=lC(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:cC(o)}}}case"escaped":{const i=await Jc(e,{...s,altBoundary:!0}),o=lC(i,n.floating);return{data:{escapedOffsets:o,escaped:cC(o)}}}default:return{}}}}};async function JG(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=vs(n),a=tl(n),l=Cr(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&l?-1:1,h=gs(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof x=="number"&&(g=a==="end"?x*-1:x),l?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const ZG=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await JG(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},eq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:E,y:v}=_;return{x:E,y:v}}},...l}=gs(t,e),c={x:n,y:r},f=await Jc(e,l),h=Cr(vs(s)),m=_x(h);let g=c[m],x=c[h];if(i){const _=m==="y"?"top":"left",E=m==="y"?"bottom":"right",v=g+f[_],T=g-f[E];g=wy(v,g,T)}if(o){const _=h==="y"?"top":"left",E=h==="y"?"bottom":"right",v=x+f[_],T=x-f[E];x=wy(v,x,T)}const w=a.fn({...e,[m]:g,[h]:x});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:i,[h]:o}}}}}},tq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=gs(t,e),f={x:n,y:r},h=Cr(s),m=_x(h);let g=f[m],x=f[h];const w=gs(a,e),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const T=m==="y"?"height":"width",I=i.reference[m]-i.floating[T]+_.mainAxis,R=i.reference[m]+i.reference[T]-_.mainAxis;g<I?g=I:g>R&&(g=R)}if(c){var E,v;const T=m==="y"?"width":"height",I=["top","left"].includes(vs(s)),R=i.reference[h]-i.floating[T]+(I&&((E=o.offset)==null?void 0:E[h])||0)+(I?0:_.crossAxis),M=i.reference[h]+i.reference[T]+(I?0:((v=o.offset)==null?void 0:v[h])||0)-(I?_.crossAxis:0);x<R?x=R:x>M&&(x=M)}return{[m]:g,[h]:x}}}},nq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=gs(t,e),f=await Jc(e,c),h=vs(s),m=tl(s),g=Cr(s)==="y",{width:x,height:w}=i.floating;let _,E;h==="top"||h==="bottom"?(_=h,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,_=m==="end"?"top":"bottom");const v=w-f.top-f.bottom,T=x-f.left-f.right,I=gi(w-f[_],v),R=gi(x-f[E],T),M=!e.middlewareData.shift;let b=I,S=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=v),M&&!m){const P=In(f.left,0),k=In(f.right,0),D=In(f.top,0),j=In(f.bottom,0);g?S=x-2*(P!==0||k!==0?P+k:In(f.left,f.right)):b=w-2*(D!==0||j!==0?D+j:In(f.top,f.bottom))}await l({...e,availableWidth:S,availableHeight:b});const A=await o.getDimensions(a.floating);return x!==A.width||w!==A.height?{reset:{rects:!0}}:{}}}};function Rp(){return typeof window<"u"}function nl(t){return M2(t)?(t.nodeName||"").toLowerCase():"#document"}function Dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function $r(t){var e;return(e=(M2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function M2(t){return Rp()?t instanceof Node||t instanceof Dn(t).Node:!1}function mr(t){return Rp()?t instanceof Element||t instanceof Dn(t).Element:!1}function Vr(t){return Rp()?t instanceof HTMLElement||t instanceof Dn(t).HTMLElement:!1}function uC(t){return!Rp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dn(t).ShadowRoot}function Nu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function rq(t){return["table","td","th"].includes(nl(t))}function Np(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Sx(t){const e=Cx(),n=mr(t)?gr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function sq(t){let e=vi(t);for(;Vr(e)&&!$a(e);){if(Sx(e))return e;if(Np(e))return null;e=vi(e)}return null}function Cx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $a(t){return["html","body","#document"].includes(nl(t))}function gr(t){return Dn(t).getComputedStyle(t)}function kp(t){return mr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function vi(t){if(nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||uC(t)&&t.host||$r(t);return uC(e)?e.host:e}function O2(t){const e=vi(t);return $a(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&Nu(e)?e:O2(e)}function Zc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=O2(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Dn(s);if(i){const a=_y(o);return e.concat(o,o.visualViewport||[],Nu(s)?s:[],a&&n?Zc(a):[])}return e.concat(s,Zc(s,[],n))}function _y(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function L2(t){const e=gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=hh(n)!==i||hh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function bx(t){return mr(t)?t:t.contextElement}function pa(t){const e=bx(t);if(!Vr(e))return Dr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=L2(e);let o=(i?hh(n.width):n.width)/r,a=(i?hh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iq=Dr(0);function V2(t){const e=Dn(t);return!Cx()||!e.visualViewport?iq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Dn(t)?!1:e}function uo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=bx(t);let o=Dr(1);e&&(r?mr(r)&&(o=pa(r)):o=pa(t));const a=oq(i,n,r)?V2(i):Dr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,f=s.width/o.x,h=s.height/o.y;if(i){const m=Dn(i),g=r&&mr(r)?Dn(r):r;let x=m,w=_y(x);for(;w&&r&&g!==x;){const _=pa(w),E=w.getBoundingClientRect(),v=gr(w),T=E.left+(w.clientLeft+parseFloat(v.paddingLeft))*_.x,I=E.top+(w.clientTop+parseFloat(v.paddingTop))*_.y;l*=_.x,c*=_.y,f*=_.x,h*=_.y,l+=T,c+=I,x=Dn(w),w=_y(x)}}return mh({width:f,height:h,x:l,y:c})}function Ix(t,e){const n=kp(t).scrollLeft;return e?e.left+n:uo($r(t)).left+n}function F2(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Ix(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function aq(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=$r(r),a=e?Np(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Dr(1);const f=Dr(0),h=Vr(r);if((h||!h&&!i)&&((nl(r)!=="body"||Nu(o))&&(l=kp(r)),Vr(r))){const g=uo(r);c=pa(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?F2(o,l,!0):Dr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-l.scrollTop*c.y+f.y+m.y}}function lq(t){return Array.from(t.getClientRects())}function cq(t){const e=$r(t),n=kp(t),r=t.ownerDocument.body,s=In(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=In(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ix(t);const a=-n.scrollTop;return gr(r).direction==="rtl"&&(o+=In(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function uq(t,e){const n=Dn(t),r=$r(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Cx();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function dq(t,e){const n=uo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vr(t)?pa(t):Dr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function dC(t,e,n){let r;if(e==="viewport")r=uq(t,n);else if(e==="document")r=cq($r(t));else if(mr(e))r=dq(e,n);else{const s=V2(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return mh(r)}function $2(t,e){const n=vi(t);return n===e||!mr(n)||$a(n)?!1:gr(n).position==="fixed"||$2(n,e)}function fq(t,e){const n=e.get(t);if(n)return n;let r=Zc(t,[],!1).filter(a=>mr(a)&&nl(a)!=="body"),s=null;const i=gr(t).position==="fixed";let o=i?vi(t):t;for(;mr(o)&&!$a(o);){const a=gr(o),l=Sx(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Nu(o)&&!l&&$2(t,o))?r=r.filter(f=>f!==o):s=a,o=vi(o)}return e.set(t,r),r}function hq(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Np(e)?[]:fq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,f)=>{const h=dC(e,f,s);return c.top=In(h.top,c.top),c.right=gi(h.right,c.right),c.bottom=gi(h.bottom,c.bottom),c.left=In(h.left,c.left),c},dC(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pq(t){const{width:e,height:n}=L2(t);return{width:e,height:n}}function mq(t,e,n){const r=Vr(e),s=$r(e),i=n==="fixed",o=uo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Dr(0);function c(){l.x=Ix(s)}if(r||!r&&!i)if((nl(e)!=="body"||Nu(s))&&(a=kp(e)),r){const g=uo(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();i&&!r&&s&&c();const f=s&&!r&&!i?F2(s,a):Dr(0),h=o.left+a.scrollLeft-l.x-f.x,m=o.top+a.scrollTop-l.y-f.y;return{x:h,y:m,width:o.width,height:o.height}}function xg(t){return gr(t).position==="static"}function fC(t,e){if(!Vr(t)||gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return $r(t)===n&&(n=n.ownerDocument.body),n}function U2(t,e){const n=Dn(t);if(Np(t))return n;if(!Vr(t)){let s=vi(t);for(;s&&!$a(s);){if(mr(s)&&!xg(s))return s;s=vi(s)}return n}let r=fC(t,e);for(;r&&rq(r)&&xg(r);)r=fC(r,e);return r&&$a(r)&&xg(r)&&!Sx(r)?n:r||sq(t)||n}const gq=async function(t){const e=this.getOffsetParent||U2,n=this.getDimensions,r=await n(t.floating);return{reference:mq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vq(t){return gr(t).direction==="rtl"}const yq={convertOffsetParentRelativeRectToViewportRelativeRect:aq,getDocumentElement:$r,getClippingRect:hq,getOffsetParent:U2,getElementRects:gq,getClientRects:lq,getDimensions:pq,getScale:pa,isElement:mr,isRTL:vq};function B2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wq(t,e){let n=null,r;const s=$r(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const x=Nd(h),w=Nd(s.clientWidth-(f+m)),_=Nd(s.clientHeight-(h+g)),E=Nd(f),T={rootMargin:-x+"px "+-w+"px "+-_+"px "+-E+"px",threshold:In(0,gi(1,l))||1};let I=!0;function R(M){const b=M[0].intersectionRatio;if(b!==l){if(!I)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b===1&&!B2(c,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(R,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,T)}n.observe(t)}return o(!0),i}function z2(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=bx(t),f=s||i?[...c?Zc(c):[],...Zc(e)]:[];f.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?wq(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(E=>{let[v]=E;v&&v.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=g)==null||T.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let x,w=l?uo(t):null;l&&_();function _(){const E=uo(t);w&&!B2(w,E)&&n(),w=E,x=requestAnimationFrame(_)}return n(),()=>{var E;f.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(x)}}const xq=ZG,_q=eq,Eq=YG,Tq=nq,Sq=XG,hC=QG,Cq=tq,bq=(t,e,n)=>{const r=new Map,s={platform:yq,...n},i={...s.platform,_c:r};return qG(t,e,{...s,platform:i})};var Iq=typeof document<"u",Pq=function(){},uf=Iq?p.useLayoutEffect:Pq;function gh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!gh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function W2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pC(t,e){const n=W2(t);return Math.round(e*n)/n}function _g(t){const e=p.useRef(t);return uf(()=>{e.current=t}),e}function H2(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[f,h]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);gh(m,r)||g(r);const[x,w]=p.useState(null),[_,E]=p.useState(null),v=p.useCallback(O=>{O!==M.current&&(M.current=O,w(O))},[]),T=p.useCallback(O=>{O!==b.current&&(b.current=O,E(O))},[]),I=i||x,R=o||_,M=p.useRef(null),b=p.useRef(null),S=p.useRef(f),A=l!=null,P=_g(l),k=_g(s),D=_g(c),j=p.useCallback(()=>{if(!M.current||!b.current)return;const O={placement:e,strategy:n,middleware:m};k.current&&(O.platform=k.current),bq(M.current,b.current,O).then(F=>{const W={...F,isPositioned:D.current!==!1};L.current&&!gh(S.current,W)&&(S.current=W,_i.flushSync(()=>{h(W)}))})},[m,e,n,k,D]);uf(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[c]);const L=p.useRef(!1);uf(()=>(L.current=!0,()=>{L.current=!1}),[]),uf(()=>{if(I&&(M.current=I),R&&(b.current=R),I&&R){if(P.current)return P.current(I,R,j);j()}},[I,R,j,P,A]);const q=p.useMemo(()=>({reference:M,floating:b,setReference:v,setFloating:T}),[v,T]),$=p.useMemo(()=>({reference:I,floating:R}),[I,R]),B=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!$.floating)return O;const F=pC($.floating,f.x),W=pC($.floating,f.y);return a?{...O,transform:"translate("+F+"px, "+W+"px)",...W2($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:W}},[n,a,$.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:j,refs:q,elements:$,floatingStyles:B}),[f,j,q,$,B])}const Aq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?hC({element:r.current,padding:s}).fn(n):{}:r?hC({element:r,padding:s}).fn(n):{}}}},K2=(t,e)=>({...xq(t),options:[t,e]}),G2=(t,e)=>({..._q(t),options:[t,e]}),q2=(t,e)=>({...Cq(t),options:[t,e]}),Q2=(t,e)=>({...Eq(t),options:[t,e]}),Y2=(t,e)=>({...Tq(t),options:[t,e]}),X2=(t,e)=>({...Sq(t),options:[t,e]}),J2=(t,e)=>({...Aq(t),options:[t,e]});function Rq(t){const[e,n]=p.useState(void 0);return tr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const Z2="Popper",[ej,tj]=xx(Z2),[Nq,nj]=ej(Z2),kq=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return p.createElement(Nq,{scope:e,anchor:r,onAnchorChange:s},n)},jq="PopperAnchor",Dq=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=nj(jq,n),o=p.useRef(null),a=en(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.createElement(Lt.div,Me({},s,{ref:a}))}),rj="PopperContent",[Mq,DJ]=ej(rj),Oq=p.forwardRef((t,e)=>{var n,r,s,i,o,a,l,c;const{__scopePopper:f,side:h="bottom",sideOffset:m=0,align:g="center",alignOffset:x=0,arrowPadding:w=0,avoidCollisions:_=!0,collisionBoundary:E=[],collisionPadding:v=0,sticky:T="partial",hideWhenDetached:I=!1,updatePositionStrategy:R="optimized",onPlaced:M,...b}=t,S=nj(rj,f),[A,P]=p.useState(null),k=en(e,It=>P(It)),[D,j]=p.useState(null),L=Rq(D),q=(n=L==null?void 0:L.width)!==null&&n!==void 0?n:0,$=(r=L==null?void 0:L.height)!==null&&r!==void 0?r:0,B=h+(g!=="center"?"-"+g:""),O=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},F=Array.isArray(E)?E:[E],W=F.length>0,H={padding:O,boundary:F.filter(Lq),altBoundary:W},{refs:X,floatingStyles:te,placement:K,isPositioned:se,middlewareData:oe}=H2({strategy:"fixed",placement:B,whileElementsMounted:(...It)=>z2(...It,{animationFrame:R==="always"}),elements:{reference:S.anchor},middleware:[K2({mainAxis:m+$,alignmentAxis:x}),_&&G2({mainAxis:!0,crossAxis:!1,limiter:T==="partial"?q2():void 0,...H}),_&&Q2({...H}),Y2({...H,apply:({elements:It,rects:Et,availableWidth:_r,availableHeight:sl})=>{const{width:Ur,height:Mu}=Et.reference,Es=It.floating.style;Es.setProperty("--radix-popper-available-width",`${_r}px`),Es.setProperty("--radix-popper-available-height",`${sl}px`),Es.setProperty("--radix-popper-anchor-width",`${Ur}px`),Es.setProperty("--radix-popper-anchor-height",`${Mu}px`)}}),D&&J2({element:D,padding:w}),Vq({arrowWidth:q,arrowHeight:$}),I&&X2({strategy:"referenceHidden",...H})]}),[Y,ue]=sj(K),pe=ms(M);tr(()=>{se&&(pe==null||pe())},[se,pe]);const ve=(s=oe.arrow)===null||s===void 0?void 0:s.x,de=(i=oe.arrow)===null||i===void 0?void 0:i.y,Te=((o=oe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Be,qe]=p.useState();return tr(()=>{A&&qe(window.getComputedStyle(A).zIndex)},[A]),p.createElement("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:se?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(a=oe.transformOrigin)===null||a===void 0?void 0:a.x,(l=oe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},p.createElement(Mq,{scope:f,placedSide:Y,onArrowChange:j,arrowX:ve,arrowY:de,shouldHideArrow:Te},p.createElement(Lt.div,Me({"data-side":Y,"data-align":ue},b,{ref:k,style:{...b.style,animation:se?void 0:"none",opacity:(c=oe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Lq(t){return t!==null}const Vq=t=>({name:"transformOrigin",options:t,fn(e){var n,r,s,i,o;const{placement:a,rects:l,middlewareData:c}=e,h=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,m=h?0:t.arrowWidth,g=h?0:t.arrowHeight,[x,w]=sj(a),_={start:"0%",center:"50%",end:"100%"}[w],E=((r=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+m/2,v=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+g/2;let T="",I="";return x==="bottom"?(T=h?_:`${E}px`,I=`${-g}px`):x==="top"?(T=h?_:`${E}px`,I=`${l.floating.height+g}px`):x==="right"?(T=`${-g}px`,I=h?_:`${v}px`):x==="left"&&(T=`${l.floating.width+g}px`,I=h?_:`${v}px`),{data:{x:T,y:I}}}});function sj(t){const[e,n="center"]=t.split("-");return[e,n]}const Fq=kq,$q=Dq,Uq=Oq,Bq=p.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?$I.createPortal(p.createElement(Lt.div,Me({},s,{ref:e})),r):null});function mC({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=zq({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ms(n),l=p.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function zq({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=ms(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}function Wq(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Hq=p.forwardRef((t,e)=>p.createElement(Lt.span,Me({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var ij=dk(),Eg=function(){},jp=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Eg,onWheelCapture:Eg,onTouchMoveCapture:Eg}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,f=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,x=t.inert,w=t.allowPinchZoom,_=t.as,E=_===void 0?"div":_,v=Qa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),T=m,I=uk([n,e]),R=qt(qt({},v),s);return p.createElement(p.Fragment,null,f&&p.createElement(T,{sideCar:ij,removeScrollBar:c,shards:h,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!w,lockRef:n}),o?p.cloneElement(p.Children.only(a),qt(qt({},R),{ref:I})):p.createElement(E,qt({},R,{className:l,ref:I}),a))});jp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jp.classNames={fullWidth:fc,zeroRight:dc};var Ey=!1;if(typeof window<"u")try{var kd=Object.defineProperty({},"passive",{get:function(){return Ey=!0,!0}});window.addEventListener("test",kd,kd),window.removeEventListener("test",kd,kd)}catch{Ey=!1}var jo=Ey?{passive:!1}:!1,Kq=function(t){return t.tagName==="TEXTAREA"},oj=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Kq(t)&&n[e]==="visible")},Gq=function(t){return oj(t,"overflowY")},qq=function(t){return oj(t,"overflowX")},gC=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=aj(t,n);if(r){var s=lj(t,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Qq=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Yq=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},aj=function(t,e){return t==="v"?Gq(e):qq(e)},lj=function(t,e){return t==="v"?Qq(e):Yq(e)},Xq=function(t,e){return t==="h"&&e==="rtl"?-1:1},Jq=function(t,e,n,r,s){var i=Xq(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,f=o>0,h=0,m=0;do{var g=lj(t,a),x=g[0],w=g[1],_=g[2],E=w-_-i*x;(x||E)&&aj(t,a)&&(h+=E,m+=x),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(f&&(s&&h===0||!s&&o>h)||!f&&(s&&m===0||!s&&-o>m))&&(c=!0),c},jd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vC=function(t){return[t.deltaX,t.deltaY]},yC=function(t){return t&&"current"in t?t.current:t},Zq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},eQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},tQ=0,Do=[];function nQ(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(tQ++)[0],i=p.useState(function(){return sx()})[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=AA([t.lockRef.current],(t.shards||[]).map(yC),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(w,_){if("touches"in w&&w.touches.length===2)return!o.current.allowPinchZoom;var E=jd(w),v=n.current,T="deltaX"in w?w.deltaX:v[0]-E[0],I="deltaY"in w?w.deltaY:v[1]-E[1],R,M=w.target,b=Math.abs(T)>Math.abs(I)?"h":"v";if("touches"in w&&b==="h"&&M.type==="range")return!1;var S=gC(b,M);if(!S)return!0;if(S?R=b:(R=b==="v"?"h":"v",S=gC(b,M)),!S)return!1;if(!r.current&&"changedTouches"in w&&(T||I)&&(r.current=R),!R)return!0;var A=r.current||R;return Jq(A,_,w,A==="h"?T:I,!0)},[]),l=p.useCallback(function(w){var _=w;if(!(!Do.length||Do[Do.length-1]!==i)){var E="deltaY"in _?vC(_):jd(_),v=e.current.filter(function(R){return R.name===_.type&&R.target===_.target&&Zq(R.delta,E)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var T=(o.current.shards||[]).map(yC).filter(Boolean).filter(function(R){return R.contains(_.target)}),I=T.length>0?a(_,T[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),c=p.useCallback(function(w,_,E,v){var T={name:w,delta:_,target:E,should:v};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(I){return I!==T})},1)},[]),f=p.useCallback(function(w){n.current=jd(w),r.current=void 0},[]),h=p.useCallback(function(w){c(w.type,vC(w),w.target,a(w,t.lockRef.current))},[]),m=p.useCallback(function(w){c(w.type,jd(w),w.target,a(w,t.lockRef.current))},[]);p.useEffect(function(){return Do.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,jo),document.addEventListener("touchmove",l,jo),document.addEventListener("touchstart",f,jo),function(){Do=Do.filter(function(w){return w!==i}),document.removeEventListener("wheel",l,jo),document.removeEventListener("touchmove",l,jo),document.removeEventListener("touchstart",f,jo)}},[]);var g=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:eQ(s)}):null,g?p.createElement(mk,{gapMode:"margin"}):null)}const rQ=hk(ij,nQ);var cj=p.forwardRef(function(t,e){return p.createElement(jp,qt({},t,{ref:e,sideCar:rQ}))});cj.classNames=jp.classNames;const sQ=cj,iQ=[" ","Enter","ArrowUp","ArrowDown"],oQ=[" ","Enter"],Dp="Select",[Mp,Op,aQ]=yG(Dp),[rl,MJ]=xx(Dp,[aQ,tj]),Px=tj(),[lQ,xo]=rl(Dp),[cQ,uQ]=rl(Dp),dQ=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:f,autoComplete:h,disabled:m,required:g}=t,x=Px(e),[w,_]=p.useState(null),[E,v]=p.useState(null),[T,I]=p.useState(!1),R=xG(c),[M=!1,b]=mC({prop:r,defaultProp:s,onChange:i}),[S,A]=mC({prop:o,defaultProp:a,onChange:l}),P=p.useRef(null),k=w?!!w.closest("form"):!0,[D,j]=p.useState(new Set),L=Array.from(D).map(q=>q.props.value).join(";");return p.createElement(Fq,x,p.createElement(lQ,{required:g,scope:e,trigger:w,onTriggerChange:_,valueNode:E,onValueNodeChange:v,valueNodeHasChildren:T,onValueNodeHasChildrenChange:I,contentId:j2(),value:S,onValueChange:A,open:M,onOpenChange:b,dir:R,triggerPointerDownPosRef:P,disabled:m},p.createElement(Mp.Provider,{scope:e},p.createElement(cQ,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(q=>{j($=>new Set($).add(q))},[]),onNativeOptionRemove:p.useCallback(q=>{j($=>{const B=new Set($);return B.delete(q),B})},[])},n)),k?p.createElement(pj,{key:L,"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:S,onChange:q=>A(q.target.value),disabled:m},S===void 0?p.createElement("option",{value:""}):null,Array.from(D)):null))},fQ="SelectTrigger",hQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Px(n),o=xo(fQ,n),a=o.disabled||r,l=en(e,o.onTriggerChange),c=Op(n),[f,h,m]=mj(x=>{const w=c().filter(v=>!v.disabled),_=w.find(v=>v.value===o.value),E=gj(w,x,_);E!==void 0&&o.onValueChange(E.value)}),g=()=>{a||(o.onOpenChange(!0),m())};return p.createElement($q,Me({asChild:!0},i),p.createElement(Lt.button,Me({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":hj(o.value)?"":void 0},s,{ref:l,onClick:Ct(s.onClick,x=>{x.currentTarget.focus()}),onPointerDown:Ct(s.onPointerDown,x=>{const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&(g(),o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)},x.preventDefault())}),onKeyDown:Ct(s.onKeyDown,x=>{const w=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(w&&x.key===" ")&&iQ.includes(x.key)&&(g(),x.preventDefault())})})))}),pQ="SelectValue",mQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=xo(pQ,n),{onValueNodeHasChildrenChange:c}=l,f=i!==void 0,h=en(e,l.onValueNodeChange);return tr(()=>{c(f)},[c,f]),p.createElement(Lt.span,Me({},a,{ref:h,style:{pointerEvents:"none"}}),hj(l.value)?p.createElement(p.Fragment,null,o):i)}),gQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return p.createElement(Lt.span,Me({"aria-hidden":!0},s,{ref:e}),r||"▼")}),vQ=t=>p.createElement(Bq,Me({asChild:!0},t)),Ua="SelectContent",yQ=p.forwardRef((t,e)=>{const n=xo(Ua,t.__scopeSelect),[r,s]=p.useState();if(tr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?_i.createPortal(p.createElement(uj,{scope:t.__scopeSelect},p.createElement(Mp.Slot,{scope:t.__scopeSelect},p.createElement("div",null,t.children))),i):null}return p.createElement(wQ,Me({},t,{ref:e}))}),Kr=10,[uj,_o]=rl(Ua),wQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:w,avoidCollisions:_,...E}=t,v=xo(Ua,n),[T,I]=p.useState(null),[R,M]=p.useState(null),b=en(e,Y=>I(Y)),[S,A]=p.useState(null),[P,k]=p.useState(null),D=Op(n),[j,L]=p.useState(!1),q=p.useRef(!1);p.useEffect(()=>{if(T)return ix(T)},[T]),RG();const $=p.useCallback(Y=>{const[ue,...pe]=D().map(Te=>Te.ref.current),[ve]=pe.slice(-1),de=document.activeElement;for(const Te of Y)if(Te===de||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===ue&&R&&(R.scrollTop=0),Te===ve&&R&&(R.scrollTop=R.scrollHeight),Te==null||Te.focus(),document.activeElement!==de))return},[D,R]),B=p.useCallback(()=>$([S,T]),[$,S,T]);p.useEffect(()=>{j&&B()},[j,B]);const{onOpenChange:O,triggerPointerDownPosRef:F}=v;p.useEffect(()=>{if(T){let Y={x:0,y:0};const ue=ve=>{var de,Te,Be,qe;Y={x:Math.abs(Math.round(ve.pageX)-((de=(Te=F.current)===null||Te===void 0?void 0:Te.x)!==null&&de!==void 0?de:0)),y:Math.abs(Math.round(ve.pageY)-((Be=(qe=F.current)===null||qe===void 0?void 0:qe.y)!==null&&Be!==void 0?Be:0))}},pe=ve=>{Y.x<=10&&Y.y<=10?ve.preventDefault():T.contains(ve.target)||O(!1),document.removeEventListener("pointermove",ue),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",pe,{capture:!0})}}},[T,O,F]),p.useEffect(()=>{const Y=()=>O(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[O]);const[W,H]=mj(Y=>{const ue=D().filter(de=>!de.disabled),pe=ue.find(de=>de.ref.current===document.activeElement),ve=gj(ue,Y,pe);ve&&setTimeout(()=>ve.ref.current.focus())}),X=p.useCallback((Y,ue,pe)=>{const ve=!q.current&&!pe;(v.value!==void 0&&v.value===ue||ve)&&(A(Y),ve&&(q.current=!0))},[v.value]),te=p.useCallback(()=>T==null?void 0:T.focus(),[T]),K=p.useCallback((Y,ue,pe)=>{const ve=!q.current&&!pe;(v.value!==void 0&&v.value===ue||ve)&&k(Y)},[v.value]),se=r==="popper"?wC:xQ,oe=se===wC?{side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:w,avoidCollisions:_}:{};return p.createElement(uj,{scope:n,content:T,viewport:R,onViewportChange:M,itemRefCallback:X,selectedItem:S,onItemLeave:te,itemTextRefCallback:K,focusSelectedItem:B,selectedItemText:P,position:r,isPositioned:j,searchRef:W},p.createElement(sQ,{as:Xc,allowPinchZoom:!0},p.createElement(NG,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:Ct(s,Y=>{var ue;(ue=v.trigger)===null||ue===void 0||ue.focus({preventScroll:!0}),Y.preventDefault()})},p.createElement(IG,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1)},p.createElement(se,Me({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault()},E,oe,{onPlaced:()=>L(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Ct(E.onKeyDown,Y=>{const ue=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!ue&&Y.key.length===1&&H(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ve=D().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const de=Y.target,Te=ve.indexOf(de);ve=ve.slice(Te+1)}setTimeout(()=>$(ve)),Y.preventDefault()}})}))))))}),xQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=xo(Ua,n),o=_o(Ua,n),[a,l]=p.useState(null),[c,f]=p.useState(null),h=en(e,b=>f(b)),m=Op(n),g=p.useRef(!1),x=p.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:E,focusSelectedItem:v}=o,T=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&w&&_&&E){const b=i.trigger.getBoundingClientRect(),S=c.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),P=E.getBoundingClientRect();if(i.dir!=="rtl"){const de=P.left-S.left,Te=A.left-de,Be=b.left-Te,qe=b.width+Be,It=Math.max(qe,S.width),Et=window.innerWidth-Kr,_r=Z1(Te,[Kr,Et-It]);a.style.minWidth=qe+"px",a.style.left=_r+"px"}else{const de=S.right-P.right,Te=window.innerWidth-A.right-de,Be=window.innerWidth-b.right-Te,qe=b.width+Be,It=Math.max(qe,S.width),Et=window.innerWidth-Kr,_r=Z1(Te,[Kr,Et-It]);a.style.minWidth=qe+"px",a.style.right=_r+"px"}const k=m(),D=window.innerHeight-Kr*2,j=w.scrollHeight,L=window.getComputedStyle(c),q=parseInt(L.borderTopWidth,10),$=parseInt(L.paddingTop,10),B=parseInt(L.borderBottomWidth,10),O=parseInt(L.paddingBottom,10),F=q+$+j+O+B,W=Math.min(_.offsetHeight*5,F),H=window.getComputedStyle(w),X=parseInt(H.paddingTop,10),te=parseInt(H.paddingBottom,10),K=b.top+b.height/2-Kr,se=D-K,oe=_.offsetHeight/2,Y=_.offsetTop+oe,ue=q+$+Y,pe=F-ue;if(ue<=K){const de=_===k[k.length-1].ref.current;a.style.bottom="0px";const Te=c.clientHeight-w.offsetTop-w.offsetHeight,Be=Math.max(se,oe+(de?te:0)+Te+B),qe=ue+Be;a.style.height=qe+"px"}else{const de=_===k[0].ref.current;a.style.top="0px";const Be=Math.max(K,q+w.offsetTop+(de?X:0)+oe)+pe;a.style.height=Be+"px",w.scrollTop=ue-K+w.offsetTop}a.style.margin=`${Kr}px 0`,a.style.minHeight=W+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,a,c,w,_,E,i.dir,r]);tr(()=>T(),[T]);const[I,R]=p.useState();tr(()=>{c&&R(window.getComputedStyle(c).zIndex)},[c]);const M=p.useCallback(b=>{b&&x.current===!0&&(T(),v==null||v(),x.current=!1)},[T,v]);return p.createElement(_Q,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:M},p.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I}},p.createElement(Lt.div,Me({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),wC=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Kr,...i}=t,o=Px(n);return p.createElement(Uq,Me({},o,i,{ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[_Q,Ax]=rl(Ua,{}),xC="SelectViewport",EQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_o(xC,n),i=Ax(xC,n),o=en(e,s.onViewportChange),a=p.useRef(0);return p.createElement(p.Fragment,null,p.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),p.createElement(Mp.Slot,{scope:n},p.createElement(Lt.div,Me({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Ct(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&f){const m=Math.abs(a.current-c.scrollTop);if(m>0){const g=window.innerHeight-Kr*2,x=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),_=Math.max(x,w);if(_<g){const E=_+m,v=Math.min(g,E),T=E-v;f.style.height=v+"px",f.style.bottom==="0px"&&(c.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),TQ="SelectGroup",[OJ,SQ]=rl(TQ),CQ="SelectLabel",bQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=SQ(CQ,n);return p.createElement(Lt.div,Me({id:s.id},r,{ref:e}))}),Ty="SelectItem",[IQ,dj]=rl(Ty),PQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=xo(Ty,n),l=_o(Ty,n),c=a.value===r,[f,h]=p.useState(i??""),[m,g]=p.useState(!1),x=en(e,E=>{var v;return(v=l.itemRefCallback)===null||v===void 0?void 0:v.call(l,E,r,s)}),w=j2(),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.createElement(IQ,{scope:n,value:r,disabled:s,textId:w,isSelected:c,onItemTextChange:p.useCallback(E=>{h(v=>{var T;return v||((T=E==null?void 0:E.textContent)!==null&&T!==void 0?T:"").trim()})},[])},p.createElement(Mp.ItemSlot,{scope:n,value:r,disabled:s,textValue:f},p.createElement(Lt.div,Me({role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:x,onFocus:Ct(o.onFocus,()=>g(!0)),onBlur:Ct(o.onBlur,()=>g(!1)),onPointerUp:Ct(o.onPointerUp,_),onPointerMove:Ct(o.onPointerMove,E=>{if(s){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}else E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ct(o.onPointerLeave,E=>{if(E.currentTarget===document.activeElement){var v;(v=l.onItemLeave)===null||v===void 0||v.call(l)}}),onKeyDown:Ct(o.onKeyDown,E=>{var v;((v=l.searchRef)===null||v===void 0?void 0:v.current)!==""&&E.key===" "||(oQ.includes(E.key)&&_(),E.key===" "&&E.preventDefault())})}))))}),Dd="SelectItemText",AQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=xo(Dd,n),a=_o(Dd,n),l=dj(Dd,n),c=uQ(Dd,n),[f,h]=p.useState(null),m=en(e,E=>h(E),l.onItemTextChange,E=>{var v;return(v=a.itemTextRefCallback)===null||v===void 0?void 0:v.call(a,E,l.value,l.disabled)}),g=f==null?void 0:f.textContent,x=p.useMemo(()=>p.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},g),[l.disabled,l.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=c;return tr(()=>(w(x),()=>_(x)),[w,_,x]),p.createElement(p.Fragment,null,p.createElement(Lt.span,Me({id:l.textId},i,{ref:m})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?_i.createPortal(i.children,o.valueNode):null)}),RQ="SelectItemIndicator",NQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return dj(RQ,n).isSelected?p.createElement(Lt.span,Me({"aria-hidden":!0},r,{ref:e})):null}),_C="SelectScrollUpButton",kQ=p.forwardRef((t,e)=>{const n=_o(_C,t.__scopeSelect),r=Ax(_C,t.__scopeSelect),[s,i]=p.useState(!1),o=en(e,r.onScrollButtonChange);return tr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const f=l.scrollTop>0;i(f)};var a=c;const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?p.createElement(fj,Me({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}})):null}),EC="SelectScrollDownButton",jQ=p.forwardRef((t,e)=>{const n=_o(EC,t.__scopeSelect),r=Ax(EC,t.__scopeSelect),[s,i]=p.useState(!1),o=en(e,r.onScrollButtonChange);return tr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const f=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<f;i(h)};var a=c;const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?p.createElement(fj,Me({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}})):null}),fj=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=_o("SelectScrollButton",n),o=p.useRef(null),a=Op(n),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),tr(()=>{var c;const f=a().find(h=>h.ref.current===document.activeElement);f==null||(c=f.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[a]),p.createElement(Lt.div,Me({"aria-hidden":!0},s,{ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ct(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ct(s.onPointerMove,()=>{var c;(c=i.onItemLeave)===null||c===void 0||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ct(s.onPointerLeave,()=>{l()})}))}),DQ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.createElement(Lt.div,Me({"aria-hidden":!0},r,{ref:e}))});function hj(t){return t===""||t===void 0}const pj=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=en(e,s),o=Wq(n);return p.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&f){const h=new Event("change",{bubbles:!0});f.call(a,n),a.dispatchEvent(h)}},[o,n]),p.createElement(Hq,{asChild:!0},p.createElement("select",Me({},r,{ref:i,defaultValue:n})))});pj.displayName="BubbleSelect";function mj(t){const e=ms(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function gj(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=MQ(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function MQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const OQ=dQ,vj=hQ,LQ=mQ,VQ=gQ,FQ=vQ,yj=yQ,$Q=EQ,wj=bQ,xj=PQ,UQ=AQ,BQ=NQ,_j=kQ,Ej=jQ,Tj=DQ,cn=OQ,un=LQ,Qt=J.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(vj,{ref:r,className:he("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,u.jsx(VQ,{asChild:!0,children:u.jsx(Xw,{className:"h-4 w-4 opacity-50"})})]}));Qt.displayName=vj.displayName;const Sj=J.forwardRef(({className:t,...e},n)=>u.jsx(_j,{ref:n,className:he("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(QW,{className:"h-4 w-4"})}));Sj.displayName=_j.displayName;const Cj=J.forwardRef(({className:t,...e},n)=>u.jsx(Ej,{ref:n,className:he("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Xw,{className:"h-4 w-4"})}));Cj.displayName=Ej.displayName;const Yt=J.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>u.jsx(FQ,{children:u.jsxs(yj,{ref:s,className:he("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[u.jsx(Sj,{}),u.jsx($Q,{className:he("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(Cj,{})]})}));Yt.displayName=yj.displayName;const zQ=J.forwardRef(({className:t,...e},n)=>u.jsx(wj,{ref:n,className:he("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));zQ.displayName=wj.displayName;const Je=J.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(xj,{ref:r,className:he("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(BQ,{children:u.jsx(QN,{className:"h-4 w-4"})})}),u.jsx(UQ,{children:e})]}));Je.displayName=xj.displayName;const WQ=J.forwardRef(({className:t,...e},n)=>u.jsx(Tj,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",t),...e}));WQ.displayName=Tj.displayName;const HQ=()=>{const{user:t,schoolSettings:e}=Un(),[n,r]=p.useState({semesterOneSubjects:[],semesterTwoSubjects:[]}),[s,i]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState(null),[f,h]=p.useState(null),[m,g]=p.useState(null),[x,w]=p.useState(null),_=$n(),E=e.educationalStages.find(I=>I.id===(t==null?void 0:t.stageId));p.useEffect(()=>{if(!(t!=null&&t.stageId)){a(!1);return}const I=xe(_,"curriculum",t.stageId),R=Zn(I,S=>{if(S.exists()){const A=S.data();r({semesterOneSubjects:A.semesterOneSubjects||[],semesterTwoSubjects:A.semesterTwoSubjects||[]})}else r({semesterOneSubjects:[],semesterTwoSubjects:[]});a(!1)}),M=ln(Fe(_,"online_classrooms"),qn("stageId","==",t.stageId)),b=Zn(M,S=>{const A=S.docs.map(P=>({id:P.id,...P.data()}));i(A)});return()=>{R(),b()}},[_,t==null?void 0:t.stageId]);const v=I=>{try{if(!I)return null;let R;return I.includes("youtu.be/")?R=I.split("youtu.be/")[1].split("?")[0]:I.includes("watch?v=")?R=I.split("watch?v=")[1].split("&")[0]:I.includes("/embed/")?R=I.split("/embed/")[1].split("?")[0]:I.includes("/shorts/")&&(R=I.split("/shorts/")[1].split("?")[0]),R?`https://www.youtube.com/embed/${R}`:null}catch{return null}},T=I=>u.jsx(l2,{type:"single",collapsible:!0,className:"w-full",children:I.map(R=>{var M,b,S,A,P,k,D,j;return u.jsxs(mx,{value:R.id,children:[u.jsx(gx,{className:"text-lg",children:R.name}),u.jsxs(vx,{children:[u.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["المعلم: ",R.teacherName||"غير محدد"]}),u.jsxs("h4",{className:"flex items-center text-md font-semibold my-2 text-primary",children:[u.jsx(Yw,{size:18}),u.jsx("span",{className:"mr-2",children:"الكتب"})]}),((b=(M=R.content)==null?void 0:M.textbooks)==null?void 0:b.length)>0?u.jsxs(u.Fragment,{children:[u.jsxs(cn,{onValueChange:h,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر كتاباً"})}),u.jsx(Yt,{children:R.content.textbooks.map(L=>u.jsx(Je,{value:L.id,children:L.url},L.id))})]}),(()=>{const L=R.content.textbooks.find(q=>q.id===f);return L?u.jsx("a",{href:L.title,target:"_blank",rel:"noopener noreferrer",className:"block mt-2 text-sm text-blue-600 hover:underline",children:"فتح الكتاب"}):null})()]}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد كتب."}),u.jsxs("h4",{className:"flex items-center text-md font-semibold my-2 text-primary",children:[u.jsx(Zw,{size:18}),u.jsx("span",{className:"mr-2",children:"الملخصات"})]}),((A=(S=R.content)==null?void 0:S.summaries)==null?void 0:A.length)>0?u.jsxs(u.Fragment,{children:[u.jsxs(cn,{onValueChange:g,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر ملخصاً"})}),u.jsx(Yt,{children:R.content.summaries.map(L=>u.jsx(Je,{value:L.id,children:L.url},L.id))})]}),(()=>{const L=R.content.summaries.find(q=>q.id===m);return L?u.jsx("a",{href:L.title,target:"_blank",rel:"noopener noreferrer",className:"block mt-2 text-sm text-blue-600 hover:underline",children:"فتح الملخص"}):null})()]}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد ملخصات."}),u.jsxs("h4",{className:"flex items-center text-md font-semibold my-2 text-primary",children:[u.jsx(Jw,{size:18}),u.jsx("span",{className:"mr-2",children:"الاختبارات"})]}),((k=(P=R.content)==null?void 0:P.exams)==null?void 0:k.length)>0?u.jsxs(u.Fragment,{children:[u.jsxs(cn,{onValueChange:w,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر اختباراً"})}),u.jsx(Yt,{children:R.content.exams.map(L=>u.jsx(Je,{value:L.id,children:L.url},L.id))})]}),(()=>{const L=R.content.exams.find(q=>q.id===x);return L?u.jsx("a",{href:L.title,target:"_blank",rel:"noopener noreferrer",className:"block mt-2 text-sm text-blue-600 hover:underline",children:"فتح الاختبار"}):null})()]}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد اختبارات."}),u.jsxs("h4",{className:"flex items-center text-md font-semibold my-2 text-primary",children:[u.jsx(ex,{size:18}),u.jsx("span",{className:"mr-2",children:"شروحات الفيديو"})]}),((j=(D=R.content)==null?void 0:D.youtube)==null?void 0:j.length)>0?u.jsxs(u.Fragment,{children:[u.jsxs(cn,{onValueChange:c,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر فيديو"})}),u.jsx(Yt,{children:R.content.youtube.map(L=>u.jsx(Je,{value:L.id,children:L.url},L.id))})]}),(()=>{const L=R.content.youtube.find($=>$.id===l),q=L?v(L.title):null;return q?u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"font-semibold mb-1",children:L.url}),u.jsx("div",{className:"aspect-video overflow-hidden rounded-lg border",children:u.jsx("iframe",{src:q,width:"100%",height:"315",title:L.url,frameBorder:"0",allowFullScreen:!0})})]}):u.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"اختر فيديو من القائمة لعرضه."})})()]}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد فيديوهات."})]})]},R.id)})});return o?u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"})}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"لوحة تحكم الطالب"}),u.jsxs("p",{className:"text-right text-lg font-bold text-red-600",children:["مرحباً بك، ",t==null?void 0:t.name]}),u.jsx("p",{className:"text-center text-xl font-bold text-primary my-4",children:"هنا تجد موادك الدراسية والمحتوى التعليمي"}),u.jsxs("p",{className:"text-muted-foreground mb-2",children:["المرحلة التعليمية: ",(E==null?void 0:E.name)||"غير محددة"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs(Ye,{className:"shadow-lg",children:[u.jsx(nt,{children:u.jsx(Xe,{children:"المواد الدراسية"})}),u.jsx(st,{children:(E==null?void 0:E.semesterSystem)==="two-semesters"?u.jsxs(A2,{defaultValue:"semester1",children:[u.jsxs(wx,{children:[u.jsx(Qc,{value:"semester1",children:"الفصل الأول"}),u.jsx(Qc,{value:"semester2",children:"الفصل الثاني"})]}),u.jsx(Yc,{value:"semester1",children:T(n.semesterOneSubjects)}),u.jsx(Yc,{value:"semester2",children:T(n.semesterTwoSubjects)})]}):T(n.semesterOneSubjects)})]})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs(Ye,{className:"shadow-lg sticky top-24",children:[u.jsxs(nt,{children:[u.jsxs(Xe,{className:"flex items-center",children:[u.jsx(vp,{className:"mr-2 text-primary"})," الغرف الافتراضية"]}),u.jsx(kn,{children:"روابط الحصص الأونلاين المباشرة."})]}),u.jsx(st,{children:s.length>0?u.jsx("div",{className:"space-y-3",children:s.map(I=>u.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",children:u.jsxs(Ne.div,{whileHover:{scale:1.05},className:"p-4 rounded-lg bg-primary/10 hover:bg-primary/20 transition-colors cursor-pointer",children:[u.jsx("p",{className:"font-bold text-primary",children:I.name}),u.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:["انقر للانضمام",u.jsx(YN,{size:14,className:"ml-2 rtl:ml-0 rtl:mr-2"})]})]})},I.id))}):u.jsx("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد غرف افتراضية متاحة حالياً."})})]})})]})]})},KQ=()=>u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-4 bg-background",children:u.jsxs(Ne.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring",stiffness:120},children:[u.jsx(WW,{className:"w-24 h-24 text-destructive mx-auto mb-6"}),u.jsx("h1",{className:"text-5xl font-extrabold text-foreground mb-4",children:"404"}),u.jsx("h2",{className:"text-2xl font-semibold text-muted-foreground mb-6",children:"عفواً، الصفحة غير موجودة!"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-md mx-auto",children:"يبدو أنك ضللت الطريق. الصفحة التي تبحث عنها إما تم حذفها أو لم تكن موجودة أصلاً."}),u.jsx(ne,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:u.jsx(Qd,{to:"/",children:"العودة إلى الصفحة الرئيسية"})})]})}),bj=p.createContext({unreadChatsCount:0}),GQ=({children:t})=>{const{user:e}=Un(),[n,r]=p.useState(0),s=$n();return p.useEffect(()=>{if(!e){r(0);return}const i=ln(Fe(s,"chats"),qn("participants","array-contains",e.uid)),o=Zn(i,a=>{let l=0;a.forEach(c=>{const f=c.data();f.lastMessage&&f.lastMessage.senderId!==e.uid&&(!f.readBy||!f.readBy.includes(e.uid))&&l++}),r(l)});return()=>o()},[s,e]),u.jsx(bj.Provider,{value:{unreadChatsCount:n},children:t})},qQ=()=>p.useContext(bj);var QQ="Arrow",Ij=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return u.jsx(_e.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ij.displayName=QQ;var YQ=Ij;function XQ(t){const[e,n]=p.useState(void 0);return Ln(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Rx="Popper",[Pj,Aj]=vr(Rx),[JQ,Rj]=Pj(Rx),Nj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return u.jsx(JQ,{scope:e,anchor:r,onAnchorChange:s,children:n})};Nj.displayName=Rx;var kj="PopperAnchor",jj=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Rj(kj,n),o=p.useRef(null),a=pt(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:u.jsx(_e.div,{...s,ref:a})});jj.displayName=kj;var Nx="PopperContent",[ZQ,eY]=Pj(Nx),Dj=p.forwardRef((t,e)=>{var Y,ue,pe,ve,de,Te;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...w}=t,_=Rj(Nx,n),[E,v]=p.useState(null),T=pt(e,Be=>v(Be)),[I,R]=p.useState(null),M=XQ(I),b=(M==null?void 0:M.width)??0,S=(M==null?void 0:M.height)??0,A=r+(i!=="center"?"-"+i:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},k=Array.isArray(c)?c:[c],D=k.length>0,j={padding:P,boundary:k.filter(nY),altBoundary:D},{refs:L,floatingStyles:q,placement:$,isPositioned:B,middlewareData:O}=H2({strategy:"fixed",placement:A,whileElementsMounted:(...Be)=>z2(...Be,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[K2({mainAxis:s+S,alignmentAxis:o}),l&&G2({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?q2():void 0,...j}),l&&Q2({...j}),Y2({...j,apply:({elements:Be,rects:qe,availableWidth:It,availableHeight:Et})=>{const{width:_r,height:sl}=qe.reference,Ur=Be.floating.style;Ur.setProperty("--radix-popper-available-width",`${It}px`),Ur.setProperty("--radix-popper-available-height",`${Et}px`),Ur.setProperty("--radix-popper-anchor-width",`${_r}px`),Ur.setProperty("--radix-popper-anchor-height",`${sl}px`)}}),I&&J2({element:I,padding:a}),rY({arrowWidth:b,arrowHeight:S}),m&&X2({strategy:"referenceHidden",...j})]}),[F,W]=Lj($),H=Sn(x);Ln(()=>{B&&(H==null||H())},[B,H]);const X=(Y=O.arrow)==null?void 0:Y.x,te=(ue=O.arrow)==null?void 0:ue.y,K=((pe=O.arrow)==null?void 0:pe.centerOffset)!==0,[se,oe]=p.useState();return Ln(()=>{E&&oe(window.getComputedStyle(E).zIndex)},[E]),u.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:B?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ve=O.transformOrigin)==null?void 0:ve.x,(de=O.transformOrigin)==null?void 0:de.y].join(" "),...((Te=O.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(ZQ,{scope:n,placedSide:F,onArrowChange:R,arrowX:X,arrowY:te,shouldHideArrow:K,children:u.jsx(_e.div,{"data-side":F,"data-align":W,...w,ref:T,style:{...w.style,animation:B?void 0:"none"}})})})});Dj.displayName=Nx;var Mj="PopperArrow",tY={top:"bottom",right:"left",bottom:"top",left:"right"},Oj=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=eY(Mj,r),o=tY[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(YQ,{...s,ref:n,style:{...s.style,display:"block"}})})});Oj.displayName=Mj;function nY(t){return t!==null}var rY=t=>({name:"transformOrigin",options:t,fn(e){var _,E,v;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,f]=Lj(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let x="",w="";return c==="bottom"?(x=o?h:`${m}px`,w=`${-l}px`):c==="top"?(x=o?h:`${m}px`,w=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,w=o?h:`${g}px`):c==="left"&&(x=`${r.floating.width+l}px`,w=o?h:`${g}px`),{data:{x,y:w}}}});function Lj(t){const[e,n="center"]=t.split("-");return[e,n]}var sY=Nj,iY=jj,oY=Dj,aY=Oj,Sy=["Enter"," "],lY=["ArrowDown","PageUp","Home"],Vj=["ArrowUp","PageDown","End"],cY=[...lY,...Vj],uY={ltr:[...Sy,"ArrowRight"],rtl:[...Sy,"ArrowLeft"]},dY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ku="Menu",[eu,fY,hY]=Tp(ku),[Eo,Fj]=vr(ku,[hY,Aj,Pp]),Lp=Aj(),$j=Pp(),[pY,To]=Eo(ku),[mY,ju]=Eo(ku),Uj=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=Lp(e),[l,c]=p.useState(null),f=p.useRef(!1),h=Sn(i),m=Cp(s);return p.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),u.jsx(sY,{...a,children:u.jsx(pY,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:c,children:u.jsx(mY,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};Uj.displayName=ku;var gY="MenuAnchor",kx=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Lp(n);return u.jsx(iY,{...s,...r,ref:e})});kx.displayName=gY;var jx="MenuPortal",[vY,Bj]=Eo(jx,{forceMount:void 0}),zj=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=To(jx,e);return u.jsx(vY,{scope:e,forceMount:n,children:u.jsx(yr,{present:n||i.open,children:u.jsx(wp,{asChild:!0,container:s,children:r})})})};zj.displayName=jx;var Yn="MenuContent",[yY,Dx]=Eo(Yn),Wj=p.forwardRef((t,e)=>{const n=Bj(Yn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=To(Yn,t.__scopeMenu),o=ju(Yn,t.__scopeMenu);return u.jsx(eu.Provider,{scope:t.__scopeMenu,children:u.jsx(yr,{present:r||i.open,children:u.jsx(eu.Slot,{scope:t.__scopeMenu,children:o.modal?u.jsx(wY,{...s,ref:e}):u.jsx(xY,{...s,ref:e})})})})}),wY=p.forwardRef((t,e)=>{const n=To(Yn,t.__scopeMenu),r=p.useRef(null),s=pt(e,r);return p.useEffect(()=>{const i=r.current;if(i)return ix(i)},[]),u.jsx(Mx,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),xY=p.forwardRef((t,e)=>{const n=To(Yn,t.__scopeMenu);return u.jsx(Mx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_Y=Ma("MenuContent.ScrollLock"),Mx=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:x,...w}=t,_=To(Yn,n),E=ju(Yn,n),v=Lp(n),T=$j(n),I=fY(n),[R,M]=p.useState(null),b=p.useRef(null),S=pt(e,b,_.onContentChange),A=p.useRef(0),P=p.useRef(""),k=p.useRef(0),D=p.useRef(null),j=p.useRef("right"),L=p.useRef(0),q=x?xk:p.Fragment,$=x?{as:_Y,allowPinchZoom:!0}:void 0,B=F=>{var Y,ue;const W=P.current+F,H=I().filter(pe=>!pe.disabled),X=document.activeElement,te=(Y=H.find(pe=>pe.ref.current===X))==null?void 0:Y.textValue,K=H.map(pe=>pe.textValue),se=jY(K,W,te),oe=(ue=H.find(pe=>pe.textValue===se))==null?void 0:ue.ref.current;(function pe(ve){P.current=ve,window.clearTimeout(A.current),ve!==""&&(A.current=window.setTimeout(()=>pe(""),1e3))})(W),oe&&setTimeout(()=>oe.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),ck();const O=p.useCallback(F=>{var H,X;return j.current===((H=D.current)==null?void 0:H.side)&&MY(F,(X=D.current)==null?void 0:X.area)},[]);return u.jsx(yY,{scope:n,searchRef:P,onItemEnter:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:p.useCallback(F=>{var W;O(F)||((W=b.current)==null||W.focus(),M(null))},[O]),onTriggerLeave:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:k,onPointerGraceIntentChange:p.useCallback(F=>{D.current=F},[]),children:u.jsx(q,{...$,children:u.jsx(rx,{asChild:!0,trapped:s,onMountAutoFocus:le(i,F=>{var W;F.preventDefault(),(W=b.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(yp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:u.jsx(p2,{asChild:!0,...T,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:R,onCurrentTabStopIdChange:M,onEntryFocus:le(l,F=>{E.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(oY,{role:"menu","aria-orientation":"vertical","data-state":oD(_.open),"data-radix-menu-content":"",dir:E.dir,...v,...w,ref:S,style:{outline:"none",...w.style},onKeyDown:le(w.onKeyDown,F=>{const H=F.target.closest("[data-radix-menu-content]")===F.currentTarget,X=F.ctrlKey||F.altKey||F.metaKey,te=F.key.length===1;H&&(F.key==="Tab"&&F.preventDefault(),!X&&te&&B(F.key));const K=b.current;if(F.target!==K||!cY.includes(F.key))return;F.preventDefault();const oe=I().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);Vj.includes(F.key)&&oe.reverse(),NY(oe)}),onBlur:le(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:le(t.onPointerMove,tu(F=>{const W=F.target,H=L.current!==F.clientX;if(F.currentTarget.contains(W)&&H){const X=F.clientX>L.current?"right":"left";j.current=X,L.current=F.clientX}}))})})})})})})});Wj.displayName=Yn;var EY="MenuGroup",Ox=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(_e.div,{role:"group",...r,ref:e})});Ox.displayName=EY;var TY="MenuLabel",Hj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(_e.div,{...r,ref:e})});Hj.displayName=TY;var vh="MenuItem",TC="menu.itemSelect",Vp=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=ju(vh,t.__scopeMenu),a=Dx(vh,t.__scopeMenu),l=pt(e,i),c=p.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(TC,{bubbles:!0,cancelable:!0});h.addEventListener(TC,g=>r==null?void 0:r(g),{once:!0}),Qw(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return u.jsx(Kj,{...s,ref:l,disabled:n,onClick:le(t.onClick,f),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),c.current=!0},onPointerUp:le(t.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:le(t.onKeyDown,h=>{const m=a.searchRef.current!=="";n||m&&h.key===" "||Sy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Vp.displayName=vh;var Kj=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=Dx(vh,n),a=$j(n),l=p.useRef(null),c=pt(e,l),[f,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const x=l.current;x&&g((x.textContent??"").trim())},[i.children]),u.jsx(eu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:u.jsx(m2,{asChild:!0,...a,focusable:!r,children:u.jsx(_e.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:le(t.onPointerMove,tu(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,tu(x=>o.onItemLeave(x))),onFocus:le(t.onFocus,()=>h(!0)),onBlur:le(t.onBlur,()=>h(!1))})})})}),SY="MenuCheckboxItem",Gj=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return u.jsx(Jj,{scope:t.__scopeMenu,checked:n,children:u.jsx(Vp,{role:"menuitemcheckbox","aria-checked":yh(n)?"mixed":n,...s,ref:e,"data-state":Vx(n),onSelect:le(s.onSelect,()=>r==null?void 0:r(yh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Gj.displayName=SY;var qj="MenuRadioGroup",[CY,bY]=Eo(qj,{value:void 0,onValueChange:()=>{}}),Qj=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Sn(r);return u.jsx(CY,{scope:t.__scopeMenu,value:n,onValueChange:i,children:u.jsx(Ox,{...s,ref:e})})});Qj.displayName=qj;var Yj="MenuRadioItem",Xj=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=bY(Yj,t.__scopeMenu),i=n===s.value;return u.jsx(Jj,{scope:t.__scopeMenu,checked:i,children:u.jsx(Vp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Vx(i),onSelect:le(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});Xj.displayName=Yj;var Lx="MenuItemIndicator",[Jj,IY]=Eo(Lx,{checked:!1}),Zj=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=IY(Lx,n);return u.jsx(yr,{present:r||yh(i.checked)||i.checked===!0,children:u.jsx(_e.span,{...s,ref:e,"data-state":Vx(i.checked)})})});Zj.displayName=Lx;var PY="MenuSeparator",eD=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(_e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});eD.displayName=PY;var AY="MenuArrow",tD=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Lp(n);return u.jsx(aY,{...s,...r,ref:e})});tD.displayName=AY;var RY="MenuSub",[LJ,nD]=Eo(RY),Hl="MenuSubTrigger",rD=p.forwardRef((t,e)=>{const n=To(Hl,t.__scopeMenu),r=ju(Hl,t.__scopeMenu),s=nD(Hl,t.__scopeMenu),i=Dx(Hl,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},f=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),u.jsx(kx,{asChild:!0,...c,children:u.jsx(Kj,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":oD(n.open),...t,ref:pp(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,tu(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:le(t.onPointerLeave,tu(h=>{var g,x;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const w=(x=n.content)==null?void 0:x.dataset.side,_=w==="right",E=_?-5:5,v=m[_?"left":"right"],T=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+E,y:h.clientY},{x:v,y:m.top},{x:T,y:m.top},{x:T,y:m.bottom},{x:v,y:m.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&h.key===" "||uY[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});rD.displayName=Hl;var sD="MenuSubContent",iD=p.forwardRef((t,e)=>{const n=Bj(Yn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=To(Yn,t.__scopeMenu),o=ju(Yn,t.__scopeMenu),a=nD(sD,t.__scopeMenu),l=p.useRef(null),c=pt(e,l);return u.jsx(eu.Provider,{scope:t.__scopeMenu,children:u.jsx(yr,{present:r||i.open,children:u.jsx(eu.Slot,{scope:t.__scopeMenu,children:u.jsx(Mx,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:le(t.onFocusOutside,f=>{f.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:le(t.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=dY[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),f.preventDefault())})})})})})});iD.displayName=sD;function oD(t){return t?"open":"closed"}function yh(t){return t==="indeterminate"}function Vx(t){return yh(t)?"indeterminate":t?"checked":"unchecked"}function NY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function kY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function jY(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=kY(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function DY(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,f=a.y,h=l.x,m=l.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(s=!s)}return s}function MY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return DY(n,e)}function tu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var OY=Uj,LY=kx,VY=zj,FY=Wj,$Y=Ox,UY=Hj,BY=Vp,zY=Gj,WY=Qj,HY=Xj,KY=Zj,GY=eD,qY=tD,QY=rD,YY=iD,Fp="DropdownMenu",[XY,VJ]=vr(Fp,[Fj]),gn=Fj(),[JY,aD]=XY(Fp),lD=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=gn(e),c=p.useRef(null),[f,h]=Pi({prop:s,defaultProp:i??!1,onChange:o,caller:Fp});return u.jsx(JY,{scope:e,triggerId:is(),triggerRef:c,contentId:is(),open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:a,children:u.jsx(OY,{...l,open:f,onOpenChange:h,dir:r,modal:a,children:n})})};lD.displayName=Fp;var cD="DropdownMenuTrigger",uD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=aD(cD,n),o=gn(n);return u.jsx(LY,{asChild:!0,...o,children:u.jsx(_e.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:pp(e,i.triggerRef),onPointerDown:le(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:le(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});uD.displayName=cD;var ZY="DropdownMenuPortal",dD=t=>{const{__scopeDropdownMenu:e,...n}=t,r=gn(e);return u.jsx(VY,{...r,...n})};dD.displayName=ZY;var fD="DropdownMenuContent",hD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=aD(fD,n),i=gn(n),o=p.useRef(!1);return u.jsx(FY,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:le(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,f=l.button===2||c;(!s.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hD.displayName=fD;var eX="DropdownMenuGroup",tX=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx($Y,{...s,...r,ref:e})});tX.displayName=eX;var nX="DropdownMenuLabel",pD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(UY,{...s,...r,ref:e})});pD.displayName=nX;var rX="DropdownMenuItem",mD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(BY,{...s,...r,ref:e})});mD.displayName=rX;var sX="DropdownMenuCheckboxItem",gD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(zY,{...s,...r,ref:e})});gD.displayName=sX;var iX="DropdownMenuRadioGroup",oX=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(WY,{...s,...r,ref:e})});oX.displayName=iX;var aX="DropdownMenuRadioItem",vD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(HY,{...s,...r,ref:e})});vD.displayName=aX;var lX="DropdownMenuItemIndicator",yD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(KY,{...s,...r,ref:e})});yD.displayName=lX;var cX="DropdownMenuSeparator",wD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(GY,{...s,...r,ref:e})});wD.displayName=cX;var uX="DropdownMenuArrow",dX=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(qY,{...s,...r,ref:e})});dX.displayName=uX;var fX="DropdownMenuSubTrigger",xD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(QY,{...s,...r,ref:e})});xD.displayName=fX;var hX="DropdownMenuSubContent",_D=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=gn(n);return u.jsx(YY,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_D.displayName=hX;var pX=lD,mX=uD,gX=dD,ED=hD,TD=pD,SD=mD,CD=gD,bD=vD,ID=yD,PD=wD,AD=xD,RD=_D;const wh=pX,xh=mX,vX=J.forwardRef(({className:t,inset:e,children:n,...r},s)=>u.jsxs(AD,{ref:s,className:he("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,u.jsx(qW,{className:"ml-auto h-4 w-4"})]}));vX.displayName=AD.displayName;const yX=J.forwardRef(({className:t,...e},n)=>u.jsx(RD,{ref:n,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));yX.displayName=RD.displayName;const nu=J.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(gX,{children:u.jsx(ED,{ref:r,sideOffset:e,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));nu.displayName=ED.displayName;const Yi=J.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(SD,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Yi.displayName=SD.displayName;const wX=J.forwardRef(({className:t,children:e,checked:n,...r},s)=>u.jsxs(CD,{ref:s,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(ID,{children:u.jsx(QN,{className:"h-4 w-4"})})}),e]}));wX.displayName=CD.displayName;const xX=J.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(bD,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(ID,{children:u.jsx(YW,{className:"h-2 w-2 fill-current"})})}),e]}));xX.displayName=bD.displayName;const Fx=J.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(TD,{ref:r,className:he("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Fx.displayName=TD.displayName;const $x=J.forwardRef(({className:t,...e},n)=>u.jsx(PD,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",t),...e}));$x.displayName=PD.displayName;const _X=mp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ux({className:t,variant:e,...n}){return u.jsx("div",{className:he(_X({variant:e}),t),...n})}const EX=()=>{const{user:t}=Un(),[e,n]=p.useState([]),[r,s]=p.useState(0),i=$n();p.useEffect(()=>{if(!t||!t.role)return;let c=["all",t.role];t.stageId&&c.push(t.stageId);const f=Fe(i,"notifications"),h=ln(f,qn("recipients","array-contains-any",c),uc("timestamp","desc"),_8(15)),m=Zn(h,g=>{const x=g.docs.map(_=>({id:_.id,..._.data()}));n(x);const w=x.filter(_=>!_.readBy||!_.readBy.includes(t.uid)).length;s(w)},g=>{console.error("Error fetching notifications: ",g),ee({title:"خطأ",description:"فشل تحميل الإشعارات.",variant:"destructive"})});return()=>m()},[i,t]);const o=async c=>{if(!(!t||!t.uid))try{const f=xe(i,"notifications",c),h=e.find(m=>m.id===c);if(h&&(!h.readBy||!h.readBy.includes(t.uid))){const m=h.readBy?[...h.readBy,t.uid]:[t.uid];await Da(f,{readBy:m})}}catch(f){console.error("Error marking notification as read:",f)}},a=async()=>{if(!t||!t.uid||r===0)return;const c=oy(i);e.forEach(f=>{if(!f.readBy||!f.readBy.includes(t.uid)){const h=xe(i,"notifications",f.id),m=f.readBy?[...f.readBy,t.uid]:[t.uid];c.update(h,{readBy:m})}});try{await c.commit()}catch(f){console.error("Error marking all as read:",f)}},l=async(c,f)=>{if(c.stopPropagation(),!(!t||t.role!=="admin")&&window.confirm("هل أنت متأكد من حذف هذا الإشعار للجميع؟"))try{await ai(xe(i,"notifications",f)),ee({title:"تم الحذف",description:"تم حذف الإشعار بنجاح."})}catch(h){console.error("Error deleting notification: ",h),ee({title:"خطأ",description:"فشل حذف الإشعار.",variant:"destructive"})}};return u.jsxs(wh,{children:[u.jsx(xh,{asChild:!0,children:u.jsxs(ne,{variant:"ghost",size:"icon",className:"relative",children:[u.jsx(KW,{className:"h-5 w-5"}),r>0&&u.jsx(Ux,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-xs",children:r})]})}),u.jsxs(nu,{align:"end",className:"w-80",children:[u.jsxs(Fx,{className:"flex justify-between items-center",children:[u.jsx("span",{children:"الإشعارات"}),r>0&&u.jsx(ne,{variant:"link",size:"sm",className:"p-0 h-auto",onClick:a,children:"تعليم الكل كمقروء"})]}),u.jsx($x,{}),e.length>0?u.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.map(c=>{const f=!c.readBy||!c.readBy.includes(t.uid);return u.jsxs("div",{className:`relative flex items-center justify-between hover:bg-muted/50 rounded-md ${f?"bg-primary/10":""}`,children:[u.jsxs("div",{className:"flex-grow p-2 cursor-pointer",onClick:()=>o(c.id),children:[u.jsx("p",{className:"font-bold",children:c.title}),u.jsx("p",{className:"text-sm text-muted-foreground whitespace-normal",children:c.message}),u.jsx("p",{className:"text-xs text-muted-foreground text-left mt-1",children:c.timestamp?new Date(c.timestamp.toDate()).toLocaleString("ar-EG"):""})]}),t.role==="admin"&&u.jsx(ne,{variant:"ghost",size:"icon",className:"flex-shrink-0 text-destructive hover:text-destructive/80 mr-2 rtl:ml-2 rtl:mr-0",onClick:h=>l(h,c.id),children:u.jsx(er,{className:"h-4 w-4"})})]},c.id)})}):u.jsx(Yi,{disabled:!0,children:u.jsxs("div",{className:"flex items-center justify-center w-full p-4",children:[u.jsx(rH,{className:"w-5 h-5 mr-2 ml-0 rtl:ml-2 rtl:mr-0"}),u.jsx("span",{children:"لا توجد إشعارات جديدة"})]})})]})]})},TX=()=>{const{user:t,logout:e,schoolSettings:n}=Un(),{unreadChatsCount:r}=qQ();tn();const[s,i]=p.useState("مدرستنا تك"),o="https://storage.googleapis.com/hostinger-horizons-assets-prod/3ba56b60-c3fa-4b52-8e67-c1dea4ab1636/3e65cc517d9039f74d4f9a08b8568025.png";p.useEffect(()=>{n&&n.schoolName&&i(n.schoolName)},[n]);const a=()=>{e()},l=()=>{if(!t)return"/login";switch(t.role){case"admin":return"/admin";case"teacher":return"/teacher";case"student":return"/student";default:return"/login"}};return u.jsx(Ne.nav,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:"bg-card shadow-md sticky top-0 z-50",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs(Qd,{to:l(),className:"flex items-center space-x-2 rtl:space-x-reverse text-primary hover:text-primary/80 transition-colors",children:[u.jsx(Ne.img,{src:o,alt:"School Logo",className:"h-10 w-10",animate:{rotate:[0,10,-10,10,0]},transition:{duration:2,ease:"easeInOut",repeat:1/0,repeatDelay:3}}),u.jsx("span",{className:"text-xl font-bold",children:s})]}),u.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[u.jsx(EX,{}),u.jsx(Qd,{to:"/chat",children:u.jsxs(ne,{variant:"ghost",size:"icon",className:"relative",children:[u.jsx(tx,{className:"h-5 w-5"}),r>0&&u.jsx(Ux,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-xs",children:r})]})}),t&&u.jsxs(wh,{children:[u.jsx(xh,{asChild:!0,children:u.jsxs(ne,{variant:"ghost",className:"px-2 flex items-center",children:[u.jsx(oH,{size:24}),u.jsx("span",{className:"hidden md:inline mr-2 rtl:mr-0 rtl:ml-2",children:t.name})]})}),u.jsxs(nu,{align:"end",className:"w-56",children:[u.jsxs(Fx,{children:["أهلاً بك, ",t.name]}),u.jsx($x,{}),(t.role==="admin"||t.role==="teacher")&&u.jsx(Yi,{asChild:!0,children:u.jsxs(Qd,{to:t.role==="admin"?"/admin/profile":"/teacher/profile",className:"cursor-pointer",children:[u.jsx(ek,{className:"h-4 w-4 mr-2 ml-0 rtl:ml-2 rtl:mr-0"}),u.jsx("span",{children:"الملف الشخصي"})]})}),u.jsxs(Yi,{onClick:a,className:"cursor-pointer text-destructive focus:text-destructive",children:[u.jsx(nH,{className:"h-4 w-4 mr-2 ml-0 rtl:ml-2 rtl:mr-0"}),u.jsx("span",{children:"تسجيل الخروج"})]})]})]})]})]})})})},SX=()=>{const[t,e]=p.useState(" "),[n,r]=p.useState(""),[s,i]=p.useState([]),[o,a]=p.useState(!1),[l,c]=p.useState(!0),f=$n(),{user:h,updateSchoolSettings:m}=Un(),g=tn(),x="school_system_settings",w=()=>({id:String(Date.now()),name:"",semesterSystem:"two-semesters",semesterOne:{from:"",to:""},semesterTwo:{from:"",to:""}});p.useEffect(()=>{(async()=>{if(h){c(!0);try{const R=xe(f,"system_config",x),M=await Nn(R);if(M.exists()){const b=M.data();e(b.schoolName||" "),r(b.academicYear||""),i(b.educationalStages&&b.educationalStages.length>0?b.educationalStages.map(S=>({...w(),...S,id:String(S.id)})):[w()])}else i([w()])}catch(R){console.error("Error fetching system settings:",R),ee({title:"خطأ",description:"لم نتمكن من تحميل إعدادات النظام.",variant:"destructive"})}finally{c(!1)}}})()},[f,h]);const _=()=>{i([...s,w()])},E=I=>{i(s.filter(R=>R.id!==I))},v=(I,R,M)=>{i(s.map(b=>{if(b.id===I){if(R.startsWith("semesterOne.")||R.startsWith("semesterTwo.")){const[S,A]=R.split(".");return{...b,[S]:{...b[S],[A]:M}}}return{...b,[R]:M}}return b}))},T=async()=>{if(h){if(!t.trim()||!n.trim()||s.some(I=>!I.name.trim())){ee({title:"خطأ في الإدخال",description:"الرجاء ملء جميع الحقول المطلوبة.",variant:"destructive"});return}a(!0);try{const I={schoolName:t,academicYear:n,educationalStages:s.map(({id:M,name:b,semesterSystem:S,semesterOne:A,semesterTwo:P})=>({id:String(M),name:b,semesterSystem:S,semesterOne:A,semesterTwo:P})),updatedAt:new Date().toISOString(),updatedBy:h.uid},R=xe(f,"system_config",x);await mi(R,I,{merge:!0}),m({schoolName:t,educationalStages:I.educationalStages,academicYear:I.academicYear}),ee({title:"نجاح!",description:"تم حفظ إعدادات النظام بنجاح."})}catch(I){console.error("Error saving system settings:",I),ee({title:"خطأ",description:"لم نتمكن من حفظ الإعدادات.",variant:"destructive"})}finally{a(!1)}}};return l?u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"})}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(ZN,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إعدادات النظام"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>g("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"قم بتكوين الإعدادات الأساسية للنظام المدرسي."})]}),u.jsxs(Ye,{className:"shadow-xl mb-8",children:[u.jsx(nt,{children:u.jsx(Xe,{children:"الإعدادات العامة"})}),u.jsxs(st,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx(De,{htmlFor:"schoolName",className:"text-base",children:"اسم المدرسة"}),u.jsx(Ae,{id:"schoolName",value:t,onChange:I=>e(I.target.value),className:"mt-1"})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"academicYear",className:"text-base",children:"السنة الدراسية"}),u.jsx(Ae,{id:"academicYear",value:n,onChange:I=>r(I.target.value),className:"mt-1"})]})]})]}),u.jsxs(Ye,{className:"shadow-xl",children:[u.jsxs(nt,{children:[u.jsx(Xe,{children:"المراحل التعليمية"}),u.jsx(kn,{children:"إدارة المراحل وتحديد نظام وتواريخ الدراسة لكل مرحلة."})]}),u.jsxs(st,{children:[u.jsx(Ci,{children:s.map((I,R)=>u.jsxs(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mb-4 p-4 bg-muted/50 rounded-lg border",children:[u.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse mb-4",children:[u.jsx(Ae,{placeholder:`اسم المرحلة ${R+1}`,value:I.name,onChange:M=>v(I.id,"name",M.target.value),className:"flex-grow"}),s.length>1&&u.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>E(I.id),className:"text-destructive",children:u.jsx(er,{size:18})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx(De,{children:"نظام الدراسة"}),u.jsxs(cn,{value:I.semesterSystem,onValueChange:M=>v(I.id,"semesterSystem",M),children:[u.jsx(Qt,{className:"w-full mt-1",children:u.jsx(un,{})}),u.jsxs(Yt,{children:[u.jsx(Je,{value:"one-semester",children:"فصل دراسي واحد"}),u.jsx(Je,{value:"two-semesters",children:"فصلين دراسيين"})]})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[I.semesterSystem==="one-semester"&&u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx(De,{children:"من تاريخ"}),u.jsx(Ae,{type:"date",value:I.semesterOne.from,onChange:M=>v(I.id,"semesterOne.from",M.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{children:"إلى تاريخ"}),u.jsx(Ae,{type:"date",value:I.semesterOne.to,onChange:M=>v(I.id,"semesterOne.to",M.target.value)})]})]}),I.semesterSystem==="two-semesters"&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-sm font-medium",children:"الفصل الدراسي الأول"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx(De,{children:"من"}),u.jsx(Ae,{type:"date",value:I.semesterOne.from,onChange:M=>v(I.id,"semesterOne.from",M.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{children:"إلى"}),u.jsx(Ae,{type:"date",value:I.semesterOne.to,onChange:M=>v(I.id,"semesterOne.to",M.target.value)})]})]}),u.jsx("p",{className:"text-sm font-medium pt-2",children:"الفصل الدراسي الثاني"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx(De,{children:"من"}),u.jsx(Ae,{type:"date",value:I.semesterTwo.from,onChange:M=>v(I.id,"semesterTwo.from",M.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{children:"إلى"}),u.jsx(Ae,{type:"date",value:I.semesterTwo.to,onChange:M=>v(I.id,"semesterTwo.to",M.target.value)})]})]})]})]})]})]},I.id))}),u.jsxs(ne,{onClick:_,variant:"outline",className:"mt-4",children:[u.jsx(lo,{className:"mr-2 ml-0 h-5 w-5"})," إضافة مرحلة"]})]})]}),u.jsx(jn,{className:"mt-8 flex justify-end",children:u.jsxs(ne,{onClick:T,disabled:o||l,size:"lg",children:[o?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-primary-foreground mr-2 ml-0"}):u.jsx(ss,{className:"mr-2 ml-0 h-5 w-5"}),o?"جاري الحفظ...":"حفظ كل الإعدادات"]})})]})},CX=({isOpen:t,onClose:e,teacher:n,educationalStages:r,onSave:s,db:i})=>{const[o,a]=p.useState(""),[l,c]=p.useState(""),[f,h]=p.useState([]),[m,g]=p.useState(!1);p.useEffect(()=>{n?(a(n.name||""),c(n.email||""),h(n.assignedStages||[])):(a(""),c(""),h([]))},[n,t]);const x=()=>o.trim()?f.length===0?(ee({title:"خطأ في الإدخال",description:"يجب تحديد مرحلة تعليمية واحدة على الأقل.",variant:"destructive"}),!1):!0:(ee({title:"خطأ في الإدخال",description:"اسم المعلم مطلوب.",variant:"destructive"}),!1),w=async()=>{if(!x()||!n)return;g(!0);const _={name:o,assignedStages:f};try{const E=xe(i,"users",n.id);await Da(E,_);const v={...n,..._};s(v,!1),ee({title:"نجاح",description:"تم تحديث بيانات المعلم بنجاح."}),e()}catch(E){console.error("Error updating teacher:",E),ee({title:"خطأ",description:`فشل تحديث بيانات المعلم: ${E.message}`,variant:"destructive"})}finally{g(!1)}};return u.jsx(Ci,{children:t&&u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs(Ne.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-card p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:[u.jsx(nt,{children:u.jsx(Xe,{children:"تعديل بيانات المعلم"})}),u.jsxs(st,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(De,{htmlFor:"teacherName",children:"اسم المعلم"}),u.jsx(Ae,{id:"teacherName",value:o,onChange:_=>a(_.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"teacherEmail",children:"البريد الإلكتروني (للدخول)"}),u.jsx(Ae,{id:"teacherEmail",type:"email",value:l,disabled:!0})]}),u.jsxs("div",{children:[u.jsx(De,{children:"المراحل التعليمية المسندة"}),r.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-1",children:r.map(_=>u.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse p-2 border rounded-md bg-background/50",children:[u.jsx("input",{type:"checkbox",id:`stage-edit-${_.id}`,checked:f.includes(_.id),onChange:E=>{E.target.checked?h([...f,_.id]):h(f.filter(v=>v!==_.id))},className:"form-checkbox h-5 w-5 text-primary rounded focus:ring-primary"}),u.jsx(De,{htmlFor:`stage-edit-${_.id}`,className:"text-sm font-normal",children:_.name})]},_.id))}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد مراحل تعليمية معرفة. يرجى إضافتها من إعدادات النظام."})]})]}),u.jsxs(jn,{className:"flex justify-end space-x-2 rtl:space-x-reverse",children:[u.jsx(ne,{variant:"outline",onClick:e,children:"إلغاء"}),u.jsxs(ne,{onClick:w,disabled:m,children:[m?"جاري الحفظ...":"حفظ التعديلات",u.jsx(ss,{className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0 h-4 w-4"})]})]})]})})})},bX=({teacher:t,educationalStages:e,onEdit:n,onDelete:r,setIsLoadingParent:s,isLoadingParent:i,db:o})=>{const a=async()=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا المعلم؟ سيتم حذف بياناته من قاعدة البيانات فقط. يجب حذف حساب المصادقة الخاص به يدوياً من Firebase Console لمنعه من تسجيل الدخول.")){s(!0);try{await ai(xe(o,"users",t.id)),r(t.id),ee({title:"نجاح",description:"تم حذف بيانات المعلم. لا تنسَ حذف حساب المصادقة يدوياً.",duration:7e3})}catch(l){console.error("Error deleting teacher:",l),ee({title:"خطأ",description:"فشل حذف المعلم.",variant:"destructive"})}finally{s(!1)}}};return u.jsx(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:u.jsxs(Ye,{className:"shadow-lg hover:shadow-xl transition-shadow h-full flex flex-col",children:[u.jsxs(nt,{children:[u.jsx(Xe,{children:t.name}),u.jsx(kn,{children:t.email})]}),u.jsx(st,{className:"flex-grow space-y-2",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-muted-foreground",children:"المراحل المسندة (للتدريس):"}),t.assignedStages&&t.assignedStages.length>0?u.jsx("ul",{className:"list-disc list-inside rtl:list-outside rtl:pr-4 text-sm",children:t.assignedStages.map(l=>{const c=e.find(f=>f.id===l);return u.jsx("li",{children:c?c.name:"مرحلة غير معروفة"},l)})}):u.jsx("p",{className:"text-sm text-muted-foreground",children:"لا يوجد مراحل مسندة."})]})}),u.jsx(jn,{className:"flex justify-end items-center border-t pt-4 mt-auto",children:u.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[u.jsxs(ne,{variant:"outline",size:"sm",onClick:n,children:[u.jsx(Gc,{size:16,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," تعديل البيانات"]}),u.jsxs(ne,{variant:"destructive",size:"sm",onClick:a,disabled:i,children:[u.jsx(er,{size:16,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," حذف"]})]})})]})})};var IX="firebase",PX="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(IX,PX,"app");const ND=({isOpen:t,onClose:e,onSave:n,db:r,defaultRole:s,educationalStages:i})=>{const[o,a]=p.useState(""),[l,c]=p.useState(""),[f,h]=p.useState(""),[m,g]=p.useState(""),[x,w]=p.useState(""),[_,E]=p.useState(s||"student"),[v,T]=p.useState(""),[I,R]=p.useState(!1),M=()=>!o.trim()||!l.trim()||!f.trim()?(ee({title:"خطأ في الإدخال",description:"الاسم، كود الدخول، وكلمة المرور مطلوبون.",variant:"destructive"}),!1):f.length<6?(ee({title:"خطأ في الإدخال",description:"يجب أن تكون كلمة المرور 6 أحرف على الأقل.",variant:"destructive"}),!1):_==="student"&&!v?(ee({title:"خطأ في الإدخال",description:"يجب تحديد المرحلة التعليمية للطالب.",variant:"destructive"}),!1):!0,b=async()=>{var S;if(M()){R(!0);try{const A=`${l}@myapp.com`,P=J0("admin-creation-app"),k=dR(P),j=(await u6(k,A,f)).user;let L={uid:j.uid,name:o,email:A,loginCode:l,role:_};m.trim()&&(L.username=m.trim()),x.trim()&&(L.phone=x.trim()),_==="student"?(L.stageId=v,L.grade=((S=i.find(q=>q.id===v))==null?void 0:S.name)||"غير محدد"):_==="teacher"&&(L.assignedStages=[],L.subjects=[]),await mi(xe(r,"users",j.uid),L),n({...L,id:j.uid},!0),ee({title:"نجاح!",description:"تم إنشاء حساب المستخدم بنجاح."}),a(""),c(""),h(""),g(""),w(""),T(""),e()}catch(A){console.error("Error creating user:",A);let P="فشل إنشاء المستخدم.";A.code==="auth/email-already-in-use"?P="هذا الكود مستخدم بالفعل.":A.code==="auth/invalid-email"?P="الكود غير صالح.":A.code==="auth/weak-password"&&(P="كلمة المرور ضعيفة جدًا."),ee({title:"خطأ",description:`${P} (${A.message})`,variant:"destructive"})}finally{R(!1)}}};return u.jsx(Ci,{children:t&&u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs(Ne.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-card p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:S=>S.stopPropagation(),children:[u.jsx(nt,{children:u.jsx(Xe,{children:"إنشاء حساب مستخدم جديد"})}),u.jsxs(st,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(De,{htmlFor:"userName",children:"اسم المستخدم"}),u.jsx(Ae,{id:"userName",value:o,onChange:S=>a(S.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"loginCode",children:"الكود"}),u.jsx(Ae,{id:"loginCode",value:l,onChange:S=>c(S.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"userPassword",children:"كلمة المرور"}),u.jsx(Ae,{id:"userPassword",type:"password",value:f,onChange:S=>h(S.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"username",children:"اسم الدخول (اختياري)"}),u.jsx(Ae,{id:"username",value:m,onChange:S=>g(S.target.value),placeholder:" "})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"phone",children:"رقم الهاتف (اختياري)"}),u.jsx(Ae,{id:"phone",value:x,onChange:S=>w(S.target.value),placeholder:" "})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"userRole",children:"الدور"}),u.jsxs(cn,{value:_,onValueChange:E,children:[u.jsx(Qt,{id:"userRole",children:u.jsx(un,{placeholder:"اختر الدور"})}),u.jsxs(Yt,{children:[u.jsx(Je,{value:"student",children:"طالب"}),u.jsx(Je,{value:"teacher",children:"معلم"})]})]})]}),_==="student"&&u.jsxs("div",{children:[u.jsx(De,{htmlFor:"assignedStageId",children:"المرحلة التعليمية للطالب"}),u.jsxs(cn,{value:v||"",onValueChange:T,children:[u.jsx(Qt,{id:"assignedStageId",children:u.jsx(un,{placeholder:"اختر المرحلة"})}),u.jsx(Yt,{children:(i==null?void 0:i.length)>0?i.map(S=>u.jsx(Je,{value:S.id,children:S.name},S.id)):u.jsx(Je,{value:"placeholder-no-stages",disabled:!0,children:"لا توجد مراحل معرفة"})})]})]})]}),u.jsxs(jn,{className:"flex justify-end space-x-2 rtl:space-x-reverse",children:[u.jsx(ne,{variant:"outline",onClick:e,children:"إلغاء"}),u.jsxs(ne,{onClick:b,disabled:I,children:[I?"جاري الإنشاء...":"إنشاء حساب",u.jsx(uh,{className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0 h-4 w-4"})]})]})]})})})},AX=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState(!1),[o,a]=p.useState(!0),[l,c]=p.useState(!1),[f,h]=p.useState(!1),[m,g]=p.useState(null),x=$n(),w=tn(),_=p.useCallback(async()=>{a(!0);try{const I=ln(Fe(x,"users"),qn("role","==","teacher")),M=(await oi(I)).docs.map(P=>({id:P.id,...P.data()}));e(M);const b=xe(x,"system_config","school_system_settings"),S=await Nn(b),A=S.exists()?S.data().educationalStages||[]:[];r(A)}catch(I){console.error("Error fetching data:",I),ee({title:"خطأ",description:"فشل في تحميل البيانات الأولية.",variant:"destructive"})}finally{a(!1)}},[x]);p.useEffect(()=>{_()},[_]);const E=I=>{g(I),h(!0)},v=(I,R)=>{R&&I.role==="teacher"?e(M=>[...M,I]):R||e(M=>M.map(b=>b.id===I.id?I:b)),_()},T=I=>{e(R=>R.filter(M=>M.id!==I))};return o?u.jsxs("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"}),u.jsx("p",{className:"ml-4 rtl:mr-4 text-lg text-foreground",children:"جاري تحميل بيانات المعلمين..."})]}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(uh,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة المعلمين"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>w("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"إنشاء حسابات للمعلمين وتعديل بياناتهم الأساسية."})]}),u.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse mb-6",children:[u.jsxs(ne,{onClick:()=>c(!0),children:[u.jsx(uh,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-5 w-5"}),"إنشاء حساب معلم"]}),u.jsxs(ne,{variant:"secondary",onClick:()=>w("/admin/curriculum"),children:[u.jsx(gp,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-5 w-5"}),"إدارة المناهج الدراسية"]})]}),u.jsx(ND,{isOpen:l,onClose:()=>c(!1),onSave:v,db:x,defaultRole:"teacher",educationalStages:n}),u.jsx(CX,{isOpen:f,onClose:()=>h(!1),teacher:m,educationalStages:n,onSave:v,db:x}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(I=>u.jsx(bX,{teacher:I,educationalStages:n,onEdit:()=>E(I),onDelete:T,setIsLoadingParent:i,isLoadingParent:s,db:x},I.id))}),t.length===0&&!o&&u.jsx("p",{className:"text-center text-muted-foreground mt-8",children:"لا يوجد معلمون مضافون حالياً."})]})},RX=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState(!1),[o,a]=p.useState(!0),[l,c]=p.useState(!1),[f,h]=p.useState(!1),[m,g]=p.useState(null),[x,w]=p.useState(""),[_,E]=p.useState(""),v=$n(),T=tn(),I=p.useCallback(async()=>{a(!0);try{const k=ln(Fe(v,"users"),qn("role","==","student")),j=(await oi(k)).docs.map($=>({id:$.id,...$.data()}));e(j);const L=xe(v,"system_config","school_system_settings"),q=await Nn(L);q.exists()&&q.data().educationalStages?r(q.data().educationalStages):r([])}catch(k){console.error("Error fetching data:",k),ee({title:"خطأ",description:"فشل في تحميل البيانات الأولية.",variant:"destructive"})}finally{a(!1)}},[v]);p.useEffect(()=>{I()},[I]);const R=k=>{g(k),w(k.name||""),E(k.stageId||""),h(!0)},M=(k,D)=>{D&&k.role==="student"?e(j=>[...j,k]):D||e(j=>j.map(L=>L.id===k.id?k:L))},b=async()=>{var k;if(!x.trim()||!_){ee({title:"خطأ في الإدخال",description:"اسم الطالب والمرحلة التعليمية مطلوبان.",variant:"destructive"});return}i(!0);try{const D={name:x,stageId:_,grade:((k=n.find(q=>q.id===_))==null?void 0:k.name)||"غير محدد"},j=xe(v,"users",m.id);await Da(j,D);const L={...m,...D};M(L,!1),ee({title:"نجاح",description:"تم تحديث بيانات الطالب بنجاح."}),h(!1)}catch(D){console.error("Error updating student:",D),ee({title:"خطأ",description:`فشل تحديث بيانات الطالب: ${D.message}`,variant:"destructive"})}finally{i(!1)}},S=async k=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا الطالب؟ سيتم حذف بياناته فقط. يجب حذف حساب المصادقة الخاص به يدوياً من Firebase Console لمنعه من تسجيل الدخول.")){i(!0);try{await ai(xe(v,"users",k)),e(t.filter(D=>D.id!==k)),ee({title:"نجاح",description:"تم حذف بيانات الطالب. لا تنسَ حذف حساب المصادقة يدوياً.",duration:7e3})}catch(D){console.error("Error deleting student:",D),ee({title:"خطأ",description:"فشل حذف الطالب.",variant:"destructive"})}finally{i(!1)}}},A=n.map(k=>({...k,students:t.filter(D=>D.stageId===k.id)})),P=t.filter(k=>!k.stageId||!n.some(D=>D.id===k.stageId));return o?u.jsxs("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"}),u.jsx("p",{className:"ml-4 rtl:mr-4 text-lg text-foreground",children:"جاري تحميل بيانات الطلاب..."})]}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(tk,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة الطلاب"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>T("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"إنشاء حسابات للطلاب، تعديل بياناتهم، وتوزيعهم على المراحل التعليمية."})]}),u.jsxs(ne,{onClick:()=>c(!0),className:"mb-6",children:[u.jsx(uh,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-5 w-5"}),"إنشاء حساب طالب جديد"]}),u.jsx(ND,{isOpen:l,onClose:()=>c(!1),onSave:M,db:v,defaultRole:"student",educationalStages:n}),u.jsx(Ci,{children:f&&u.jsx(Ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:u.jsxs(Ne.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-card p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:k=>k.stopPropagation(),children:[u.jsx(nt,{children:u.jsx(Xe,{children:"تعديل بيانات الطالب"})}),u.jsxs(st,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(De,{htmlFor:"studentNameEdit",children:"اسم الطالب"}),u.jsx(Ae,{id:"studentNameEdit",value:x,onChange:k=>w(k.target.value)})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"assignedStageIdModalEdit",children:"المرحلة التعليمية"}),u.jsxs(cn,{value:_||"",onValueChange:E,children:[u.jsx(Qt,{id:"assignedStageIdModalEdit",children:u.jsx(un,{placeholder:"اختر المرحلة التعليمية"})}),u.jsx(Yt,{children:n.length>0?n.map(k=>u.jsx(Je,{value:k.id,children:k.name},k.id)):u.jsx(Je,{value:"placeholder-no-stages",disabled:!0,children:"لا توجد مراحل معرفة"})})]})]})]}),u.jsxs(jn,{className:"flex justify-end space-x-2 rtl:space-x-reverse",children:[u.jsx(ne,{variant:"outline",onClick:()=>h(!1),children:"إلغاء"}),u.jsxs(ne,{onClick:b,disabled:s,children:[s?"جاري الحفظ...":"حفظ التعديلات",u.jsx(ss,{className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0 h-4 w-4"})]})]})]})})}),u.jsxs("div",{className:"space-y-8",children:[A.map(k=>u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:k.name}),k.students.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border border-gray-300 rounded-md overflow-hidden",children:[u.jsx("thead",{className:"bg-primary/10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"الاسم"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"البريد الإلكتروني"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"رقم الهاتف"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"كود الدخول"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"تحكم"})]})}),u.jsx("tbody",{children:k.students.map(D=>u.jsxs("tr",{className:"hover:bg-primary/20 transition-colors",children:[u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:D.name}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:D.email}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:D.phone||"-"}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:D.loginCode||"-"}),u.jsxs("td",{className:"border border-gray-300 px-4 py-2 flex gap-2 justify-center",children:[u.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>R(D),children:[u.jsx(Gc,{size:14,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," تعديل"]}),u.jsxs(ne,{variant:"destructive",size:"sm",onClick:()=>S(D.id),disabled:s,children:[u.jsx(er,{size:14,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," حذف"]})]})]},D.id))})]})}):u.jsx("p",{className:"text-muted-foreground text-center py-4",children:"لا يوجد طلاب في هذه المرحلة بعد."})]},k.id)),P.length>0&&u.jsxs(Ye,{className:"shadow-lg border-destructive mt-8",children:[u.jsx(nt,{children:u.jsx(Xe,{className:"text-xl text-destructive",children:"طلاب غير مسجلين في مرحلة"})}),u.jsx(st,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border border-gray-300 rounded-md overflow-hidden",children:[u.jsx("thead",{className:"bg-destructive/10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"الاسم"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"البريد الإلكتروني"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"رقم الهاتف"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"كود الدخول"}),u.jsx("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"تحكم"})]})}),u.jsx("tbody",{children:P.map(k=>u.jsxs("tr",{className:"hover:bg-destructive/20 transition-colors",children:[u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:k.name}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:k.email}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:k.phone||"-"}),u.jsx("td",{className:"border border-gray-300 px-4 py-2",children:k.loginCode||"-"}),u.jsxs("td",{className:"border border-gray-300 px-4 py-2 flex gap-2 justify-center",children:[u.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>R(k),children:[u.jsx(Gc,{size:14,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," تعديل"]}),u.jsxs(ne,{variant:"destructive",size:"sm",onClick:()=>S(k.id),disabled:s,children:[u.jsx(er,{size:14,className:"mr-1 ml-0 rtl:ml-1 rtl:mr-0"})," حذف"]})]})]},k.id))})]})})})]})]})]})},NX=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState([]),[o,a]=p.useState(!1),[l,c]=p.useState(!0),[f,h]=p.useState(""),[m,g]=p.useState([]),x=$n(),w=tn(),_=p.useCallback(async()=>{c(!0);try{const S=(await oi(Fe(x,"subjects"))).docs.map(B=>({id:B.id,...B.data()}));e(S);const A=xe(x,"system_config","school_system_settings"),P=await Nn(A),k=P.exists()?P.data().educationalStages||[]:[];r(k);const D=ln(Fe(x,"users"),qn("role","==","teacher")),L=(await oi(D)).docs.map(B=>({id:B.id,...B.data()}));i(L);const $=(await oi(Fe(x,"subject_assignments"))).docs.map(B=>({id:B.id,...B.data()}));g($)}catch(b){console.error("Error fetching data:",b),ee({title:"خطأ",description:"فشل في تحميل البيانات الأولية.",variant:"destructive"})}finally{c(!1)}},[x]);p.useEffect(()=>{_()},[_]);const E=async()=>{if(!f.trim()){ee({title:"خطأ",description:"اسم المادة مطلوب.",variant:"destructive"});return}a(!0);try{const b=await Kc(Fe(x,"subjects"),{name:f});e([...t,{id:b.id,name:f}]),h(""),ee({title:"نجاح",description:"تمت إضافة المادة بنجاح."})}catch{ee({title:"خطأ",description:"فشل إضافة المادة.",variant:"destructive"})}finally{a(!1)}},v=async b=>{if(window.confirm("هل أنت متأكد؟ حذف المادة سيؤدي إلى حذف جميع ارتباطاتها بالمراحل والمعلمين.")){a(!0);try{const S=oy(x);S.delete(xe(x,"subjects",b)),m.filter(P=>P.subjectId===b).forEach(P=>S.delete(xe(x,"subject_assignments",P.id))),await S.commit(),e(t.filter(P=>P.id!==b)),g(m.filter(P=>P.subjectId!==b)),ee({title:"نجاح",description:"تم حذف المادة وارتباطاتها."})}catch{ee({title:"خطأ",description:"فشل حذف المادة.",variant:"destructive"})}finally{a(!1)}}},T=()=>{g([...m,{id:`new_${Date.now()}`,subjectId:"",stageId:"",teacherId:""}])},I=(b,S,A)=>{g(m.map(P=>P.id===b?{...P,[S]:A}:P))},R=async b=>{if(b.startsWith("new_"))g(m.filter(S=>S.id!==b));else{if(!window.confirm("هل أنت متأكد من حذف هذا الربط؟"))return;a(!0);try{await ai(xe(x,"subject_assignments",b)),g(m.filter(S=>S.id!==b)),ee({title:"نجاح",description:"تم حذف الربط."})}catch{ee({title:"خطأ",description:"فشل حذف الربط.",variant:"destructive"})}finally{a(!1)}}},M=async()=>{a(!0);try{const b=oy(x);for(const S of m){if(!S.subjectId||!S.stageId){ee({title:"بيانات ناقصة",description:"يجب تحديد المادة والمرحلة لكل ربط. المعلم اختياري.",variant:"destructive"}),a(!1);return}const A={subjectId:S.subjectId,stageId:S.stageId,teacherId:S.teacherId||""},P=S.id.startsWith("new_")?xe(Fe(x,"subject_assignments")):xe(x,"subject_assignments",S.id);b.set(P,A,{merge:!0})}await b.commit(),ee({title:"نجاح",description:"تم حفظ ارتباطات المواد بنجاح."}),_()}catch{ee({title:"خطأ",description:"فشل حفظ الارتباطات.",variant:"destructive"})}finally{a(!1)}};return l?u.jsxs("div",{className:"flex items-center justify-center min-h-[calc(100vh-10rem)]",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"}),u.jsx("p",{className:"ml-4 rtl:mr-4 text-lg text-foreground",children:"جاري تحميل البيانات..."})]}):u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(gp,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة المواد الدراسية"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>w("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"أولاً، قم بإنشاء قائمة بالمواد. ثانياً، قم بربط كل مادة بمرحلة ومعلم (المعلم اختياري)."})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs(Ye,{className:"lg:col-span-1 shadow-lg",children:[u.jsxs(nt,{children:[u.jsx(Xe,{children:"1. قائمة المواد"}),u.jsx(kn,{children:"أضف جميع المواد الدراسية هنا."})]}),u.jsxs(st,{children:[u.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[u.jsx(Ae,{value:f,onChange:b=>h(b.target.value),placeholder:"اسم المادة الجديدة"}),u.jsx(ne,{onClick:E,disabled:o,children:u.jsx(lo,{size:16})})]}),u.jsx("ul",{className:"mt-4 space-y-2 max-h-96 overflow-y-auto",children:t.map(b=>u.jsxs("li",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-md",children:[u.jsx("span",{children:b.name}),u.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>v(b.id),disabled:o,className:"text-destructive hover:text-destructive/80",children:u.jsx(er,{size:16})})]},b.id))})]})]}),u.jsxs(Ye,{className:"lg:col-span-2 shadow-lg",children:[u.jsxs(nt,{children:[u.jsx(Xe,{children:"2. ربط المواد بالمراحل والمعلمين"}),u.jsx(kn,{children:"حدد لكل مادة المرحلة التي تدرس فيها والمعلم المسؤول عنها."})]}),u.jsxs(st,{children:[u.jsx("div",{className:"space-y-4",children:m.map(b=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center p-3 border rounded-lg",children:[u.jsxs(cn,{value:b.subjectId,onValueChange:S=>I(b.id,"subjectId",S),children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر المادة"})}),u.jsx(Yt,{children:t.map(S=>u.jsx(Je,{value:S.id,children:S.name},S.id))})]}),u.jsxs(cn,{value:b.stageId,onValueChange:S=>I(b.id,"stageId",S),children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر المرحلة"})}),u.jsx(Yt,{children:n.map(S=>u.jsx(Je,{value:S.id,children:S.name},S.id))})]}),u.jsxs(cn,{value:b.teacherId,onValueChange:S=>I(b.id,"teacherId",S),children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر المعلم (اختياري)"})}),u.jsx(Yt,{children:s.map(S=>u.jsx(Je,{value:S.id,children:S.name},S.id))})]}),u.jsx(ne,{variant:"destructive",onClick:()=>R(b.id),children:u.jsx(er,{size:16})})]},b.id))}),u.jsxs(ne,{onClick:T,variant:"outline",className:"mt-4",children:[u.jsx(eH,{className:"mr-2 ml-0 h-4 w-4"})," إضافة ربط جديد"]})]}),u.jsx(jn,{children:u.jsxs(ne,{onClick:M,disabled:o,children:[u.jsx(ss,{className:"mr-2 ml-0 h-4 w-4"})," حفظ كل الارتباطات"]})})]})]})]})},kX=()=>{var q;const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState({}),[o,a]=p.useState(!0),[l,c]=p.useState(!1),[f,h]=p.useState(null),[m,g]=p.useState(!1),[x,w]=p.useState({textbooks:[],summaries:[],youtube:[],exams:[]}),[_,E]=p.useState({textbooks:{title:"",url:""},summaries:{title:"",url:""},youtube:{title:"",url:""},exams:{title:"",url:""}}),v=$n(),T=tn();p.useEffect(()=>{(async()=>{a(!0);try{const B=xe(v,"system_config","school_system_settings"),O=await Nn(B),F=O.exists()?O.data().educationalStages||[]:[];e(F);const W=ln(Fe(v,"users"),qn("role","==","teacher")),X=(await oi(W)).docs.map(se=>({id:se.id,...se.data()}));r(X);const K=F.filter(se=>se&&typeof se.id=="string"&&se.id.trim()!=="").map(se=>{const oe=xe(v,"curriculum",se.id);return Zn(oe,Y=>{const ue=Y.exists()?Y.data():{};i(pe=>({...pe,[se.id]:ue}))})});return a(!1),()=>K.forEach(se=>se&&se())}catch(B){console.error("Error fetching data:",B),ee({title:"خطأ فادح",description:"فشل تحميل بيانات الصفحة.",variant:"destructive"}),a(!1)}})()},[v]);const I=($,B,O,F,W)=>{i(H=>{const X={...H},te=X[$]||{},se=[...te[B]||[]],oe={...se[O],[F]:W};if(F==="teacherId"){const Y=n.find(ue=>ue.id===W);oe.teacherName=Y?Y.name:""}return se[O]=oe,X[$]={...te,[B]:se},X})},R=($,B)=>{const O={id:`new_${Date.now()}`,name:"",teacherId:"",teacherName:"",content:{textbooks:[],summaries:[],youtube:[],exams:[]}};i(F=>{const W=F[$]||{},H=W[B]||[];return{...F,[$]:{...W,[B]:[...H,O]}}})},M=($,B,O)=>{i(F=>{const W=F[$]||{},H=(W[B]||[]).filter((X,te)=>te!==O);return{...F,[$]:{...W,[B]:H}}})},b=async $=>{c(!0);try{const B=s[$]||{},O={};for(const W of["semesterOneSubjects","semesterTwoSubjects"]){const H=B[W]||[];if(H.some(X=>!X.name.trim())){ee({title:"بيانات ناقصة",description:"اسم المادة لا يمكن أن يكون فارغاً.",variant:"destructive"}),c(!1);return}O[W]=H.map(X=>({id:X.id.startsWith("new_")?xe(Fe(v,"dummy")).id:X.id,name:X.name,teacherId:X.teacherId||"",teacherName:X.teacherName||"",content:X.content||{textbooks:[],summaries:[],youtube:[],exams:[]}}))}const F=xe(v,"curriculum",$);await mi(F,O,{merge:!0}),ee({title:"نجاح!",description:"تم حفظ المناهج للمرحلة بنجاح."})}catch(B){console.error("Error saving curriculum:",B),ee({title:"خطأ فادح عند الحفظ",description:`فشل حفظ المنهج الدراسي. الخطأ: ${B.message}`,variant:"destructive"})}finally{c(!1)}},S=($,B,O)=>{h({...$,stageId:B,semester:O}),w($.content||{textbooks:[],summaries:[],youtube:[],exams:[]}),g(!0)},A=($,B,O)=>{E(F=>({...F,[$]:{...F[$],[B]:O}}))},P=$=>{const B=_[$];if(!B.url.trim()||!B.title.trim()){ee({title:"خطأ",description:"الرجاء إدخال العنوان والرابط.",variant:"destructive"});return}w(O=>({...O,[$]:[...O[$]||[],{id:`new_${Date.now()}`,...B}]})),E(O=>({...O,[$]:{title:"",url:""}}))},k=($,B)=>{w(O=>({...O,[$]:(O[$]||[]).filter((F,W)=>W!==B)}))},D=async()=>{if(f){c(!0);try{const{stageId:$,semester:B,id:O}=f,H=((s[$]||{})[B]||[]).map(te=>te.id===O?{...te,content:x}:te),X=xe(v,"curriculum",$);await mi(X,{[B]:H},{merge:!0}),ee({title:"نجاح",description:"تم حفظ المحتوى التعليمي بنجاح."}),g(!1),h(null)}catch($){console.error("Error saving content:",$),ee({title:"خطأ",description:"فشل حفظ المحتوى.",variant:"destructive"})}finally{c(!1)}}},j=($,B,O)=>{var F;return u.jsxs(Ye,{className:"border-none shadow-none",children:[u.jsx(nt,{children:u.jsx(Xe,{className:"text-lg",children:O})}),u.jsxs(st,{className:"space-y-4 pt-4",children:[(((F=s[$])==null?void 0:F[B])||[]).map((W,H)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center p-3 border rounded-lg",children:[u.jsx(Ae,{placeholder:"اسم المادة",value:W.name,onChange:X=>I($,B,H,"name",X.target.value),className:"md:col-span-2"}),u.jsxs(cn,{value:W.teacherId||"unassigned",onValueChange:X=>I($,B,H,"teacherId",X==="unassigned"?"":X),children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر المعلم"})}),u.jsxs(Yt,{children:[u.jsx(Je,{value:"unassigned",children:u.jsx("em",{children:"بدون معلم"})}),n.map(X=>u.jsx(Je,{value:X.id,children:X.name},X.id))]})]}),u.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>S(W,$,B),children:[u.jsx(XN,{className:"h-4 w-4 mr-2 ml-0 rtl:ml-2 rtl:mr-0"}),"إدارة المحتوى"]}),u.jsx(ne,{variant:"destructive",size:"icon",onClick:()=>M($,B,H),children:u.jsx(er,{size:16})})]},W.id||H)),u.jsxs(ne,{onClick:()=>R($,B),variant:"outline",className:"w-full",children:[u.jsx(lo,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," إضافة مادة جديدة"]})]})]})};if(o)return u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"})});const L=t.filter($=>$&&typeof $.id=="string"&&$.id.trim()!=="");return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(gp,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة المناهج الدراسية"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>T("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"أدر المواد الدراسية والمحتوى التعليمي لكل مرحلة وفصل دراسي."})]}),L.length>0?u.jsx(l2,{type:"single",collapsible:!0,className:"w-full",defaultValue:(q=L[0])==null?void 0:q.id,children:L.map($=>u.jsxs(mx,{value:$.id,children:[u.jsx(gx,{className:"text-xl font-semibold",children:$.name}),u.jsxs(vx,{children:[$.semesterSystem==="two-semesters"?u.jsxs(A2,{defaultValue:"semester1",className:"w-full",children:[u.jsxs(wx,{children:[u.jsx(Qc,{value:"semester1",children:"الفصل الدراسي الأول"}),u.jsx(Qc,{value:"semester2",children:"الفصل الدراسي الثاني"})]}),u.jsx(Yc,{value:"semester1",children:j($.id,"semesterOneSubjects","منهج الفصل الدراسي الأول")}),u.jsx(Yc,{value:"semester2",children:j($.id,"semesterTwoSubjects","منهج الفصل الدراسي الثاني")})]}):j($.id,"semesterOneSubjects","منهج الفصل الدراسي الواحد"),u.jsx(jn,{className:"mt-4",children:u.jsxs(ne,{onClick:()=>b($.id),disabled:l,children:[l?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-foreground"}):u.jsx(ss,{className:"mr-2 ml-0 h-4 w-4"}),u.jsx("span",{className:"ml-2 rtl:mr-2",children:"حفظ تغييرات المرحلة"})]})})]})]},$.id))}):u.jsxs(Ye,{className:"text-center p-8",children:[u.jsx(Xe,{children:"لا توجد مراحل دراسية"}),u.jsxs(kn,{className:"mt-2",children:["اذهب إلى ",u.jsx(ne,{variant:"link",onClick:()=>T("/admin/settings"),children:"إعدادات النظام"})," لإضافة مراحل."]})]}),u.jsx(Ci,{children:m&&f&&u.jsx(qc,{open:m,onOpenChange:g,children:u.jsxs(Oa,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(La,{children:[u.jsxs(Fa,{children:["إدارة محتوى: ",f.name]}),u.jsx(Ep,{children:"أضف روابط الكتب، الملخصات، الاختبارات، والفيديوهات لهذه المادة."})]}),u.jsx("div",{className:"space-y-4 py-4",children:[{type:"textbooks",title:"الكتب المدرسية",icon:u.jsx(Yw,{})},{type:"summaries",title:"الملخصات",icon:u.jsx(Zw,{})},{type:"exams",title:"الاختبارات",icon:u.jsx(Jw,{})},{type:"youtube",title:"شروحات يوتيوب",icon:u.jsx(ex,{})}].map($=>u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[$.icon,u.jsx("span",{className:"mr-2 rtl:mr-0 rtl:ml-2",children:$.title})]}),u.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-2",children:(x[$.type]||[]).map((B,O)=>u.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-medium",children:B.title}),u.jsx("a",{href:B.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary truncate block",children:B.url})]}),u.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>k($.type,O),children:u.jsx(er,{className:"h-4 w-4 text-destructive"})})]},B.id||O))}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx(Ae,{placeholder:"عنوان الرابط",value:_[$.type].title,onChange:B=>A($.type,"title",B.target.value)}),u.jsx(Ae,{placeholder:"الرابط (URL)",value:_[$.type].url,onChange:B=>A($.type,"url",B.target.value)}),u.jsx(ne,{onClick:()=>P($.type),children:u.jsx(lo,{className:"h-4 w-4"})})]}),u.jsx(nx,{className:"my-4"})]},$.type))}),u.jsxs(Va,{children:[u.jsx(ne,{variant:"outline",onClick:()=>g(!1),children:"إلغاء"}),u.jsx(ne,{onClick:D,disabled:l,children:l?"جاري الحفظ...":"حفظ المحتوى"})]})]})})})]})},Bx=J.forwardRef(({className:t,...e},n)=>u.jsx("textarea",{className:he("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Bx.displayName="Textarea";const jX=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,i]=p.useState("all"),[o,a]=p.useState([]),[l,c]=p.useState(!1),{user:f}=Un(),h=$n(),m=tn();p.useEffect(()=>{(async()=>{const w=xe(h,"system_config","school_system_settings"),_=await Nn(w);_.exists()&&a(_.data().educationalStages||[])})()},[h]);const g=async()=>{if(!t.trim()||!n.trim()){ee({title:"بيانات ناقصة",description:"الرجاء إدخال عنوان ورسالة للإشعار.",variant:"destructive"});return}c(!0);try{await Kc(Fe(h,"notifications"),{title:t,message:n,senderId:f.uid,senderName:f.name,recipients:[s],timestamp:iy(),readBy:[]}),ee({title:"تم الإرسال بنجاح!",description:"تم إرسال الإشعار إلى المستلمين المحددين."}),e(""),r(""),i("all")}catch(x){console.error("Error sending notification: ",x),ee({title:"خطأ في الإرسال",description:"حدث خطأ أثناء إرسال الإشعار. يرجى المحاولة مرة أخرى.",variant:"destructive"})}finally{c(!1)}};return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(ch,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إرسال إشعار جديد"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>m("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"أرسل إعلانات وتنبيهات للمستخدمين في النظام."})]}),u.jsxs(Ye,{children:[u.jsx(st,{className:"pt-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(De,{htmlFor:"title",children:"عنوان الإشعار"}),u.jsx(Ae,{id:"title",placeholder:"مثال: اجتماع أولياء الأمور",value:t,onChange:x=>e(x.target.value)})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(De,{htmlFor:"message",children:"نص الرسالة"}),u.jsx(Bx,{id:"message",placeholder:"اكتب تفاصيل الإشعار هنا...",value:n,onChange:x=>r(x.target.value)})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(De,{htmlFor:"recipients",children:"إرسال إلى"}),u.jsxs(cn,{value:s,onValueChange:i,children:[u.jsx(Qt,{id:"recipients",children:u.jsx(un,{placeholder:"اختر المستلمين"})}),u.jsxs(Yt,{children:[u.jsx(Je,{value:"all",children:"الجميع"}),u.jsx(Je,{value:"teacher",children:"المعلمين فقط"}),u.jsx(Je,{value:"student",children:"الطلاب فقط"}),o.map(x=>u.jsxs(Je,{value:x.id,children:["طلاب ",x.name]},x.id))]})]})]})]})}),u.jsx(jn,{children:u.jsxs(ne,{onClick:g,disabled:l,children:[l?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-foreground"}):u.jsx(ch,{className:"mr-2 ml-0 h-4 w-4"}),u.jsx("span",{className:"ml-2 rtl:mr-2",children:"إرسال الإشعار"})]})})]})]})},DX=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,a]=p.useState(!1),[l,c]=p.useState(!1),[f,h]=p.useState(null),[m,g]=p.useState({name:"",url:"",stageId:""}),x=$n(),w=tn();p.useEffect(()=>{(async()=>{try{const S=xe(x,"system_config","school_system_settings"),A=await Nn(S),P=A.exists()?A.data().educationalStages||[]:[];e(P)}catch(S){console.error("Error fetching stages:",S),ee({title:"خطأ",description:"فشل تحميل المراحل الدراسية.",variant:"destructive"})}})();const M=ln(Fe(x,"online_classrooms"),uc("name")),b=Zn(M,S=>{const A=S.docs.map(P=>({id:P.id,...P.data()}));r(A),i(!1)},S=>{console.error("Error fetching rooms:",S),ee({title:"خطأ",description:"فشل تحميل الغرف الافتراضية.",variant:"destructive"}),i(!1)});return()=>b()},[x]);const _=(R=null)=>{h(R),g(R?{name:R.name,url:R.url,stageId:R.stageId}:{name:"",url:"",stageId:""}),c(!0)},E=(R,M)=>{g(b=>({...b,[R]:M}))},v=async R=>{if(R.preventDefault(),!m.name||!m.url||!m.stageId){ee({title:"بيانات ناقصة",description:"الرجاء ملء جميع الحقول.",variant:"destructive"});return}a(!0);try{f?(await Da(xe(x,"online_classrooms",f.id),m),ee({title:"نجاح",description:"تم تحديث الغرفة بنجاح."})):(await Kc(Fe(x,"online_classrooms"),m),ee({title:"نجاح",description:"تمت إضافة الغرفة بنجاح."})),c(!1)}catch(M){console.error("Error submitting room:",M),ee({title:"خطأ",description:"فشل حفظ بيانات الغرفة.",variant:"destructive"})}finally{a(!1)}},T=async R=>{if(window.confirm("هل أنت متأكد من حذف هذه الغرفة؟"))try{await ai(xe(x,"online_classrooms",R)),ee({title:"نجاح",description:"تم حذف الغرفة بنجاح."})}catch(M){console.error("Error deleting room:",M),ee({title:"خطأ",description:"فشل حذف الغرفة.",variant:"destructive"})}},I=R=>{var M;return((M=t.find(b=>b.id===R))==null?void 0:M.name)||"غير محدد"};return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsx(vp,{className:"w-8 h-8 text-primary"}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة الغرف الافتراضية"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>w("/admin"),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"أدر روابط الحصص الأونلاين (مثل Zoom أو Teams) لكل مرحلة دراسية."})]}),u.jsxs(Ye,{children:[u.jsx(nt,{children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx(Xe,{children:"قائمة الغرف"}),u.jsx(kn,{children:"جميع الغرف الافتراضية المتاحة في النظام."})]}),u.jsxs(ne,{onClick:()=>_(),children:[u.jsx(lo,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," إضافة غرفة جديدة"]})]})}),u.jsx(st,{children:s?u.jsx("div",{className:"flex justify-center p-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):n.length===0?u.jsx("p",{className:"text-center text-muted-foreground p-8",children:"لا توجد غرف افتراضية بعد. ابدأ بإضافة واحدة!"}):u.jsx("div",{className:"space-y-4",children:n.map(R=>u.jsxs(Ne.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-primary",children:R.name}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["المرحلة: ",I(R.stageId)]}),u.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline truncate",children:R.url})]}),u.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[u.jsx(ne,{variant:"outline",size:"icon",onClick:()=>_(R),children:u.jsx(Gc,{size:16})}),u.jsx(ne,{variant:"destructive",size:"icon",onClick:()=>T(R.id),children:u.jsx(er,{size:16})})]})]},R.id))})})]}),u.jsx(Ci,{children:l&&u.jsx(qc,{open:l,onOpenChange:c,children:u.jsxs(Oa,{children:[u.jsxs(La,{children:[u.jsx(Fa,{children:f?"تعديل الغرفة":"إضافة غرفة جديدة"}),u.jsx(Ep,{children:"املأ التفاصيل أدناه لحفظ الغرفة الافتراضية."})]}),u.jsxs("form",{onSubmit:v,className:"space-y-4 py-4",children:[u.jsx(Ae,{placeholder:"اسم الغرفة (مثال: حصة الرياضيات)",value:m.name,onChange:R=>E("name",R.target.value),required:!0}),u.jsx(Ae,{type:"url",placeholder:"رابط الغرفة (URL)",value:m.url,onChange:R=>E("url",R.target.value),required:!0}),u.jsxs(cn,{value:m.stageId,onValueChange:R=>E("stageId",R),required:!0,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر المرحلة الدراسية"})}),u.jsx(Yt,{children:t.map(R=>u.jsx(Je,{value:R.id,children:R.name},R.id))})]}),u.jsxs(Va,{children:[u.jsx(jK,{asChild:!0,children:u.jsx(ne,{type:"button",variant:"outline",children:"إلغاء"})}),u.jsxs(ne,{type:"submit",disabled:o,children:[o?u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-foreground"}):u.jsx(ss,{className:"mr-2 ml-0 h-4 w-4"}),u.jsx("span",{className:"ml-2 rtl:mr-2",children:"حفظ"})]})]})]})]})})})]})};var kD={exports:{}},jD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=p;function MX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OX=typeof Object.is=="function"?Object.is:MX,LX=Ba.useState,VX=Ba.useEffect,FX=Ba.useLayoutEffect,$X=Ba.useDebugValue;function UX(t,e){var n=e(),r=LX({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return FX(function(){s.value=n,s.getSnapshot=e,Tg(s)&&i({inst:s})},[t,n,e]),VX(function(){return Tg(s)&&i({inst:s}),t(function(){Tg(s)&&i({inst:s})})},[t]),$X(n),n}function Tg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!OX(t,n)}catch{return!0}}function BX(t,e){return e()}var zX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BX:UX;jD.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:zX;kD.exports=jD;var WX=kD.exports;function HX(){return WX.useSyncExternalStore(KX,()=>!0,()=>!1)}function KX(){return()=>{}}var zx="Avatar",[GX,FJ]=vr(zx),[qX,DD]=GX(zx),MD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return u.jsx(qX,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:u.jsx(_e.span,{...r,ref:e})})});MD.displayName=zx;var OD="AvatarImage",LD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=DD(OD,n),a=QX(r,i),l=Sn(c=>{s(c),o.onImageLoadingStatusChange(c)});return Ln(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?u.jsx(_e.img,{...i,ref:e,src:r}):null});LD.displayName=OD;var VD="AvatarFallback",FD=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=DD(VD,n),[o,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?u.jsx(_e.span,{...s,ref:e}):null});FD.displayName=VD;function SC(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QX(t,{referrerPolicy:e,crossOrigin:n}){const r=HX(),s=p.useRef(null),i=(()=>r?(s.current||(s.current=new window.Image),s.current):null)(),[o,a]=p.useState(()=>SC(i,t));return Ln(()=>{a(SC(i,t))},[i,t]),Ln(()=>{const l=h=>()=>{a(h)};if(!i)return;const c=l("loaded"),f=l("error");return i.addEventListener("load",c),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",c),i.removeEventListener("error",f)}},[i,n,e]),o}var $D=MD,UD=LD,BD=FD;const df=J.forwardRef(({className:t,...e},n)=>u.jsx($D,{ref:n,className:he("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));df.displayName=$D.displayName;const YX=J.forwardRef(({className:t,...e},n)=>u.jsx(UD,{ref:n,className:he("aspect-square h-full w-full",t),...e}));YX.displayName=UD.displayName;const ff=J.forwardRef(({className:t,...e},n)=>u.jsx(BD,{ref:n,className:he("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ff.displayName=BD.displayName;const CC=()=>{const{user:t}=Un(),{chatId:e}=HV(),n=tn(),r=$n(),[s,i]=p.useState([]),[o,a]=p.useState([]),[l,c]=p.useState(""),[f,h]=p.useState(null),[m,g]=p.useState(!0),x=s.filter(K=>K.isUnread).length,[w,_]=p.useState(!1),E=p.useRef(null),[v,T]=p.useState(!1),[I,R]=p.useState([]),[M,b]=p.useState(""),[S,A]=p.useState(!1),[P,k]=p.useState(null),[D,j]=p.useState(""),L=()=>{if(!t)return"/login";switch(t.role){case"admin":return"/admin";case"teacher":return"/teacher";case"student":return"/student";default:return"/login"}};p.useEffect(()=>{if(!t)return;g(!0);const K=t.role==="admin"?ln(Fe(r,"chats"),uc("lastMessage.timestamp","desc")):ln(Fe(r,"chats"),qn("participants","array-contains",t.uid),uc("lastMessage.timestamp","desc")),se=Zn(K,async oe=>{const Y=await Promise.all(oe.docs.map(async ue=>{const pe=ue.data(),ve=pe.participants.find(qe=>qe!==t.uid);let de=pe.participantDetails;if(!de){const qe=pe.participants.map(Et=>Nn(xe(r,"users",Et))),It=await Promise.all(qe);de={},It.forEach(Et=>{Et.exists()&&(de[Et.id]={name:Et.data().name,role:Et.data().role})})}const Te=ve?de[ve]||{name:"مستخدم غير معروف"}:{name:"محادثة ذاتية"},Be=pe.lastMessage&&pe.lastMessage.senderId!==t.uid&&(!pe.readBy||!pe.readBy.includes(t.uid));return{...pe,id:ue.id,otherParticipant:Te,participantDetails:de,isUnread:Be}}));i(Y),g(!1)},oe=>{console.error("Error fetching chats:",oe),ee({title:"خطأ",description:"فشل تحميل المحادثات.",variant:"destructive"}),g(!1)});return()=>se()},[r,t]),p.useEffect(()=>{if(e){const K=s.find(Y=>Y.id===e);h(K),_(!0);const se=ln(Fe(r,"chats",e,"messages"),uc("timestamp","asc")),oe=Zn(se,Y=>{a(Y.docs.map(ue=>({id:ue.id,...ue.data()}))),_(!1)},Y=>{console.error("Error fetching messages:",Y),_(!1)});return q(e),()=>oe()}else h(null),a([])},[e,s,r]),p.useEffect(()=>{var K;(K=E.current)==null||K.scrollIntoView({behavior:"smooth"})},[o]);const q=async K=>{if(!t||!K)return;const se=xe(r,"chats",K),oe=await Nn(se);if(oe.exists()){const ue=oe.data().readBy||[];ue.includes(t.uid)||await Da(se,{readBy:[...ue,t.uid]})}},$=async K=>{if(K.preventDefault(),l.trim()===""||!f)return;const se=l;c(""),await Kc(Fe(r,"chats",f.id,"messages"),{text:se,senderId:t.uid,timestamp:iy(),senderName:t.name}),await mi(xe(r,"chats",f.id),{lastMessage:{text:se,timestamp:new Date,senderId:t.uid},readBy:[t.uid]},{merge:!0})},B=K=>{n(`/chat/${K.id}`)},O=async()=>{if(!t)return;let K;t.role==="admin"?K=ln(Fe(r,"users"),qn("role","in",["teacher","student"])):t.role==="teacher"?K=ln(Fe(r,"users"),qn("role","in",["admin","student"])):K=ln(Fe(r,"users"),qn("role","in",["admin","teacher"]));const oe=(await oi(K)).docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.id!==t.uid);R(oe)},F=async()=>{if(!M)return;const K=s.find(ue=>ue.participants.includes(M)&&ue.participants.includes(t.uid));if(K){n(`/chat/${K.id}`),T(!1);return}const se=await Nn(xe(r,"users",M));if(!se.exists())return;const oe=se.data(),Y=await Kc(Fe(r,"chats"),{participants:[t.uid,M],participantDetails:{[t.uid]:{name:t.name,role:t.role},[M]:{name:oe.name,role:oe.role}},createdAt:iy(),lastMessage:{text:"المحادثة بدأت للتو.",timestamp:new Date,senderId:t.uid},readBy:[t.uid]});n(`/chat/${Y.id}`),T(!1)},W=async(K,se)=>{if(window.confirm("هل أنت متأكد من حذف هذه الرسالة نهائياً؟"))try{await ai(xe(r,"chats",K,"messages",se)),ee({title:"نجاح",description:"تم حذف الرسالة."})}catch{ee({title:"خطأ",description:"فشل حذف الرسالة.",variant:"destructive"})}},H=K=>{k(K),j(K.text),A(!0)},X=async()=>{if(!(!P||!D.trim()))try{await Da(xe(r,"chats",f.id,"messages",P.id),{text:D,edited:!0}),ee({title:"نجاح",description:"تم تعديل الرسالة."}),A(!1),k(null)}catch{ee({title:"خطأ",description:"فشل تعديل الرسالة.",variant:"destructive"})}},te=K=>{var se;return K?t.role==="admin"?Object.values(K.participantDetails||{}).map(oe=>oe.name).join(" - ")||"محادثة":((se=K.otherParticipant)==null?void 0:se.name)||"مستخدم":""};return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[u.jsxs("div",{className:"relative",children:[u.jsx(tx,{className:"w-8 h-8 text-primary"}),x>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:x})]}),u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"مركز الرسائل"})]}),u.jsxs(ne,{variant:"outline",onClick:()=>n(L()),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground",children:"تواصل مع المعلمين والطلاب والمديرين."})]}),u.jsxs(Ye,{className:"h-[calc(100vh-14rem)] flex flex-row shadow-lg border rounded-lg",children:[u.jsxs("aside",{className:`w-full md:w-1/3 lg:w-1/4 border-l rtl:border-r rtl:border-l-0 p-2 flex flex-col ${f?"hidden md:flex":"flex"}`,children:[u.jsxs("div",{className:"flex justify-between items-center p-2 mb-2",children:[u.jsx("h2",{className:"text-xl font-bold",children:"المحادثات"}),u.jsxs(qc,{open:v,onOpenChange:T,children:[u.jsx(NK,{asChild:!0,children:u.jsx(ne,{variant:"ghost",size:"icon",onClick:O,children:u.jsx(lo,{})})}),u.jsxs(Oa,{children:[u.jsx(La,{children:u.jsx(Fa,{children:"بدء محادثة جديدة"})}),u.jsxs(cn,{onValueChange:b,children:[u.jsx(Qt,{children:u.jsx(un,{placeholder:"اختر جهة اتصال..."})}),u.jsx(Yt,{children:I.map(K=>u.jsxs(Je,{value:K.id,children:[K.name," (",K.role,")"]},K.id))})]}),u.jsx(Va,{children:u.jsx(ne,{onClick:F,children:"بدء المحادثة"})})]})]})]}),u.jsx("div",{className:"flex-grow overflow-y-auto",children:m?u.jsx("p",{className:"text-center p-4",children:"جاري التحميل..."}):s.map(K=>{var se;return u.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer rounded-lg mb-1 ${(f==null?void 0:f.id)===K.id?"bg-primary/10":"hover:bg-muted"}`,children:[u.jsxs("div",{className:"flex items-center",onClick:()=>B(K),children:[u.jsx(df,{className:"ml-3 rtl:mr-3",children:u.jsx(ff,{children:te(K).charAt(0)})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:te(K)}),u.jsx("p",{className:"text-sm text-muted-foreground truncate",children:(se=K.lastMessage)==null?void 0:se.text})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[K.isUnread&&u.jsx(Ux,{variant:"destructive",className:"w-3 h-3 p-0 rounded-full"}),u.jsxs(wh,{children:[u.jsx(xh,{asChild:!0,children:u.jsx(ne,{variant:"ghost",size:"icon",children:u.jsx(V1,{size:16})})}),u.jsx(nu,{children:u.jsx(Yi,{onClick:async()=>{if(!window.confirm("هل أنت متأكد من حذف هذه المحادثة بالكامل؟"))return;const Y=await oi(Fe(r,"chats",K.id,"messages"));await Promise.all(Y.docs.map(ue=>ai(ue.ref))),await ai(xe(r,"chats",K.id)),ee({title:"تم الحذف",description:"تم حذف المحادثة."}),K.id===e&&n("/chat")},className:"text-destructive",children:"حذف المحادثة"})})]})]})]},K.id)})})]}),u.jsx("main",{className:`flex-grow flex flex-col ${f?"flex":"hidden md:flex"}`,children:f?u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"flex items-center p-3 border-b",children:[u.jsx(ne,{variant:"ghost",size:"icon",className:"md:hidden mr-2",onClick:()=>n("/chat"),children:u.jsx(Lr,{})}),u.jsx(df,{className:"ml-3 rtl:mr-3",children:u.jsx(ff,{children:te(f).charAt(0)})}),u.jsx("div",{children:u.jsx("h3",{className:"font-bold",children:te(f)})})]}),u.jsxs("div",{className:"flex-grow p-4 overflow-y-auto bg-muted/20",children:[w?u.jsx("p",{children:"جاري تحميل الرسائل..."}):o.map(K=>{var se,oe;return u.jsxs(Ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex items-end gap-2 mb-4 ${K.senderId===t.uid?"justify-end":"justify-start"}`,children:[K.senderId!==t.uid&&u.jsx(df,{className:"h-8 w-8",children:u.jsx(ff,{children:((se=K.senderName)==null?void 0:se.charAt(0))||"U"})}),u.jsxs("div",{className:`group relative max-w-xs lg:max-w-md p-3 rounded-2xl ${K.senderId===t.uid?"bg-primary text-primary-foreground rounded-br-none":"bg-card border rounded-bl-none"}`,children:[u.jsx("p",{children:K.text}),u.jsxs("p",{className:`text-xs mt-1 ${K.senderId===t.uid?"text-primary-foreground/70":"text-muted-foreground"}`,children:[(oe=K.timestamp)==null?void 0:oe.toDate().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),K.edited&&u.jsx("span",{children:" (تم التعديل)"})]})]}),t.role==="admin"&&u.jsxs(wh,{children:[u.jsx(xh,{asChild:!0,children:u.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6",children:u.jsx(V1,{size:16})})}),u.jsxs(nu,{children:[u.jsxs(Yi,{onClick:()=>H(K),children:[u.jsx(Gc,{className:"h-4 w-4 ml-2"})," تعديل"]}),u.jsxs(Yi,{onClick:()=>W(f.id,K.id),className:"text-destructive",children:[u.jsx(er,{className:"h-4 w-4 ml-2"})," حذف"]})]})]})]},K.id)}),u.jsx("div",{ref:E})]}),u.jsx("footer",{className:"p-3 border-t bg-background",children:u.jsxs("form",{onSubmit:$,className:"flex items-center gap-2",children:[u.jsx(Ae,{value:l,onChange:K=>c(K.target.value),placeholder:"اكتب رسالتك...",autoComplete:"off"}),u.jsx(ne,{type:"submit",size:"icon",children:u.jsx(ch,{})})]})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[u.jsx(tk,{size:64,className:"mb-4"}),u.jsx("h2",{className:"text-xl font-semibold",children:"مرحباً بك في مركز الرسائل"}),u.jsx("p",{children:"اختر محادثة من القائمة أو ابدأ واحدة جديدة."})]})})]}),S&&u.jsx(qc,{open:S,onOpenChange:A,children:u.jsxs(Oa,{children:[u.jsx(La,{children:u.jsx(Fa,{children:"تعديل الرسالة"})}),u.jsx(Bx,{value:D,onChange:K=>j(K.target.value),rows:4}),u.jsxs(Va,{children:[u.jsx(ne,{variant:"outline",onClick:()=>A(!1),children:"إلغاء"}),u.jsx(ne,{onClick:X,children:"حفظ التعديل"})]})]})})]})},bC=()=>{const{user:t,updateUserProfile:e,updateUserEmailInAuth:n,updateUserPasswordInAuth:r,loadingAuth:s}=Un(),i=tn(),[o,a]=p.useState((t==null?void 0:t.name)||""),[l,c]=p.useState((t==null?void 0:t.email)||""),[f,h]=p.useState(""),[m,g]=p.useState(""),x=async v=>{if(v.preventDefault(),o.trim()===""){ee({title:"خطأ",description:"الاسم لا يمكن أن يكون فارغاً.",variant:"destructive"});return}await e({name:o})},w=async v=>{if(v.preventDefault(),l.trim()===""){ee({title:"خطأ",description:"البريد الإلكتروني لا يمكن أن يكون فارغاً.",variant:"destructive"});return}if(l.trim().toLowerCase()===t.email.toLowerCase()){ee({title:"معلومات",description:"هذا هو بريدك الإلكتروني الحالي.",variant:"default"});return}await n(l)},_=async v=>{if(v.preventDefault(),f.length<6){ee({title:"خطأ",description:"كلمة المرور يجب أن تكون 6 أحرف على الأقل.",variant:"destructive"});return}if(f!==m){ee({title:"خطأ",description:"كلمتا المرور غير متطابقتين.",variant:"destructive"});return}await r(f),h(""),g("")},E=()=>{if(!t)return"/login";switch(t.role){case"admin":return"/admin";case"teacher":return"/teacher";case"student":return"/student";default:return"/login"}};return u.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة الملف الشخصي"}),u.jsxs(ne,{variant:"outline",onClick:()=>i(E()),children:[u.jsx(Lr,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"العودة إلى لوحة التحكم"]})]}),u.jsx("p",{className:"text-muted-foreground mb-8",children:"تعديل بيانات حسابك الشخصي."})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-8 md:w-2/3 mx-auto",children:[u.jsxs(Ye,{children:[u.jsx(nt,{children:u.jsxs(Xe,{className:"flex items-center",children:[u.jsx(ek,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0"})," تعديل المعلومات الشخصية"]})}),u.jsxs("form",{onSubmit:x,children:[u.jsxs(st,{children:[u.jsx(De,{htmlFor:"name",children:"الاسم الكامل"}),u.jsx(Ae,{id:"name",value:o,onChange:v=>a(v.target.value),className:"mt-1"})]}),u.jsx(jn,{children:u.jsxs(ne,{type:"submit",disabled:s,children:[u.jsx(ss,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," حفظ الاسم"]})})]})]}),u.jsxs(Ye,{children:[u.jsxs(nt,{children:[u.jsxs(Xe,{className:"flex items-center",children:[u.jsx(HW,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0"})," تعديل البريد الإلكتروني"]}),u.jsx(kn,{children:"قد تحتاج إلى تسجيل الخروج والدخول مجدداً بعد تغيير البريد الإلكتروني."})]}),u.jsxs("form",{onSubmit:w,children:[u.jsxs(st,{children:[u.jsx(De,{htmlFor:"email",children:"البريد الإلكتروني"}),u.jsx(Ae,{id:"email",type:"email",value:l,onChange:v=>c(v.target.value),className:"mt-1"})]}),u.jsx(jn,{children:u.jsxs(ne,{type:"submit",disabled:s,children:[u.jsx(ss,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," حفظ البريد الإلكتروني"]})})]})]}),u.jsxs(Ye,{children:[u.jsx(nt,{children:u.jsxs(Xe,{className:"flex items-center",children:[u.jsx(ZW,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0"})," تعديل كلمة المرور"]})}),u.jsxs("form",{onSubmit:_,children:[u.jsxs(st,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(De,{htmlFor:"password",children:"كلمة المرور الجديدة"}),u.jsx(Ae,{id:"password",type:"password",value:f,onChange:v=>h(v.target.value),className:"mt-1",placeholder:"******"})]}),u.jsxs("div",{children:[u.jsx(De,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور الجديدة"}),u.jsx(Ae,{id:"confirmPassword",type:"password",value:m,onChange:v=>g(v.target.value),className:"mt-1",placeholder:"******"})]})]}),u.jsx(jn,{children:u.jsxs(ne,{type:"submit",disabled:s,children:[u.jsx(ss,{className:"mr-2 ml-0 rtl:ml-2 rtl:mr-0 h-4 w-4"})," حفظ كلمة المرور"]})})]})]})]})]})},Md=({allowedRoles:t})=>{const{user:e,isAuthenticated:n,loadingAuth:r}=Un(),s=Ti();return r?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"})}):n?t&&e&&(!e.role||!t.includes(e.role))?u.jsx($i,{to:"/unauthorized",replace:!0}):u.jsx(o4,{}):u.jsx($i,{to:"/login",state:{from:s},replace:!0})},At=({children:t})=>u.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t}),XX=()=>{const{isAuthenticated:t,user:e,loadingAuth:n,schoolSettings:r}=Un(),s=Ti(),i="https://storage.googleapis.com/hostinger-horizons-assets-prod/3ba56b60-c3fa-4b52-8e67-c1dea4ab1636/3e65cc517d9039f74d4f9a08b8568025.png";return n&&s.pathname!=="/login"?u.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-background",children:[u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-primary"}),u.jsx("p",{className:"ml-4 text-lg text-foreground",children:"جاري تحميل التطبيق..."})]}):u.jsxs(u.Fragment,{children:[u.jsxs(rW,{children:[u.jsx("title",{children:(r==null?void 0:r.schoolName)||" "}),u.jsx("link",{rel:"icon",type:"image/png",href:i})]}),u.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[t&&e&&u.jsx(TX,{}),u.jsx(Ci,{mode:"wait",children:u.jsxs(l4,{location:s,children:[u.jsx(Ze,{path:"/login",element:u.jsx(At,{children:u.jsx(aH,{})})}),u.jsxs(Ze,{element:u.jsx(Md,{allowedRoles:["admin"]}),children:[u.jsx(Ze,{path:"/admin",element:u.jsx(At,{children:u.jsx(lH,{})})}),u.jsx(Ze,{path:"/admin/settings",element:u.jsx(At,{children:u.jsx(SX,{})})}),u.jsx(Ze,{path:"/admin/manage-teachers",element:u.jsx(At,{children:u.jsx(AX,{})})}),u.jsx(Ze,{path:"/admin/manage-students",element:u.jsx(At,{children:u.jsx(RX,{})})}),u.jsx(Ze,{path:"/admin/manage-subjects",element:u.jsx(At,{children:u.jsx(NX,{})})}),u.jsx(Ze,{path:"/admin/curriculum",element:u.jsx(At,{children:u.jsx(kX,{})})}),u.jsx(Ze,{path:"/admin/notifications",element:u.jsx(At,{children:u.jsx(jX,{})})}),u.jsx(Ze,{path:"/admin/online-rooms",element:u.jsx(At,{children:u.jsx(DX,{})})}),u.jsx(Ze,{path:"/admin/profile",element:u.jsx(At,{children:u.jsx(bC,{})})})]}),u.jsxs(Ze,{element:u.jsx(Md,{allowedRoles:["teacher"]}),children:[u.jsx(Ze,{path:"/teacher",element:u.jsx(At,{children:u.jsx(DK,{})})}),u.jsx(Ze,{path:"/teacher/profile",element:u.jsx(At,{children:u.jsx(bC,{})})})]}),u.jsx(Ze,{element:u.jsx(Md,{allowedRoles:["student"]}),children:u.jsx(Ze,{path:"/student",element:u.jsx(At,{children:u.jsx(HQ,{})})})}),u.jsxs(Ze,{element:u.jsx(Md,{allowedRoles:["admin","teacher","student"]}),children:[u.jsx(Ze,{path:"/chat",element:u.jsx(At,{children:u.jsx(CC,{})})}),u.jsx(Ze,{path:"/chat/:chatId",element:u.jsx(At,{children:u.jsx(CC,{})})})]}),u.jsx(Ze,{path:"/",element:n?u.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"}),u.jsx("p",{className:"ml-4 text-lg text-foreground",children:"جاري التحميل..."})]}):t&&e?e.role==="admin"?u.jsx($i,{to:"/admin"}):e.role==="teacher"?u.jsx($i,{to:"/teacher"}):e.role==="student"?u.jsx($i,{to:"/student"}):u.jsx($i,{to:"/login"}):u.jsx($i,{to:"/login"})}),u.jsx(Ze,{path:"/unauthorized",element:u.jsx(At,{children:u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",children:[u.jsx(JN,{size:64,className:"text-destructive mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-destructive mb-2",children:"غير مصرح لك بالدخول"}),u.jsx("p",{className:"text-muted-foreground",children:"ليس لديك الأذونات اللازمة لعرض هذه الصفحة."})]})})}),u.jsx(Ze,{path:"*",element:u.jsx(At,{children:u.jsx(KQ,{})})})]},s.pathname)})]})]})};var JX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZX="VisuallyHidden",Wx=p.forwardRef((t,e)=>u.jsx(_e.span,{...t,ref:e,style:{...JX,...t.style}}));Wx.displayName=ZX;var Hx="ToastProvider",[Kx,eJ,tJ]=Tp("Toast"),[zD,$J]=vr("Toast",[tJ]),[nJ,$p]=zD(Hx),WD=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[c,f]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Hx}\`. Expected non-empty \`string\`.`),u.jsx(Kx.Provider,{scope:e,children:u.jsx(nJ,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>f(g=>g+1),[]),onToastRemove:p.useCallback(()=>f(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};WD.displayName=Hx;var HD="ToastViewport",rJ=["F8"],Cy="toast.viewportPause",by="toast.viewportResume",KD=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rJ,label:s="Notifications ({hotkey})",...i}=t,o=$p(HD,n),a=eJ(n),l=p.useRef(null),c=p.useRef(null),f=p.useRef(null),h=p.useRef(null),m=pt(e,h,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const _=E=>{var T;r.length!==0&&r.every(I=>E[I]||E.code===I)&&((T=h.current)==null||T.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),p.useEffect(()=>{const _=l.current,E=h.current;if(x&&_&&E){const v=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(Cy);E.dispatchEvent(M),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(by);E.dispatchEvent(M),o.isClosePausedRef.current=!1}},I=M=>{!_.contains(M.relatedTarget)&&T()},R=()=>{_.contains(document.activeElement)||T()};return _.addEventListener("focusin",v),_.addEventListener("focusout",I),_.addEventListener("pointermove",v),_.addEventListener("pointerleave",R),window.addEventListener("blur",v),window.addEventListener("focus",T),()=>{_.removeEventListener("focusin",v),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",v),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",v),window.removeEventListener("focus",T)}}},[x,o.isClosePausedRef]);const w=p.useCallback(({tabbingDirection:_})=>{const v=a().map(T=>{const I=T.ref.current,R=[I,...gJ(I)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?v.reverse():v).flat()},[a]);return p.useEffect(()=>{const _=h.current;if(_){const E=v=>{var R,M,b;const T=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!T){const S=document.activeElement,A=v.shiftKey;if(v.target===_&&A){(R=c.current)==null||R.focus();return}const D=w({tabbingDirection:A?"backwards":"forwards"}),j=D.findIndex(L=>L===S);Sg(D.slice(j+1))?v.preventDefault():A?(M=c.current)==null||M.focus():(b=f.current)==null||b.focus()}};return _.addEventListener("keydown",E),()=>_.removeEventListener("keydown",E)}},[a,w]),u.jsxs(IH,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&u.jsx(Iy,{ref:c,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"forwards"});Sg(_)}}),u.jsx(Kx.Slot,{scope:n,children:u.jsx(_e.ol,{tabIndex:-1,...i,ref:m})}),x&&u.jsx(Iy,{ref:f,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"backwards"});Sg(_)}})]})});KD.displayName=HD;var GD="ToastFocusProxy",Iy=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=$p(GD,n);return u.jsx(Wx,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Iy.displayName=GD;var Du="Toast",sJ="toast.swipeStart",iJ="toast.swipeMove",oJ="toast.swipeCancel",aJ="toast.swipeEnd",qD=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Pi({prop:r,defaultProp:s??!0,onChange:i,caller:Du});return u.jsx(yr,{present:n||a,children:u.jsx(uJ,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Sn(t.onPause),onResume:Sn(t.onResume),onSwipeStart:le(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(t.onSwipeMove,c=>{const{x:f,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:le(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(t.onSwipeEnd,c=>{const{x:f,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});qD.displayName=Du;var[lJ,cJ]=zD(Du,{onClose(){}}),uJ=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:g,...x}=t,w=$p(Du,n),[_,E]=p.useState(null),v=pt(e,L=>E(L)),T=p.useRef(null),I=p.useRef(null),R=s||w.duration,M=p.useRef(0),b=p.useRef(R),S=p.useRef(0),{onToastAdd:A,onToastRemove:P}=w,k=Sn(()=>{var q;(_==null?void 0:_.contains(document.activeElement))&&((q=w.viewport)==null||q.focus()),o()}),D=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(S.current),M.current=new Date().getTime(),S.current=window.setTimeout(k,L))},[k]);p.useEffect(()=>{const L=w.viewport;if(L){const q=()=>{D(b.current),c==null||c()},$=()=>{const B=new Date().getTime()-M.current;b.current=b.current-B,window.clearTimeout(S.current),l==null||l()};return L.addEventListener(Cy,$),L.addEventListener(by,q),()=>{L.removeEventListener(Cy,$),L.removeEventListener(by,q)}}},[w.viewport,R,l,c,D]),p.useEffect(()=>{i&&!w.isClosePausedRef.current&&D(R)},[i,R,w.isClosePausedRef,D]),p.useEffect(()=>(A(),()=>P()),[A,P]);const j=p.useMemo(()=>_?tM(_):null,[_]);return w.viewport?u.jsxs(u.Fragment,{children:[j&&u.jsx(dJ,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),u.jsx(lJ,{scope:n,onClose:k,children:_i.createPortal(u.jsx(Kx.ItemSlot,{scope:n,children:u.jsx(bH,{asChild:!0,onEscapeKeyDown:le(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||k(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(_e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...x,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:le(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:le(t.onPointerDown,L=>{L.button===0&&(T.current={x:L.clientX,y:L.clientY})}),onPointerMove:le(t.onPointerMove,L=>{if(!T.current)return;const q=L.clientX-T.current.x,$=L.clientY-T.current.y,B=!!I.current,O=["left","right"].includes(w.swipeDirection),F=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,W=O?F(0,q):0,H=O?0:F(0,$),X=L.pointerType==="touch"?10:2,te={x:W,y:H},K={originalEvent:L,delta:te};B?(I.current=te,Od(iJ,h,K,{discrete:!1})):IC(te,w.swipeDirection,X)?(I.current=te,Od(sJ,f,K,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(q)>X||Math.abs($)>X)&&(T.current=null)}),onPointerUp:le(t.onPointerUp,L=>{const q=I.current,$=L.target;if($.hasPointerCapture(L.pointerId)&&$.releasePointerCapture(L.pointerId),I.current=null,T.current=null,q){const B=L.currentTarget,O={originalEvent:L,delta:q};IC(q,w.swipeDirection,w.swipeThreshold)?Od(aJ,g,O,{discrete:!0}):Od(oJ,m,O,{discrete:!0}),B.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),dJ=t=>{const{__scopeToast:e,children:n,...r}=t,s=$p(Du,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return pJ(()=>o(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:u.jsx(wp,{asChild:!0,children:u.jsx(Wx,{...r,children:i&&u.jsxs(u.Fragment,{children:[s.label," ",n]})})})},fJ="ToastTitle",QD=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(_e.div,{...r,ref:e})});QD.displayName=fJ;var hJ="ToastDescription",YD=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(_e.div,{...r,ref:e})});YD.displayName=hJ;var XD="ToastAction",JD=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?u.jsx(eM,{altText:n,asChild:!0,children:u.jsx(Gx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${XD}\`. Expected non-empty \`string\`.`),null)});JD.displayName=XD;var ZD="ToastClose",Gx=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=cJ(ZD,n);return u.jsx(eM,{asChild:!0,children:u.jsx(_e.button,{type:"button",...r,ref:e,onClick:le(t.onClick,s.onClose)})})});Gx.displayName=ZD;var eM=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return u.jsx(_e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function tM(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mJ(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...tM(r))}}),e}function Od(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qw(s,i):s.dispatchEvent(i)}var IC=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function pJ(t=()=>{}){const e=Sn(t);Ln(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mJ(t){return t.nodeType===t.ELEMENT_NODE}function gJ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Sg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var vJ=WD,nM=KD,rM=qD,sM=QD,iM=YD,oM=JD,aM=Gx;const yJ=vJ,lM=J.forwardRef(({className:t,...e},n)=>u.jsx(nM,{ref:n,className:he("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));lM.displayName=nM.displayName;const wJ=mp("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cM=J.forwardRef(({className:t,variant:e,...n},r)=>u.jsx(rM,{ref:r,className:he(wJ({variant:e}),t),...n}));cM.displayName=rM.displayName;const xJ=J.forwardRef(({className:t,...e},n)=>u.jsx(oM,{ref:n,className:he("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));xJ.displayName=oM.displayName;const uM=J.forwardRef(({className:t,...e},n)=>u.jsx(aM,{ref:n,className:he("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:u.jsx(nk,{className:"h-4 w-4"})}));uM.displayName=aM.displayName;const dM=J.forwardRef(({className:t,...e},n)=>u.jsx(sM,{ref:n,className:he("text-sm font-semibold",t),...e}));dM.displayName=sM.displayName;const fM=J.forwardRef(({className:t,...e},n)=>u.jsx(iM,{ref:n,className:he("text-sm opacity-90",t),...e}));fM.displayName=iM.displayName;function _J(){const{toasts:t}=I8();return u.jsxs(yJ,{children:[t.map(({id:e,title:n,description:r,action:s,...i})=>u.jsxs(cM,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[n&&u.jsx(dM,{children:n}),r&&u.jsx(fM,{children:r})]}),s,u.jsx(uM,{})]},e)),u.jsx(lM,{})]})}const hM={apiKey:"AIzaSyCJD23c1MfyQZMvP6nG9Lk6AYWyDzoWPSc",authDomain:"maharet-edu.firebaseapp.com",databaseURL:"https://maharet-edu-default-rtdb.firebaseio.com",projectId:"maharet-edu",storageBucket:"maharet-edu.appspot.com",messagingSenderId:"311203875547",appId:"1:311203875547:web:e622af1e39b1a0cd7a1afe",measurementId:"G-2XT64WZ1F8"};bA().length||X0(hM);bA().some(t=>t.name==="admin-creation-app")||X0(hM,"admin-creation-app");bg.createRoot(document.getElementById("root")).render(u.jsx(J.StrictMode,{children:u.jsx(FN,{children:u.jsx(m4,{children:u.jsx(P8,{children:u.jsxs(GQ,{children:[" ",u.jsx(XX,{}),u.jsx(_J,{})]})})})})}));
